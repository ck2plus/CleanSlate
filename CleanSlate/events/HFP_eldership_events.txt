# Written by Flavio

namespace = HFP
# Grumpy Eldership Events

#########################################

# Landless realm Elder wishes to move into your capital, unlocking chance for additional personal events. (only if Pleased)
# Landless realm Elder leaves your capital, making you lose prestige. (only if Displeased)

# Give county request while pleased (to good person). (only if Pleased)
# Give county request while upset (to poor candidate). (only if Displeased)
# Fabricating claim for liked person. (only if Displeased)

# Elder feels lonely. (temporary stewardship malus) (only if Pleased)

# Elder is pleased, tells vassals to behave and listen to ruler (result based on learning and age) (only if Ecstatic)
# Elder offers help by sharing wisdom of old (increase culture tech, or learning, or stewardship) (only if Ecstatic)


#########################################

# on_yearly_pulse: Elder gains Too Much to Live For modifier due to being an Elder.
character_event = {
	id = HFP.24001
	desc = EVTDESCHFP24001
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				religion_openly_west_african_or_reformed_trigger = yes
				capital_scope = { region = world_africa }
			}
		}
	}

	is_triggered_only = yes

	min_age = 30
	only_capable = yes
	prisoner = no

	trigger = {
		any_eldership_title = {
			ROOT = {
				OR = {
					has_elector_stance = { stance = elder_displeased title = PREV }
					has_elector_stance = { stance = elder_pleased title = PREV }
					has_elector_stance = { stance = elder_ecstatic title = PREV }
				}
			}
		}

		NOT = { has_character_modifier = elder_long_life_modifier }
	}

	option = {
		name = EVTOPTAHFP24001

		add_character_modifier = {
			name = elder_long_life_modifier
			years = 100
		}

		if = {
			limit = {
				is_ruler = no
				can_apply_average_nickname_trigger = yes
			}

			give_nickname = nick_elder
		}
	}
}

# on_decade_pulse: Elder wishes to move to the court of a ruler he is the elder of.
character_event = {
	id = HFP.24002

	is_triggered_only = yes # on_decade_pulse, random_events
	hide_window = yes

	min_age = 40
	only_capable = yes
	prisoner = no

	trigger = {
		NOT = { has_character_flag = flag_elder_moved_court }
		is_ruler = no
		is_married = no
		is_consort = no

		any_eldership_title = {
			ROOT = {
				OR = {
					has_elector_stance = { stance = elder_pleased title = PREV }
					has_elector_stance = { stance = elder_ecstatic title = PREV }
				}
			}

			holder_scope = {
				NOR = {
					is_liege_of = ROOT
					has_character_modifier = elder_demand_cooldown
				}
			}
		}

		NOT = {
			any_eldership_title = {
				ROOT = {
					OR = {
						has_elector_stance = { stance = elder_pleased title = PREV }
						has_elector_stance = { stance = elder_ecstatic title = PREV }
					}
				}

				holder_scope = { # Should not want to move if he already has a nice liege he likes
					is_liege_of = ROOT
				}
			}
		}
	}

	immediate = {
		set_character_flag = flag_elder_moved_court

		random_eldership_title = {
			limit = {
				ROOT = {
					OR = {
						has_elector_stance = { stance = elder_pleased title = PREV }
						has_elector_stance = { stance = elder_ecstatic title = PREV }
					}
				}

				holder_scope = {
					NOR = {
						is_liege_of = ROOT
						has_character_modifier = elder_demand_cooldown
					}
				}
			}

			holder_scope = {
				character_event = { id = HFP.24003 }
			}
		}
	}
}

# Ruler informed
character_event = {
	id = HFP.24003
	desc = EVTDESCHFP24003
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		add_character_modifier = {
			name = elder_demand_cooldown
			years = 5
			hidden = yes
		}
	}

	option = {
		name = EVTOPTAHFP24003

		FROM = {
			show_scope_change = no

			move_character = ROOT

			opinion = {
				name = opinion_elder_fulfilled_demand
				who = ROOT
				years = 10
			}
		}

		custom_tooltip = {
			text = tooltip_other_elders_pleased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_pleased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 85 }
	}

	option = {
		name = EVTOPTBHFP24003

		reverse_opinion = {
			name = opinion_elder_refused_demand
			who = FROM
			years = 10
		}

		custom_tooltip = {
			text = tooltip_other_elders_displeased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_displeased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 15 }
	}
}

# on_decade_pulse: Elder moves away from court of ruler he does not like
character_event = {
	id = HFP.24004

	is_triggered_only = yes # on_decade_pulse, random_events
	hide_window = yes

	min_age = 40
	only_capable = yes
	prisoner = no

	trigger = {
		is_ruler = no
		is_married = no
		is_consort = no

		any_eldership_title = {
			ROOT = {
				has_elector_stance = {
					stance = elder_displeased
					title = PREV
				}
			}

			holder_scope = {
				is_liege_of = ROOT
				NOT = { has_character_modifier = elder_demand_cooldown }
			}
		}

		any_realm_lord = {
			is_landed = yes

			NOR = {
				is_liege_of = ROOT
				is_rival = ROOT
			}
		}
	}

	immediate = {
		random_eldership_title = {
			limit = {
				ROOT = {
					has_elector_stance = {
						stance = elder_displeased
						title = PREV
					}
				}

				holder_scope = {
					is_liege_of = ROOT
					ROOT = { host = { character = PREVPREV } }
				}
			}

			holder_scope = {
				character_event = { id = HFP.24005 }
			}
		}

		random_realm_lord = {
			limit = {
				is_landed = yes

				NOR = {
					is_liege_of = ROOT
					is_rival = ROOT
				}
			}

			preferred_limit = {
				OR = {
					is_friend = ROOT
					is_lover = ROOT
				}
			}

			preferred_limit = {
				reverse_opinion = {
					who = ROOT
					value >= 60
				}
			}

			preferred_limit = {
				reverse_opinion = {
					who = ROOT
					value >= 40
				}
			}

			preferred_limit = {
				reverse_opinion = {
					who = ROOT
					value >= 20
				}
			}

			ROOT = {
				move_character = PREV
			}
		}
	}
}

# Ruler informed
character_event = {
	id = HFP.24005
	desc = EVTDESCHFP24005
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		add_character_modifier = {
			name = elder_demand_cooldown
			years = 5
			hidden = yes
		}
	}

	option = { # He was always impossible to deal with!
		name = EVTOPTAHFP24005
		tooltip_info = diplomacy

		trigger = { diplomacy >= 12 }

		custom_tooltip = {
			text = tooltip_EVTOPTAHFP24005

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_pleased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 85 }
	}

	option = {
		name = EVTOPTBHFP24005

		custom_tooltip = {
			text = tooltip_other_elders_displeased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_displeased
						who = ROOT
						years = 10
					}
				}
			}
		}

		tiered_prestige_negative_effect = yes

		ai_chance = { factor = 15 }
	}
}

# on_decade_pulse: Elder is pleased, wants ruler to give County to competent person he likes.
character_event = {
	id = HFP.24006
	desc = EVTDESCHFP24006
	border = GFX_event_normal_frame_diplomacy
	portrait = event_target:scoped_ruler

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes # on_decade_pulse, random_events
	hide_new = yes

	min_age = 30
	only_capable = yes
	prisoner = no

	trigger = {
		any_eldership_title = {
			ROOT = {
				OR = {
					has_elector_stance = { stance = elder_pleased title = PREV }
					has_elector_stance = { stance = elder_ecstatic title = PREV }
				}
			}

			holder_scope = {
				NOT = { has_character_modifier = elder_demand_cooldown }

				any_demesne_title = {
					real_tier = COUNT
					can_be_given_away = yes
					location = { is_capital = no }
				}

				any_dynasty_member = {
					is_alive = yes
					is_adult = yes
					is_ruler = no
					NOT = { is_primary_heir = PREV }

					trigger_if = {
						limit = { is_female = no }
						PREVPREV = { NOT = { has_law = enatic_succession } }
					}
					trigger_else = {
						PREVPREV = { NOT = { has_law = agnatic_succession } }
					}
				}
			}
		}
	}

	immediate = {
		random_eldership_title = {
			limit = {
				ROOT = {
					OR = {
						has_elector_stance = { stance = elder_pleased title = PREV }
						has_elector_stance = { stance = elder_ecstatic title = PREV }
					}
				}

				holder_scope = {
					NOT = { has_character_modifier = elder_demand_cooldown }

					any_demesne_title = {
						real_tier = COUNT
						can_be_given_away = yes
						location = { is_capital = no }
					}

					any_dynasty_member = {
						is_alive = yes
						is_adult = yes
						is_ruler = no
						NOT = { is_primary_heir = PREV }

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}
				}
			}

			holder_scope = {
				save_event_target_as = scoped_ruler

				random_dynasty_member = {
					limit = {
						is_alive = yes
						is_adult = yes
						is_ruler = no
						NOT = { is_primary_heir = PREV }

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}

					preferred_limit = {
						OR = {
							is_smart_trigger = yes
							is_attractive_trigger = yes
						}

						NOT = { is_rival = ROOT }
						is_dumb_trigger = no
						is_weak_trigger = no
						is_evil_trigger = no
					}

					preferred_limit = {
						NOT = { is_rival = ROOT }
						is_dumb_trigger = no
						is_weak_trigger = no
						is_evil_trigger = no
					}

					preferred_limit = {
						NOT = { is_rival = ROOT }
					}

					save_event_target_as = scoped_recipient_first
				}

				random_dynasty_member = {
					limit = {
						is_alive = yes
						is_adult = yes
						is_ruler = no

						NOR = {
							is_primary_heir = PREV
							character = event_target:scoped_recipient_first
						}

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}

					preferred_limit = {
						OR = {
							is_lover = ROOT
							is_friend = ROOT
							is_married = ROOT
						}
					}

					preferred_limit = {
						reverse_opinion = {
							who = ROOT
							value >= 80
						}
					}

					preferred_limit = {
						reverse_opinion = {
							who = ROOT
							value >= 60
						}
					}

					preferred_limit = {
						reverse_opinion = {
							who = ROOT
							value >= 40
						}
					}

					preferred_limit = {
						reverse_opinion = {
							who = ROOT
							value >= 20
						}
					}

					save_event_target_as = scoped_recipient_second
				}

				random_dynasty_member = {
					limit = {
						is_alive = yes
						is_adult = yes
						is_ruler = no

						NOR = {
							is_primary_heir = PREV
							character = event_target:scoped_recipient_first
							character = event_target:scoped_recipient_second
						}

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}

					preferred_limit = {
						OR = {
							diplomacy >= 18
							intrigue >= 18
							stewardship >= 18
							learning >= 18
						}
					}

					preferred_limit = {
						OR = {
							diplomacy >= 16
							intrigue >= 16
							stewardship >= 16
							learning >= 16
						}
					}

					preferred_limit = {
						OR = {
							diplomacy >= 14
							intrigue >= 14
							stewardship >= 14
							learning >= 14
						}
					}

					preferred_limit = {
						OR = {
							diplomacy >= 12
							intrigue >= 12
							stewardship >= 12
							learning >= 12
						}
					}

					preferred_limit = {
						OR = {
							diplomacy >= 10
							intrigue >= 10
							stewardship >= 10
							learning >= 10
						}
					}

					preferred_limit = {
						OR = {
							diplomacy >= 8
							intrigue >= 8
							stewardship >= 8
							learning >= 8
						}
					}

					save_event_target_as = scoped_recipient_third
				}
			}
		}
	}

	option = { # Grumpy option
		name = EVTOPTZHFP24006
		tooltip_info = stubborn

		trigger = { trait = stubborn }

		show_portrait = ROOT

		custom_tooltip = {
			text = tooltip_EVTOPTZHFP24006

			hidden_effect = {
				save_event_target_as = scoped_potential_count

				event_target:scoped_ruler = {
					character_event = { id = HFP.24007 }
				}
			}
		}

		if = {
			limit = { trait = humble }
			remove_trait = humble
		}

		ai_chance = {
			factor = 5

			mult_modifier = {
				factor = 1.75
				trait = proud
			}

			mult_modifier = {
				factor = 0.25
				trait = humble
			}
		}
	}

	option = { # Smart pick
		name = EVTOPTAHFP24006

		trigger = {
			event_target:scoped_recipient_first = { is_alive = yes }
		}

		custom_tooltip = { text = tooltip_EVTOPTAHFP24006 }

		event_target:scoped_recipient_first = {
			save_event_target_as = scoped_potential_count
		}

		event_target:scoped_ruler = {
			character_event = { id = HFP.24007 }
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 1.75
				trait = kind
			}

			mult_modifier = {
				factor = 0.5
				trait = envious
			}
		}
	}

	option = { # Beloved pick
		name = EVTOPTBHFP24006

		trigger = {
			event_target:scoped_recipient_second = { is_alive = yes }
		}

		custom_tooltip = { text = tooltip_EVTOPTBHFP24006 }

		event_target:scoped_recipient_second = {
			save_event_target_as = scoped_potential_count
		}

		event_target:scoped_ruler = {
			character_event = { id = HFP.24007 }
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 1.75
				trait = gregarious
			}

			mult_modifier = {
				factor = 0.5
				trait = shy
			}
		}
	}

	option = { # Competent pick
		name = EVTOPTCHFP24006

		trigger = {
			event_target:scoped_recipient_third = { is_alive = yes }
		}

		custom_tooltip = { text = tooltip_EVTOPTCHFP24006 }

		event_target:scoped_recipient_third = {
			save_event_target_as = scoped_potential_count
		}

		event_target:scoped_ruler = {
			character_event = { id = HFP.24007 }
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 1.75
				trait = diligent
			}

			mult_modifier = {
				factor = 0.5
				trait = slothful
			}
		}
	}

	option = { # Nobody
		name = EVTOPTDHFP24006

		trigger = {
			NOT = { trait = stubborn }
		}

		ai_chance = { factor = 0 }
	}
}

# Ruler informed.
character_event = {
	id = HFP.24007
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCAHFP24007
		trigger = {
			event_target:scoped_potential_count = {
				NOT = { character = FROM }
			}
		}
	}
	desc = { # Elder is asking for himself
		text = EVTDESCBHFP24007
		trigger = {
			event_target:scoped_potential_count = {
				character = FROM
			}
		}
	}

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes
	hide_new = yes

	immediate = {
		add_character_modifier = {
			name = elder_demand_cooldown
			years = 20
			hidden = yes
		}
	}

	option = { # Give title
		name = EVTOPTAHFP24007

		random_demesne_title = {
			show_scope_change = no

			limit = {
				tier = COUNT
				can_be_given_away = yes
				location = { is_capital = no }
			}

			grant_title = event_target:scoped_potential_count
		}

		show_portrait = event_target:scoped_potential_count

		FROM = {
			show_scope_change = no

			opinion = {
				name = opinion_elder_fulfilled_demand
				who = ROOT
				years = 30
			}

			character_event = { id = HFP.24008 }
		}

		custom_tooltip = {
			text = tooltip_other_elders_pleased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_pleased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 85 }
	}

	option = { # Refuse
		name = EVTOPTBHFP24007

		FROM = {
			show_scope_change = no

			opinion = {
				name = opinion_elder_refused_demand
				who = ROOT
				years = 30
			}

			character_event = { id = HFP.24009 }
		}

		custom_tooltip = {
			text = tooltip_other_elders_displeased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_displeased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 15 }
	}
}

# Elder notified of title given
character_event = {
	id = HFP.24008
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCAHFP24008
		trigger = {
			NOT = { character = event_target:scoped_potential_count }
		}
	}
	desc = { # Elder is asking for himself
		text = EVTDESCBHFP24008
		trigger = { character = event_target:scoped_potential_count
		}
	}

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHFP24008

		tooltip = {
			opinion = {
				name = opinion_elder_fulfilled_demand
				who = FROM
				years = 30
			}
		}
	}
}

# Elder notified of title refused
character_event = {
	id = HFP.24009
	desc = EVTDESCAHFP24009
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHFP24009

		tooltip = {
			opinion = {
				name = opinion_elder_refused_demand
				who = FROM
				years = 30
			}
		}
	}
}

# on_decade_pulse: Elder is displeased, wants ruler to give County to incompetent person he likes.
character_event = {
	id = HFP.24010
	desc = EVTDESCHFP24010
	border = GFX_event_normal_frame_diplomacy
	portrait = event_target:scoped_ruler

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes
	hide_new = yes

	min_age = 30
	only_capable = yes
	prisoner = no

	trigger = {
		any_eldership_title = {
			ROOT = {
				has_elector_stance = {
					stance = elder_displeased
					title = PREV
				}
			}

			holder_scope = {
				NOT = { has_character_modifier = elder_demand_cooldown }

				any_demesne_title = {
					tier = COUNT
					can_be_given_away = yes
					location = { is_capital = no }
				}

				any_dynasty_member = {
					is_alive = yes
					is_adult = yes
					is_ruler = no
					NOT = { is_primary_heir = PREV }

					trigger_if = {
						limit = { is_female = no }
						PREVPREV = { NOT = { has_law = enatic_succession } }
					}
					trigger_else = {
						PREVPREV = { NOT = { has_law = agnatic_succession } }
					}
				}
			}
		}
	}

	immediate = {
		random_eldership_title = {
			limit = {
				ROOT = {
					has_elector_stance = {
						stance = elder_displeased
						title = PREV
					}
				}

				holder_scope = {
					NOT = { has_character_modifier = elder_demand_cooldown }

					any_demesne_title = {
						tier = COUNT
						can_be_given_away = yes
						location = { is_capital = no }
					}

					any_dynasty_member = {
						is_alive = yes
						is_adult = yes
						is_ruler = no
						NOT = { is_primary_heir = PREV }

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}
				}
			}

			holder_scope = {
				save_event_target_as = scoped_ruler

				random_dynasty_member = {
					limit = {
						is_alive = yes
						is_adult = yes
						is_ruler = no
						NOT = { is_primary_heir = PREV }

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}

					preferred_limit = {
						OR = {
							is_dumb_trigger = yes
							is_weak_trigger = yes
							is_evil_trigger = yes
							trait = inbred
							trait = maimed
							trait = mangled
							trait = hunchback
							trait = ugly
							trait = clubfooted
							trait = harelip
							trait = dwarf
							trait = giant
							trait = stutter
							trait = lisp
						}

						NOT = { is_rival = ROOT }
					}

					preferred_limit = {
						OR = {
							is_dumb_trigger = yes
							is_weak_trigger = yes
							is_evil_trigger = yes
							trait = inbred
							trait = maimed
							trait = mangled
							trait = hunchback
							trait = ugly
							trait = clubfooted
							trait = harelip
							trait = dwarf
							trait = giant
							trait = stutter
							trait = lisp
						}
					}

					save_event_target_as = scoped_recipient_first
				}

				random_dynasty_member = {
					limit = {
						is_alive = yes
						is_adult = yes
						is_ruler = no

						NOR = {
							is_primary_heir = PREV
							character = event_target:scoped_recipient_first
						}

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}

					preferred_limit = {
						OR = {
							is_rival = event_target:scoped_ruler

							opinion = {
								who = event_target:scoped_ruler
								value <= -100
							}
						}
					}

					preferred_limit = {
						opinion = {
							who = event_target:scoped_ruler
							value < 80
						}
					}

					preferred_limit = {
						opinion = {
							who = event_target:scoped_ruler
							value < -60
						}
					}

					preferred_limit = {
						opinion = {
							who = event_target:scoped_ruler
							value < -40
						}
					}

					preferred_limit = {
						opinion = {
							who = event_target:scoped_ruler
							value < -20
						}
					}

					preferred_limit = {
						opinion = {
							who = event_target:scoped_ruler
							value < 0
						}
					}

					save_event_target_as = scoped_recipient_second
				}

				random_dynasty_member = {
					limit = {
						is_alive = yes
						is_adult = yes
						is_ruler = no

						NOR = {
							is_primary_heir = PREV
							character = event_target:scoped_recipient_first
							character = event_target:scoped_recipient_second
						}

						trigger_if = {
							limit = { is_female = no }
							PREVPREV = { NOT = { has_law = enatic_succession } }
						}
						trigger_else = {
							PREVPREV = { NOT = { has_law = agnatic_succession } }
						}
					}

					preferred_limit = {
						diplomacy < 6
						intrigue < 6
						stewardship < 6
						learning < 6
						martial < 6
						combat_rating < 10
						NOT = { trait = diligent }
					}

					preferred_limit = {
						diplomacy < 8
						intrigue < 8
						stewardship < 8
						learning < 8
						martial < 8
						combat_rating < 20
					}

					preferred_limit = {
						diplomacy < 10
						intrigue < 10
						stewardship < 10
						learning < 10
						martial < 10
						combat_rating < 30
					}

					save_event_target_as = scoped_recipient_third
				}
			}
		}
	}

	option = { # Grumpy option
		name = EVTOPTZHFP24010
		tooltip_info = stubborn

		trigger = { trait = stubborn }

		custom_tooltip = { text = tooltip_EVTOPTZHFP24006 }

		show_portrait = ROOT
		save_event_target_as = scoped_potential_count

		event_target:scoped_ruler = {
			character_event = { id = HFP.24011 }
		}

		remove_trait_silently_humble_effect = yes

		ai_chance = {
			factor = 5

			mult_modifier = {
				factor = 1.75
				trait = proud
			}

			mult_modifier = {
				factor = 0.25
				trait = humble
			}
		}
	}

	option = { # Dumb pick
		name = EVTOPTAHFP24010

		trigger = {
			event_target:scoped_recipient_first = { is_alive = yes }
		}

		custom_tooltip = { text = tooltip_EVTOPTAHFP24006 }

		event_target:scoped_recipient_first = {
			save_event_target_as = scoped_potential_count
		}

		event_target:scoped_ruler = {
			character_event = { id = HFP.24011 }
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 1.75
				trait = cruel
			}

			mult_modifier = {
				factor = 0.5
				trait = kind
			}
		}
	}

	option = { # Hated pick
		name = EVTOPTBHFP24010

		trigger = {
			event_target:scoped_recipient_second = { is_alive = yes }
		}

		custom_tooltip = { text = tooltip_EVTOPTBHFP24006 }

		event_target:scoped_recipient_second = {
			save_event_target_as = scoped_potential_count
		}

		event_target:scoped_ruler = {
			character_event = { id = HFP.24011 }
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 1.75
				trait = deceitful
			}

			mult_modifier = {
				factor = 0.5
				trait = honest
			}
		}
	}

	option = { # Incompetent pick
		name = EVTOPTCHFP24010

		trigger = {
			event_target:scoped_recipient_third = { is_alive = yes }
		}

		custom_tooltip = { text = tooltip_EVTOPTCHFP24006 }

		event_target:scoped_recipient_third = {
			save_event_target_as = scoped_potential_count
		}

		event_target:scoped_ruler = {
			character_event = { id = HFP.24011 }
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 1.75
				trait = slothful
			}

			mult_modifier = {
				factor = 0.5
				trait = diligent
			}
		}
	}

	option = { # Nobody
		name = EVTOPTDHFP24010

		trigger = {
			NOT = { trait = stubborn }
		}

		ai_chance = { factor = 0 }
	}
}

# Ruler informed
character_event = {
	id = HFP.24011
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCAHFP24011
		trigger = {
			event_target:scoped_potential_count = {
				NOT = { character = FROM }
			}
		}
	}
	desc = { # Elder is asking for himself.
		text = EVTDESCBHFP24011
		trigger = {
			event_target:scoped_potential_count = {
				character = FROM
			}
		}
	}

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	immediate = {
		add_character_modifier = {
			name = elder_demand_cooldown
			years = 20
			hidden = yes
		}
	}

	option = { # Give title
		name = EVTOPTAHFP24011

		random_demesne_title = {
			show_scope_change = no

			limit = {
				real_tier = COUNT
				can_be_given_away = yes
				location = { is_capital = no }
			}

			grant_title = event_target:scoped_potential_count
		}

		show_portrait = event_target:scoped_potential_count

		FROM = {
			show_scope_change = no

			opinion = {
				name = opinion_elder_fulfilled_demand
				who = ROOT
				years = 30
			}

			character_event = { id = HFP.24012 }
		}

		custom_tooltip = {
			text = tooltip_other_elders_pleased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_pleased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 65 }
	}

	option = { # Refuse
		name = EVTOPTBHFP24011

		FROM = {
			show_scope_change = no

			opinion = {
				name = opinion_elder_refused_demand
				who = ROOT
				years = 30
			}

			character_event = { id = HFP.24013 }
		}

		custom_tooltip = {
			text = tooltip_other_elders_displeased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_displeased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = {
			factor = 45

			mult_modifier = {
				factor = 0.5
				trait = trusting
			}
		}
	}
}

# Elder notified of title given
character_event = {
	id = HFP.24012
	desc = EVTDESCAHFP24012
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHFP24012

		tooltip = {
			opinion = {
				name = opinion_elder_fulfilled_demand
				who = FROM
				years = 30
			}
		}
	}
}

# Elder notified of title refused
character_event = {
	id = HFP.24013
	desc = EVTDESCAHFP24013
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHFP24013

		tooltip = {
			opinion = {
				name = opinion_elder_refused_demand
				who = FROM
				years = 30
			}
		}
	}
}

# on_decade_pulse: Elder feels lonely.
character_event = {
	id = HFP.24014

	is_triggered_only = yes # on_decade_pulse, random_events
	hide_window = yes

	min_age = 40
	only_capable = yes
	prisoner = no

	trigger = {
		is_ruler = no
		is_married = no
		has_lover = no

		any_eldership_title = {
			ROOT = {
				has_elector_stance = {
					stance = elder_pleased
					title = PREV
				}
			}

			holder_scope = {
				is_liege_of = ROOT
				NOT = { has_character_modifier = elder_demand_cooldown }
			}
		}
	}

	immediate = {
		random_eldership_title = {
			limit = {
				ROOT = {
					has_elector_stance = {
						stance = elder_pleased
						title = PREV
					}
				}

				holder_scope = {
					is_liege_of = ROOT
					NOT = { has_character_modifier = elder_demand_cooldown }
				}
			}

			holder_scope = {
				character_event = { id = HFP.24015 }
			}
		}
	}
}

# Ruler informed that Elder feels lonely
character_event = {
	id = HFP.24015
	desc = EVTDESCAHFP24015
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			NOR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes
	hide_new = yes

	immediate = {
		random_courtier = {
			limit = {
				is_opposite_sex = FROM
				is_adult = yes
				is_ruler = no
				is_married = no
				is_betrothed = no
				is_consort = no
				is_incapable = no
				is_ill = no

				NOR = {
					is_lover = ROOT
					character = ROOT
					character = FROM
					is_heir = ROOT
					is_close_relative = FROM
				}
			}

			preferred_limit = {
				is_attractive_trigger = yes
				practical_age < 35
			}

			preferred_limit = {
				practical_age < 35
			}

			save_event_target_as = scoped_suitor
		}

		add_character_modifier = {
			name = elder_demand_cooldown
			years = 5
			hidden = yes
		}
	}

	# Spend time with him (malus to Stewardship)
	# Give companion
	# Send a present (money)
	# Refuse

	option = { # Give attention
		name = EVTOPTAHFP24015

		add_character_modifier = {
			name = elder_care_modifier
			years = 5
		}

		reverse_opinion = {
			name = opinion_elder_fulfilled_demand
			who = FROM
			years = 10
		}

		custom_tooltip = {
			text = tooltip_other_elders_pleased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_pleased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 35 }
	}

	option = { # Give spouse
		name = EVTOPTBHFP24015

		trigger = {
			event_target:scoped_suitor = { always = yes }
		}

		FROM = { # TODO: Change marriage type depending on FROM's sex and/or religion features (patr/matr)?
			show_scope_change = no

			add_spouse = event_target:scoped_suitor
		}

		reverse_opinion = {
			name = opinion_elder_fulfilled_demand
			who = FROM
			years = 10
		}

		custom_tooltip = {
			text = tooltip_other_elders_pleased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_pleased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 35 }
	}

	option = { # Give money
		name = EVTOPTCHFP24015

		transfer_scaled_wealth = {
			to = FROM
			value = 0.5
			min = 10
			max = 100
		}

		reverse_opinion = {
			name = opinion_elder_fulfilled_demand
			who = FROM
			years = 10
		}

		custom_tooltip = {
			text = tooltip_other_elders_pleased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_pleased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = { factor = 35 }
	}

	option = { # Refuse
		name = EVTOPTDHFP24015

		reverse_opinion = {
			name = opinion_elder_refused_demand
			who = FROM
			years = 10
		}

		custom_tooltip = {
			text = tooltip_other_elders_displeased

			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					limit = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_elders_displeased
						who = ROOT
						years = 10
					}
				}
			}
		}

		ai_chance = {
			factor = 45

			mult_modifier = {
				factor = 0.5
				trait = trusting
			}
		}
	}
}

# on_decade_pulse: Displeased Elder fabricates a claim on the title he is displeased about
character_event = {
	id = HFP.24016

	is_triggered_only = yes # on_decade_pulse, random_events
	hide_window = yes

	min_age = 30
	only_capable = yes
	prisoner = no

	trigger = {
		any_eldership_title = {
			ROOT = {
				has_elector_stance = {
					stance = elder_displeased
					title = PREV
				}
			}

			holder_scope = {
				any_realm_character = { # Potential recipient for claim must exist
					is_adult = yes
					is_incapable = no
					is_ill = no

					NOR = {
						has_claim = PREVPREV
						is_heir = PREV
						character = ROOT
						is_rival = ROOT
						character = PREV
					}
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.5
			ai = no
		}

		mult_modifier = {
			factor = 2
			age >= 40
		}

		mult_modifier = {
			factor = 2
			age >= 50
		}

		mult_modifier = {
			factor = 2
			age >= 60
		}

		mult_modifier = {
			factor = 2
			learning >= 8
		}

		mult_modifier = {
			factor = 2
			learning >= 10
		}

		mult_modifier = {
			factor = 2
			learning >= 12
		}

		mult_modifier = {
			factor = 2
			learning >= 14
		}

		mult_modifier = {
			factor = 2
			learning >= 16
		}

		mult_modifier = {
			factor = 2
			learning >= 18
		}

		mult_modifier = {
			factor = 2
			learning >= 20
		}

		mult_modifier = {
			factor = 2
			intrigue >= 8
		}

		mult_modifier = {
			factor = 2
			intrigue >= 10
		}

		mult_modifier = {
			factor = 2
			intrigue >= 12
		}

		mult_modifier = {
			factor = 2
			intrigue >= 14
		}

		mult_modifier = {
			factor = 2
			intrigue >= 16
		}

		mult_modifier = {
			factor = 2
			intrigue >= 18
		}

		mult_modifier = {
			factor = 2
			intrigue >= 20
		}

		mult_modifier = {
			factor = 2
			prestige >= 100
		}

		mult_modifier = {
			factor = 2
			prestige >= 250
		}

		mult_modifier = {
			factor = 3
			prestige >= 500
		}

		mult_modifier = {
			factor = 5
			prestige >= 750
		}

		mult_modifier = {
			factor = 10
			prestige >= 1000
		}

		mult_modifier = {
			factor = 0.5
			trait = content
		}

		mult_modifier = {
			factor = 2
			trait = stubborn
		}
	}

	immediate = {
		random_eldership_title = {
			limit = {
				ROOT = {
					has_elector_stance = {
						stance = elder_displeased
						title = PREV
					}
				}

				holder_scope = {
					any_realm_character = { # Potential recipient for claim must exist
						is_adult = yes
						is_incapable = no
						is_ill = no

						NOR = {
							has_claim = PREVPREV
							is_heir = PREV
							character = ROOT
							is_rival = ROOT
							character = PREV
						}
					}
				}
			}

			save_event_target_as = scoped_claim_title

			holder_scope = {
				save_event_target_as = scoped_ruler

				random_realm_character = {
					limit = {
						is_adult = yes
						is_incapable = no
						is_ill = no

						NOR = {
							has_claim = PREVPREV
							is_heir = event_target:scoped_ruler
							character = ROOT
							is_rival = ROOT
							character = event_target:scoped_ruler
						}
					}

					preferred_limit = {
						is_rival = event_target:scoped_ruler
						trait = ambitious
						is_landed = yes
						higher_real_tier_than = COUNT
						is_republic = no

						reverse_opinion = {
							who = ROOT
							value >= 20
						}
					}

					preferred_limit = {
						is_rival = event_target:scoped_ruler
						trait = ambitious
						is_landed = yes
						higher_real_tier_than = COUNT
						is_republic = no
					}

					preferred_limit = {
						is_rival = event_target:scoped_ruler
						trait = ambitious
						is_landed = yes
						higher_real_tier_than = BARON
						is_republic = no

						reverse_opinion = {
							who = ROOT
							value >= 20
						}
					}

					preferred_limit = {
						is_rival = event_target:scoped_ruler
						trait = ambitious
						is_landed = yes
						higher_real_tier_than = BARON
						is_republic = no
					}

					preferred_limit = {
						is_rival = event_target:scoped_ruler
						trait = ambitious
						trait = adventurer
					}

					preferred_limit = {
						is_rival = event_target:scoped_ruler
						trait = ambitious
						is_ruler = no
					}

					preferred_limit = {
						OR = {
							trait = ambitious
							is_rival = event_target:scoped_ruler
						}

						is_landed = yes
						is_republic = no

						reverse_opinion = {
							who = ROOT
							value >= 20
						}
					}

					preferred_limit = {
						OR = {
							trait = ambitious
							is_rival = event_target:scoped_ruler
						}

						is_landed = yes
						is_republic = no
					}

					preferred_limit = {
						OR = {
							is_landed = yes
							trait = ambitious
							is_rival = event_target:scoped_ruler
						}
					}

					character_event = { id = HFP.24017 }
				}
			}
		}
	}
}

# Claimant notified
character_event = {
	id = HFP.24017
	desc = EVTDESCHFP24017
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP24017

		tiered_prestige_reward_effect = yes
		add_claim = event_target:scoped_claim_title

		event_target:scoped_ruler = {
			character_event = { id = HFP.24018 }
		}
	}
}

# Ruler notified
character_event = {
	id = HFP.24018
	desc = EVTDESCHFP24018
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP24018

		opinion = {
			name = opinion_elder_traitor
			who = FROMFROM
			years = 5
		}
	}
}

# on_death: if one Elder is killed by a ruler without a reason will upset all other elders
character_event = {
	id = HFP.24019

	is_triggered_only = yes # on_death
	hide_window = yes

	trigger = {
		OR = {
			death_execution_trigger = yes
			death_murder_known_trigger = yes
		}

		killer = {
			root_has_execution_reason_opinion_trigger = no

			any_demesne_title = {
				has_law = succ_eldership

				any_elector_character = {
					character = ROOT
				}
			}
		}
	}

	immediate = {
		killer = {
			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					opinion = {
						name = elder_murderer
						who = PREVPREV
						years = 20
					}
				}
			}
		}
	}
}

# on_decade_pulse: Ecstatic Elder praises ruler
character_event = {
	id = HFP.24020

	is_triggered_only = yes # on_decade_pulse, random_events
	hide_window = yes

	min_age = 40
	only_capable = yes
	prisoner = no

	trigger = {
		any_eldership_title = {
			ROOT = {
				has_elector_stance = {
					stance = elder_ecstatic
					title = PREV
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.5
			ai = no
		}

		mult_modifier = {
			factor = 2
			age >= 50
		}

		mult_modifier = {
			factor = 2
			age >= 60
		}

		mult_modifier = {
			factor = 2
			learning >= 8
		}

		mult_modifier = {
			factor = 2
			learning >= 10
		}

		mult_modifier = {
			factor = 2
			learning >= 12
		}

		mult_modifier = {
			factor = 2
			learning >= 14
		}

		mult_modifier = {
			factor = 2
			learning >= 16
		}

		mult_modifier = {
			factor = 2
			learning >= 18
		}

		mult_modifier = {
			factor = 2
			learning >= 20
		}

		mult_modifier = {
			factor = 2
			diplomacy >= 8
		}

		mult_modifier = {
			factor = 2
			diplomacy >= 10
		}

		mult_modifier = {
			factor = 2
			diplomacy >= 12
		}

		mult_modifier = {
			factor = 2
			diplomacy >= 14
		}

		mult_modifier = {
			factor = 2
			diplomacy >= 16
		}

		mult_modifier = {
			factor = 2
			diplomacy >= 18
		}

		mult_modifier = {
			factor = 2
			diplomacy >= 20
		}

		mult_modifier = {
			factor = 2
			prestige >= 100
		}

		mult_modifier = {
			factor = 2
			prestige >= 250
		}

		mult_modifier = {
			factor = 3
			prestige >= 500
		}

		mult_modifier = {
			factor = 5
			prestige >= 750
		}

		mult_modifier = {
			factor = 10
			prestige >= 1000
		}

		mult_modifier = {
			factor = 2
			trait = stubborn
		}
	}

	immediate = {
		random_eldership_title = {
			limit = {
				ROOT = {
					has_elector_stance = {
						stance = elder_ecstatic
						title = PREV
					}
				}
			}

			holder_scope = {
				character_event = { id = HFP.24021 }
			}
		}
	}
}

# Ruler notified
character_event = {
	id = HFP.24021
	desc = EVTDESCHFP24021
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAHFP24021

		if = {
			limit = { FROM = { learning < 8 } }

			prestige = 25

			add_character_modifier = {
				name = elder_praise_modifier
				years = 1
			}
		}
		else_if = {
			limit = { FROM = { learning < 10 } }

			prestige = 50

			add_character_modifier = {
				name = elder_praise_modifier
				years = 2
			}
		}
		else_if = {
			limit = { FROM = { learning < 12 } }

			prestige = 100

			add_character_modifier = {
				name = elder_praise_modifier
				years = 3
			}
		}
		else_if = {
			limit = { FROM = { learning < 14 } }

			prestige = 150

			add_character_modifier = {
				name = elder_praise_modifier
				years = 4
			}
		}
		else_if = {
			limit = { FROM = { learning < 16 } }

			prestige = 200

			add_character_modifier = {
				name = elder_praise_modifier
				years = 5
			}
		}
		else_if = {
			limit = { FROM = { learning < 18 } }

			prestige = 250

			add_character_modifier = {
				name = elder_praise_modifier
				years = 6
			}
		}
		else_if = {
			limit = { FROM = { learning < 20 } }

			prestige = 300

			add_character_modifier = {
				name = elder_praise_modifier
				years = 7
			}
		}
		else = {
			prestige = 350

			add_character_modifier = {
				name = elder_praise_modifier
				years = 8
			}
		}
	}
}


# on_decade_pulse: Ecstatic Elder mentors ruler
character_event = {
	id = HFP.24022

	is_triggered_only = yes # on_decade_pulse, random_events
	hide_window = yes

	min_age = 40
	only_capable = yes
	prisoner = no

	trigger = {
		stewardship >= 10
		learning >= 10
		is_dumb_trigger = no

		any_eldership_title = {
			ROOT = {
				has_elector_stance = {
					stance = elder_ecstatic
					title = PREV
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.5
			ai = no
		}

		mult_modifier = {
			factor = 2
			age >= 50
		}

		mult_modifier = {
			factor = 2
			age >= 60
		}

		mult_modifier = {
			factor = 2
			learning >= 12
		}

		mult_modifier = {
			factor = 2
			learning >= 14
		}

		mult_modifier = {
			factor = 2
			learning >= 16
		}

		mult_modifier = {
			factor = 2
			learning >= 18
		}

		mult_modifier = {
			factor = 2
			learning >= 20
		}

		mult_modifier = {
			factor = 2
			stewardship >= 12
		}

		mult_modifier = {
			factor = 2
			stewardship >= 14
		}

		mult_modifier = {
			factor = 2
			stewardship >= 16
		}

		mult_modifier = {
			factor = 2
			stewardship >= 18
		}

		mult_modifier = {
			factor = 2
			stewardship >= 20
		}

		mult_modifier = {
			factor = 2
			prestige >= 100
		}

		mult_modifier = {
			factor = 2
			prestige >= 250
		}

		mult_modifier = {
			factor = 3
			prestige >= 500
		}

		mult_modifier = {
			factor = 5
			prestige >= 750
		}

		mult_modifier = {
			factor = 10
			prestige >= 1000
		}

		mult_modifier = {
			factor = 2
			trait = stubborn
		}
	}

	immediate = {
		random_eldership_title = {
			limit = {
				ROOT = {
					has_elector_stance = {
						stance = elder_ecstatic
						title = PREV
					}
				}
			}

			holder_scope = {
				character_event = { id = HFP.24023 }
			}
		}
	}
}

# Ruler receives ancient wisdom
character_event = {
	id = HFP.24023
	desc = EVTDESCHFP24023
	border = GFX_event_normal_frame_diplomacy

	picture = {
		picture = GFX_evt_elder_council
		trigger = {
			religion_openly_west_african_or_reformed_trigger = no
			capital_scope = { NOT = { region = world_africa } }
		}
	}
	picture = {
		picture = GFX_evt_west_african_ruler
		trigger = {
			OR = {
				capital_scope = { region = world_africa }
				religion_openly_west_african_or_reformed_trigger = yes
			}
		}
	}

	is_triggered_only = yes

	option = { # Tech
		name = EVTOPTAHFP24023

		culture_techpoints = 25
	}

	option = { # Stewardship
		name = EVTOPTBHFP24023

		random = {
			chance = 25

			mult_modifier = {
				factor = 1.5
				FROM = { stewardship >= 12 }
			}

			mult_modifier = {
				factor = 1.5
				FROM = { stewardship >= 16 }
			}

			mult_modifier = {
				factor = 1.5
				FROM = { stewardship >= 20 }
			}

			mult_modifier = {
				factor = 1.5
				FROM = { stewardship >= 25 }
			}

			change_stewardship = 1
		}
	}

	option = { # Learning
		name = EVTOPTCHFP24023

		random = {
			chance = 40

			mult_modifier = {
				factor = 1.5
				FROM = { learning >= 12 }
			}

			mult_modifier = {
				factor = 1.5
				FROM = { learning >= 16 }
			}

			mult_modifier = {
				factor = 1.5
				FROM = { learning >= 20 }
			}

			mult_modifier = {
				factor = 1.5
				FROM = { learning >= 25 }
			}

			change_learning = 1
		}
	}
}

# on_imprisoned: If one Elder is imprisoned by a ruler without a reason it will upset all other Elders
# ROOT is prisoner
# FROM is imprisoner
character_event = {
	id = HFP.24024

	is_triggered_only = yes # on_become_imprisoned_any_reason
	hide_window = yes

	trigger = {
		any_eldership_title = {
			holder_scope = {
				character = FROM # Ruler is the jailer
				root_has_imprisonment_reason_opinion_trigger = no
			}
		}
	}

	immediate = {
		FROM = {
			any_demesne_title = {
				limit = { has_law = succ_eldership }

				any_elector_character = {
					opinion = {
						who = PREVPREV # FROM
						name = disrespectful_youngster
						years = 20
					}
				}
			}
		}
	}
}

# on_startup: On new playthrough, set all Baltic and African tribal rulers and custom religions with ancestor worship (and tribalism) to use Eldership.
character_event = {
	id = HFP.24025

	is_triggered_only = yes # on_startup
	hide_window = yes

	only_rulers = yes
	has_dlc = "Holy Fury"

	trigger = {
		is_tribal = yes # Can be used by feudals, but only tribals should start with it
		is_save_game = no
		is_landed = yes

		any_demesne_title = {
			title = succ_law_title
			is_law_potential = succ_eldership

			# Don't overrule this, though
			trigger_if = {
				limit = {
					has_alternate_start_setting = {
						setting = shattered_succession
						option = all_primogeniture
					}
				}

				NOT = { is_law_potential = succ_primogeniture }
			}
			trigger_else_if = {
				limit = {
					has_alternate_start_setting = {
						setting = shattered_succession
						option = all_gavelkind
					}
				}

				NOT = { is_law_potential = succ_gavelkind }
			}
			trigger_else_if = {
				limit = {
					has_alternate_start_setting = {
						setting = shattered_succession
						option = all_elective_gavelkind
					}
				}

				NOT = { is_law_potential = succ_elective_gavelkind }
			}
			trigger_else_if = {
				limit = {
					has_alternate_start_setting = {
						setting = shattered_succession
						option = all_elective
					}
				}

				NOT = { is_law_potential = succ_feudal_elective }
			}
			trigger_else_if = {
				limit = {
					has_alternate_start_setting = {
						setting = shattered_succession
						option = all_seniority
					}
				}

				NOT = { is_law_potential = succ_seniority }
			}
			trigger_else_if = {
				limit = {
					has_alternate_start_setting = {
						setting = shattered_succession
						option = all_ultimogeniture
					}
				}

				NOT = { is_law_potential = succ_ultimogeniture }
			}
			trigger_else_if = {
				limit = {
					has_alternate_start_setting = {
						setting = shattered_succession
						option = all_tanistry
					}
				}

				NOT = { is_law_potential = succ_tanistry }
			}
			# CleanSlate additions, uncomment to enable. Also uncomment sections in HF.2 and 00_settings.txt
		#	trigger_else_if = {
		#		limit = {
		#			has_alternate_start_setting = {
		#				setting = shattered_succession
		#				option = all_eldership
		#			}
		#		}
		#
		#		NOT = { is_law_potential = succ_eldership }
		#	}
		#	trigger_else_if = {
		#		limit = {
		#			has_alternate_start_setting = {
		#				setting = shattered_succession
		#				option = all_open
		#			}
		#		}
		#
		#		NOT = { is_law_potential = succ_turkish_succession }
		#	}
		}
	}

	immediate = {
		any_demesne_title = { # First apply law
			limit = {
				title = succ_law_title
				is_law_potential = succ_eldership

				trigger_if = {
					limit = {
						has_alternate_start_setting = {
							setting = shattered_succession
							option = all_primogeniture
						}
					}

					NOT = { is_law_potential = succ_primogeniture }
				}
				trigger_else_if = {
					limit = {
						has_alternate_start_setting = {
							setting = shattered_succession
							option = all_gavelkind
						}
					}

					NOT = { is_law_potential = succ_gavelkind }
				}
				trigger_else_if = {
					limit = {
						has_alternate_start_setting = {
							setting = shattered_succession
							option = all_elective_gavelkind
						}
					}

					NOT = { is_law_potential = succ_elective_gavelkind }
				}
				trigger_else_if = {
					limit = {
						has_alternate_start_setting = {
							setting = shattered_succession
							option = all_elective
						}
					}

					NOT = { is_law_potential = succ_feudal_elective }
				}
				trigger_else_if = {
					limit = {
						has_alternate_start_setting = {
							setting = shattered_succession
							option = all_seniority
						}
					}

					NOT = { is_law_potential = succ_seniority }
				}
				trigger_else_if = {
					limit = {
						has_alternate_start_setting = {
							setting = shattered_succession
							option = all_ultimogeniture
						}
					}

					NOT = { is_law_potential = succ_ultimogeniture }
				}
				trigger_else_if = {
					limit = {
						has_alternate_start_setting = {
							setting = shattered_succession
							option = all_tanistry
						}
					}

					NOT = { is_law_potential = succ_tanistry }
				}
				# CleanSlate additions, uncomment to enable. Also uncomment sections in HF.2 and 00_settings.txt
			#	trigger_else_if = {
			#		limit = {
			#			has_alternate_start_setting = {
			#				setting = shattered_succession
			#				option = all_eldership
			#			}
			#		}
			#
			#		NOT = { is_law_potential = succ_eldership }
			#	}
			#	trigger_else_if = {
			#		limit = {
			#			has_alternate_start_setting = {
			#				setting = shattered_succession
			#				option = all_open
			#			}
			#		}
			#
			#		NOT = { is_law_potential = succ_turkish_succession }
			#	}
			}

			add_law = {
				law = succ_eldership
				cooldown = no
				opinion_effect = no
			}
		}

		# Then create grumpy Elder characters, so you are not without electors on start
		while = {
			count = 6
			spawn_elder_effect = yes
		}
	}
}