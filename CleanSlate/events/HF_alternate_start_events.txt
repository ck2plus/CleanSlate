namespace = HF

# Spawn Great Conquerors in Shattered Worlds
character_event = {
	id = HF.1

	is_triggered_only = yes # on_startup
	hide_window = yes

	only_playable = yes

	trigger = {
		is_save_game = no
		is_shattered_world = yes
		owns = event_target:pulse_province

		NOR = {
			has_alternate_start_setting = {
				setting = shattered_conquerors
				option = off
			}
		}
	}

	immediate = {
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_conquerors
					option = on_few
				}
			}

			while = {
				count = 4
				shattered_conqueror_spawn_effect = yes
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_conquerors
					option = on_normal
				}
			}

			while = {
				count = 8
				shattered_conqueror_spawn_effect = yes
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_conquerors
					option = on_many
				}
			}

			while = {
				count = 12
				shattered_conqueror_spawn_effect = yes
			}
		}
	}
}

# Succession Laws in shattered worlds
character_event = {
	id = HF.2

	is_triggered_only = yes # on_startup
	hide_window = yes

	only_playable = yes

	trigger = {
		is_save_game = no
		is_shattered_world = yes
		is_landed = yes

		NOT = {
			has_alternate_start_setting = {
				setting = shattered_succession
				option = default_laws
			}
		}
	}

	immediate = {
		if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_primogeniture
				}
			}

			any_demesne_title = {
				limit = {
					title = succ_law_title
					is_law_potential = succ_primogeniture
				}

				add_law = {
					law = succ_primogeniture
					cooldown = no
					opinion_effect = no
				}
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_gavelkind
				}
			}

			any_demesne_title = {
				limit = {
					title = succ_law_title
					is_law_potential = succ_gavelkind
				}

				add_law = {
					law = succ_gavelkind
					cooldown = no
					opinion_effect = no
				}
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_elective_gavelkind
				}
			}

			any_demesne_title = {
				limit = {
					title = succ_law_title
					is_law_potential = succ_elective_gavelkind
				}

				add_law = {
					law = succ_elective_gavelkind
					cooldown = no
					opinion_effect = no
				}
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_elective
				}
			}

			any_demesne_title = {
				limit = {
					title = succ_law_title
					is_law_potential = succ_feudal_elective
				}

				add_law = {
					law = succ_feudal_elective
					cooldown = no
					opinion_effect = no
				}
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_seniority
				}
			}

			any_demesne_title = {
				limit = {
					title = succ_law_title
					is_law_potential = succ_seniority
				}

				add_law = {
					law = succ_seniority
					cooldown = no
					opinion_effect = no
				}
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_ultimogeniture
				}
			}

			any_demesne_title = {
				limit = {
					title = succ_law_title
					is_law_potential = succ_ultimogeniture
				}

				add_law = {
					law = succ_ultimogeniture
					cooldown = no
					opinion_effect = no
				}
			}
		}
		else_if = {
			limit = {
				has_alternate_start_setting = {
					setting = shattered_succession
					option = all_tanistry
				}
			}

			any_demesne_title = {
				limit = {
					title = succ_law_title
					is_law_potential = succ_tanistry
				}

				add_law = {
					law = succ_tanistry
					cooldown = no
					opinion_effect = no
				}
			}
		}
		# CleanSlate additions, uncomment to enable. Also uncomment sections in HFP.24025 and 00_settings.txt
	#	else_if = {
	#		limit = {
	#			has_alternate_start_setting = {
	#				setting = shattered_succession
	#				option = all_eldership
	#			}
	#		}
	#
	#		any_demesne_title = {
	#			limit = {
	#				title = succ_law_title
	#				is_law_potential = succ_eldership
	#			}
	#
	#			add_law = {
	#				law = succ_eldership
	#				cooldown = no
	#				opinion_effect = no
	#			}
	#		}
	#
	#		# Then create grumpy Elder characters, so you are not without electors on start
	#		while = {
	#			count = 6
	#			spawn_elder_effect = yes
	#		}
	#	}
	#	else_if = {
	#		limit = {
	#			has_alternate_start_setting = {
	#				setting = shattered_succession
	#				option = all_open
	#			}
	#		}
	#
	#		any_demesne_title = {
	#			limit = {
	#				title = succ_law_title
	#				is_law_potential = succ_turkish_succession
	#			}
	#
	#			add_law = {
	#				law = succ_turkish_succession
	#				cooldown = no
	#				opinion_effect = no
	#			}
	#		}
	#	}
	}
}

# Activate GHW's and holy orders when running randomized rel names
narrative_event = {
	id = HF.3
	title = HF_3_TIT
	desc = HF_3_DESC
	picture = GFX_evt_crusaders
	border = GFX_event_narrative_frame_religion

	is_triggered_only = yes # on_yearly_pulse
	major = yes
	hide_new = yes

	only_playable = yes
	ai = yes

	trigger = {
		controls_religion = yes
		is_alternate_start = yes
		year >= 1100

		has_alternate_start_parameter = {
			key = religion_names
			value = random
		}

		NOT = { has_global_flag = ghw_activated }

		any_independent_ruler = {
			count = 5

			higher_real_tier_than = DUKE
			is_landed = yes
		}
	}

	immediate = {
		set_global_flag = ghw_activated
		set_global_flag = christian_crusades_unlocked
		set_global_flag = muslim_jihads_unlocked
		set_global_flag = pagan_ghws_unlocked

		activate_title = {
			title = d_haruriyyah
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = ibadi
			culture = persian
			female = no
			age = 25
			health = 6
			fertility = 0.5
			add_trait = brilliant_strategist
			add_trait = sayyid
			add_trait = hajjaj
			add_trait = hafiz
			add_trait = patient
			add_trait = zealous
			add_trait = scholar
			add_trait = temperate

			attributes = {
				martial = 10
				diplomacy = 9
				stewardship = 9
				intrigue = 7
				learning = 9
			}
		}

		new_character = {
			wealth = 500
			grant_title = d_haruriyyah
			set_government_type = order_government
		}

		set_global_flag = assassins_founded

		activate_title = {
			title = d_fedayeen
			status = yes
		}

		create_character = {
			random_traits = no
			name = "Hassan"
			dynasty = random
			religion = shiite
			culture = persian
			female = no
			age = 40
			health = 6
			fertility = 0.8
			add_trait = elusive_shadow
			add_trait = patient
			add_trait = zealous
			add_trait = scholar
			add_trait = chaste
			add_trait = temperate
			flag = hassan_the_assassin

			attributes = {
				martial = 6
				diplomacy = 8
				stewardship = 9
				intrigue = 12
				learning = 12
			}
		}

		new_character = {
			wealth = 500
			grant_title = d_fedayeen
			set_government_type = order_government
		}

		activate_title = {
			title = d_followers_arjuna
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = hindu
			culture = hindustani
			female = no
			age = 33
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
			add_trait = kshatriya
		}

		new_character = {
			wealth = 500
			grant_title = d_followers_arjuna
			set_government_type = order_government
		}

		activate_title = {
			title = d_ashokas_chosen
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = buddhist
			culture = marathi
			female = no
			age = 33
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
			add_trait = kshatriya
		}

		new_character = {
			wealth = 500
			grant_title = d_ashokas_chosen
			set_government_type = order_government
		}

		activate_title = {
			title = d_bulls_rishabha
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = jain
			culture = kannada
			female = no
			age = 33
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
			add_trait = kshatriya
		}

		new_character = {
			wealth = 500
			grant_title = d_bulls_rishabha
			set_government_type = order_government
		}

		activate_title = {
			title = d_knights_hospitaller
			status = yes
		}

		create_random_soldier = {
			dynasty = none
			random_traits = yes
			religion = catholic
		}

		new_character = {
			wealth = 500
			grant_title = d_knights_hospitaller
			set_government_type = order_government
		}

		activate_title = {
			title = d_knights_templar
			status = yes
		}

		create_random_soldier = {
			dynasty = none
			random_traits = yes
			religion = catholic
		}

		new_character = {
			wealth = 500
			grant_title = d_knights_templar
			set_government_type = order_government
		}

		activate_title = {
			title = d_teutonic_order
			status = yes
		}

		create_random_soldier = {
			dynasty = none
			random_traits = yes
			religion = catholic
		}

		new_character = {
			wealth = 500
			grant_title = d_teutonic_order
			set_government_type = order_government
		}

		activate_title = {
			title = d_saint_anthony
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = miaphysite
			culture = ethiopian
			female = no
			age = 31
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
		}

		new_character = {
			wealth = 500
			grant_title = d_saint_anthony
			set_government_type = order_government
		}

		activate_title = {
			title = d_saint_addai
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = nestorian
			culture = assyrian
			female = no
			age = 31
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
		}

		new_character = {
			wealth = 500
			grant_title = d_saint_addai
			set_government_type = order_government
		}

		activate_title = {
			title = d_bektashi
			status = yes
		}

		create_character = {
			random_traits = no
			name = Bektash
			dynasty = random
			religion = sunni
			culture = persian
			female = no
			age = 25
			health = 6
			fertility = 0.5
			add_trait = brilliant_strategist
			add_trait = sayyid
			add_trait = hajjaj
			add_trait = hafiz
			add_trait = patient
			add_trait = zealous
			add_trait = scholar
			add_trait = temperate

			attributes = {
				martial = 10
				diplomacy = 9
				stewardship = 9
				intrigue = 7
				learning = 9
			}
		}

		new_character = {
			wealth = 500
			grant_title = d_bektashi
			set_government_type = order_government
		}

		activate_title = {
			title = d_holy_sepulchre
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = orthodox
			culture = greek
			female = no
			age = 31
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
		}

		new_character = {
			wealth = 500
			grant_title = d_holy_sepulchre
			set_government_type = order_government
		}

		activate_title = {
			title = d_immortals
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = zoroastrian
			culture = persian
			female = no
			age = 27
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
		}

		new_character = {
			wealth = 500
			grant_title = d_immortals
			set_government_type = order_government
		}

		activate_title = {
			title = d_zealots
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = jewish
			culture = ashkenazi
			female = no
			age = 29
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
		}

		new_character = {
			wealth = 500
			grant_title = d_zealots
			set_government_type = order_government
		}

		activate_title = {
			title = d_knights_santiago
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = catholic
			culture = castilian
			female = no
			age = 31
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
		}

		new_character = {
			wealth = 500
			grant_title = d_knights_santiago
			set_government_type = order_government
		}

		activate_title = {
			title = d_knights_calatrava
			status = yes
		}

		create_character = {
			random_traits = no
			dynasty = random
			religion = catholic
			culture = castilian
			female = no
			age = 31
			add_trait = brilliant_strategist
			add_trait = zealous
			add_trait = humble
			add_trait = ambitious
			add_trait = strategist
			add_trait = holy_warrior
		}

		new_character = {
			wealth = 500
			grant_title = d_knights_calatrava
			set_government_type = order_government
		}

		set_global_flag = army_light_founded

		activate_title = {
			title = d_army_light
			status = yes
		}

		create_character = {
			random_traits = yes
			religion = manichaean
			culture = persian
			dynasty = none
			female = no
			age = 34
			add_trait = skilled_tactician
		}

		new_character = {
			wealth = 500
			grant_title = d_army_light
			set_government_type = order_government
		}
	}

	option = {
		name = INTERESTING

		custom_tooltip = { text = HF_3_TOOLTIP }
	}
}

# Alternate Start general maintenance
character_event = {
	id = HF.5

	is_triggered_only = yes # on_startup
	hide_window = yes

	only_playable = yes

	trigger = {
		owns = event_target:pulse_province
		is_save_game = no
		is_alternate_start = yes
	}

	immediate = {
		# CleanSlate: Defaults to feudal for some reason
		e_china_west_governor = {
			holder_scope = {
				set_government_type = confucian_bureaucracy
			}
		}

		if = {
			limit = {
				has_alternate_start_parameter = {
					key = culture_names
					value = random
				}
			}

			any_mercenary_band = {
				if = {
					limit = {
						OR = { # CleanSlate: Special mercs are disabled
							title = d_papal_guards
							title = d_scholae_palatinae
						}
					}

					activate_title = {
						title = THIS
						status = no
					}
				}
				else = {
					set_random_coa_effect = yes
					set_short_name = yes
					holder_scope = { save_event_target_as = renaming_target }

					if = {
						limit = {
							OR = {
								title = d_abyssinian_band
								title = d_african_large
								title = d_african_low
								title = d_african_mid_low_1
								title = d_african_mid_low_2
								title = d_alan_band
								title = d_bengal_band
								title = d_bodpa_low
								title = d_breton_band
								title = d_bulgarian_band
								title = d_catalan_band
								title = d_cuman_band
								title = d_finnish_band
								title = d_ghanan_band
								title = d_irish_band
								title = d_jurchen_band
								title = d_lithuanian_band
								title = d_lombard_band
								title = d_marathi_band
								title = d_nubian_band
								title = d_outlaws_of_the_marsh
								title = d_pecheneg_band
								title = d_rajput_band
								title = d_rus_band
								title = d_sami_band
								title = d_sardinian_band
								title = d_saxon_band
								title = d_scottish_band
								title = d_swiss_band
								title = d_tamil_band
								title = d_tangut_low
								title = d_turkic_band
							}
						}

						set_name = ALT_MERC_BAND
						adjective = ALT_MERC_BAND_ADJ
					}
					else_if = {
						limit = {
							OR = {
								title = d_breton_company
								title = d_bulgarian_company
								title = d_catalan_company
								title = d_cuman_company
								title = d_navarrese_company
								title = d_pecheneg_company
								title = d_rus_company
								title = d_sardinian_company
								title = d_shiite_bedouin_company
								title = d_shiite_berber_company
								title = d_shiite_cuman_company
								title = d_shiite_turkic_company
								title = d_sunni_bedouin_company
								title = d_sunni_berber_company
								title = d_sunni_cuman_company
								title = d_sunni_turkic_company
								title = d_swiss_company
							}
						}

						set_name = ALT_MERC_COMPANY
						adjective = ALT_MERC_COMPANY_ADJ
					}
					else_if = {
						limit = {
							OR = {
								title = d_african_massive
								title = d_bengal_company
								title = d_company_of_st_george
								title = d_great_company
								title = d_little_hat_company
								title = d_marathi_company
								title = d_rajput_company
								title = d_rose_company
								title = d_star_company
								title = d_white_company
							}
						}

						set_name = ALT_MERC_COMPANY_ALT
						adjective = ALT_MERC_COMPANY_ALT_ADJ
					}
					else_if = {
						limit = {
							OR = {
								title = d_african_mid
								title = d_ghilman
								title = d_mamluks
								title = d_persian_caravan_guards
								title = d_silk_road_sentinels
								title = d_turkic_company
								title = d_turkic_guard
								title = d_varangian_guard
								title = d_victual_brothers
							}
						}

						set_name = ALT_MERC_BROTHERS
						adjective = ALT_MERC_BROTHERS_ADJ
					}
					else_if = {
						limit = {
							OR = {
								title = d_frisian_navy
								title = d_genoese_navy
								title = d_han_junks
								title = d_hanseatic_navy
								title = d_jurchen_corsairs
								title = d_maghreb_corsairs
								title = d_venetian_navy
							}
						}

						set_name = ALT_MERC_NAVY
						adjective = ALT_MERC_NAVY_ADJ
					}

					# CleanSlate: These already have suitable alternate start names
					# d_african_tiny
					# d_han_large
					# d_han_low
					# d_han_massive
					# d_han_mid
					# d_han_mid_low
					# d_han_tiny_1
					# d_han_tiny_2
					# d_treasure_fleet
				}
			}
		}

		# Set appropriate CoAs for all rel head titles, randomise holy orders
		if = {
			limit = {
				has_alternate_start_parameter = {
					key = religion_names
					value = random
				}
			}

			any_title = {
				limit = {
					OR = {
						controls_religion = yes
						holy_order = yes
					}
				}

				log = "Renaming [This.GetID] - [This.GetFullBaseName]"
				set_random_coa_effect = yes
				set_short_name = yes

				if = {
					limit = { holy_order = yes }

					holder_scope = { save_event_target_as = renaming_target }
					set_name = ALT_HO_LOCATION
					adjective = ALT_HO_LOCATION_ADJ
				}
			}
		}

		any_title = {
			limit = { has_title_flag = used_for_coa }
			clr_title_flag = used_for_coa
		}

		# Being stranded on an island isn't fun regardless of setting
		any_province = {
			limit = {
				is_coastal = yes
				has_owner = yes
			}

			if = {
				limit = { TECH_NAVAL < 1 }

				change_tech = {
					technology = TECH_NAVAL
					value = 1
				}
			}

			any_province_holding = {
				if = {
					limit = {
						holding_type = castle
						NOT = { has_building = ca_shipyard_1 }
					}
					add_building = ca_shipyard_1
				}

				if = {
					limit = {
						holding_type = city
						NOT = { has_building = ct_shipyard_1 }
					}
					add_building = ct_shipyard_1
				}

				if = {
					limit = {
						holding_type = temple
						NOT = { has_building = tp_shipyard_1 }
					}
					add_building = tp_shipyard_1
				}

				if = {
					limit = {
						holding_type = tribal
						NOT = { has_building = tb_shipyard_1 }
					}
					add_building = tb_shipyard_1
				}

				if = {
					limit = {
						holding_type = nomad
						NOT = { has_building = no_harbor_1 }
					}
					add_building = no_harbor_1
				}

				if = {
					limit = {
						holding_type = nomad
						NOT = { has_building = no_fishing_village_1 }
					}
					add_building = no_fishing_village_1
				}
			}
		}

		# Chance for Agnatic-Cognatic
		any_playable_ruler = {
			limit = {
				is_landed = yes
				is_republic = no

				any_demesne_title = {
					title = succ_law_title
					has_law = agnatic_succession
					is_law_potential = cognatic_succession
				}

				NOR = {
					has_religion_feature = religion_patriarchal

					has_game_rule = {
						name = gender
						value = all
					}
				}
			}

			if = { # If female with no male kids, 100% chance
				limit = {
					is_female = yes
					NOT = {
						any_child = { is_female = no }
					}
				}

				any_demesne_title = {
					limit = {
						title = succ_law_title
						has_law = agnatic_succession
						is_law_potential = cognatic_succession
					}

					add_law = {
						law = cognatic_succession
						cooldown = no
						opinion_effect = no
					}
				}
			}
			else_if = {
				limit = {
					trigger_if = {
						limit = { is_female = yes }

						# If female with male kids, slightly lower chance
						any_child = { is_female = no }
					}
					trigger_else = {
						# Or if male with only female kids
						NOT = {
							any_child = { is_female = no }
						}
					}
				}

				random = {
					chance = 90

					any_demesne_title = {
						limit = {
							title = succ_law_title
							has_law = agnatic_succession
							is_law_potential = cognatic_succession
						}

						add_law = {
							law = cognatic_succession
							cooldown = no
							opinion_effect = no
						}
					}
				}
			}
			else_if = { # Otherwise slightly higher chance for females
				limit = { is_female = yes }

				random = {
					chance = 70

					any_demesne_title = {
						limit = {
							title = succ_law_title
							has_law = agnatic_succession
							is_law_potential = cognatic_succession
						}

						add_law = {
							law = cognatic_succession
							cooldown = no
							opinion_effect = no
						}
					}
				}
			}
			else = { # Else around 50%
				random = {
					chance = 50

					any_demesne_title = {
						limit = {
							title = succ_law_title
							has_law = agnatic_succession
							is_law_potential = cognatic_succession
						}

						add_law = {
							law = cognatic_succession
							cooldown = no
							opinion_effect = no
						}
					}
				}
			}

			recalc_succession = yes
		}

		# Fix castes
		any_independent_ruler = {
			any_realm_character = {
				limit = { religion = hindu }

				if = {
					limit = { is_feudal = yes }

					add_trait = kshatriya
					remove_trait = vaishya
					remove_trait = brahmin

					any_dynasty_member = {
						limit = { is_ruler = no }

						add_trait = kshatriya
						remove_trait = vaishya
						remove_trait = brahmin
					}
				}
				else_if = {
					limit = { is_republic = yes }

					remove_trait = kshatriya
					add_trait = vaishya
					remove_trait = brahmin

					any_dynasty_member = {
						limit = { is_ruler = no }

						remove_trait = kshatriya
						add_trait = vaishya
						remove_trait = brahmin
					}
				}
				else_if = {
					limit = { is_theocracy = yes }

					remove_trait = kshatriya
					remove_trait = vaishya
					add_trait = brahmin

					any_dynasty_member = {
						limit = { is_ruler = no }

						remove_trait = kshatriya
						remove_trait = vaishya
						add_trait = brahmin
					}
				}
				else_if = {
					limit = {
						is_ruler = no
						spouse = { is_ruler = yes }
					}
					if = {
						limit = {
							spouse = { is_feudal = yes }
						}

						add_trait = kshatriya
						remove_trait = vaishya
						remove_trait = brahmin
					}
					else_if = {
						limit = {
							spouse = { is_republic = yes }
						}

						remove_trait = kshatriya
						add_trait = vaishya
						remove_trait = brahmin
					}
					else_if = {
						limit = {
							spouse = { is_theocracy = yes }
						}

						remove_trait = kshatriya
						remove_trait = vaishya
						add_trait = brahmin
					}
				}
			}
		}
	}
}

# A hooded mystic visits your private chambers and tells you signs foreboded by your stars
character_event = {
	id = HF.6
	desc = EVTDESCHF6
	picture = GFX_evt_hooded_figure_hf

	is_triggered_only = yes # on_decade_pulse, random_events

	only_playable = yes

	trigger = {
		graphical_culture = horsegfx
		practical_age < 45
		is_adult = yes
		block_general_event_trigger = no

		NOR = {
			has_character_flag = horse_falling_star

			has_game_rule = {
				name = supernatural_events
				value = off
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.025
			ai = yes
		}
	}

	immediate = {
		set_character_flag = horse_falling_star
	}

	# Take a trip to the mountains - follow advice
	option = {
		name = EVTOPTAHF6

		character_event = {
			id = HF.7
			months = 3
			tooltip = EVTTOOLTIPAHF6
		}
	}

	# Guards! Arrest this mad intruder!
	option = {
		name = EVTOPTBHF6

		random = {
			chance = 20
			add_trait_paranoid_effect = yes
		}

		character_event = {
			id = HF.8
			months = 3
		}
	}
}

# Head out on a hike to the mountains without my entourage & witness a falling star fall in the nearby woods
character_event = {
	id = HF.7
	desc = EVTDESCHF7
	picture = GFX_evt_comet

	is_triggered_only = yes

	# Investigate alone
	option = {
		name = EVTOPTAHF7

		narrative_event = {
			id = HF.9
			months = 1
			tooltip = EVTTOOLTIPAHF7
		}
	}

	# Gather a search party - OUT
	option = {
		name = EVTOPTBHF7

		character_event = {
			id = HF.10
			months = 3
			tooltip = EVTTOOLTIPBHF7
		}
	}
}

# Can't stop thinking about the prophecy - follow the mystics advice anyway?
character_event = {
	id = HF.8
	desc = EVTDESCHF8
	picture = GFX_evt_whispers

	is_triggered_only = yes

	# Follow the advice
	option = {
		name = EVTOPTAHF8

		character_event = {
			id = HF.7
			months = 1
			tooltip = EVTTOOLTIPAHF8
		}
	}

	# It could be a trap! - OUT
	option = {
		name = EVTOPTBHF8

		custom_tooltip = { text = EVTTOOLTIPBHF8 }

		add_character_modifier = {
			name = cautious_decision_making
			years = 8
		}
	}
}

# Search the woods and come across a pond in a glade and next to it is a dead unicorn in a silver blood spot
narrative_event = {
	id = HF.9
	title = EVTTITLEHF9
	desc = EVTDESCHF9
	picture = GFX_evt_mysterious_forest

	is_triggered_only = yes

	# Give it a proper burial
	option = {
		name = EVTOPTAHF9

		character_event = {
			id = HF.11
			months = 1
		}

		piety = 111
	}

	# Drink the silver blood - become strong
	option = {
		name = EVTOPTBHF9

		if = {
			limit = {
				NOT = { trait = strong }
			}
			add_trait = strong
		}

		add_character_modifier = {
			name = argent_blood_vessels
			duration = -1
		}
	}

	# Remove the mane - gain artifact
	option = {
		name = EVTOPTCHF9

		add_artifact = sparkling_mane
	}

	# Cut the horn - WOOP WOOP portrait!
	option = {
		name = EVTOPTDHF9

		add_artifact = crown_unicorn_helmet
	}
}

# Search the woods with a party - find nothing
character_event = {
	id = HF.10
	desc = EVTDESCHF10
	picture = GFX_evt_rider_adventure

	is_triggered_only = yes

	# End of chain
	option = {
		name = EVTOPTAHF10

		add_trait_patient_effect = yes
	}
}

# Ever since I visited the glade with the unicorn I've felt like I have a radiating a faded light
character_event = {
	id = HF.11
	desc = EVTDESCHF11
	picture = GFX_evt_rider_adventure

	is_triggered_only = yes

	# Awesome
	option = {
		name = EVTOPTAHF11

		add_character_modifier = {
			name = unicorns_blessing
			duration = -1
		}
	}
}

# CleanSlate: added to implement born in the purple for alternate_byz
character_event = {
	id = HF.20

	is_triggered_only = yes # on_birth
	hide_window = yes

	trigger = {
		event_target:alternate_byz = {
			holder_scope = {
				is_parent_of = ROOT
			}
		}
	}

	immediate = {
		add_trait = born_in_the_purple
	}
}