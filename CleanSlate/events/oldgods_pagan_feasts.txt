###################################
#
# THE OLD GODS
# - Pagan Feasts
#
###################################

# Written by Henrik Eklund

namespace = TOG

### Soumenusko Ukon juhla

# Invitations Sent (Liege)
character_event = {
	id = TOG.700
	desc = EVTDESC_TOG_700
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # hold_ukon_juhla, minor_decisions.txt
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_700

		any_vassal = {
			limit = {
				block_general_event_trigger = no
				war = no
			}

			character_event = {
				id = TOG.701
				tooltip = EVTTOOLTIP_TOG_701
			}
		}

		character_event = {
			id = TOG.703
			days = 10
		}
	}
}

# Invitations Received (Vassals)
character_event = {
	id = TOG.701
	desc = EVTDESC_TOG_701
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_701

		trigger = { religion_openly_finnish_or_reformed_trigger = yes }

		set_character_flag = attending_ukon_juhla
		set_character_flag = do_not_disturb

		character_event = {
			id = TOG.899 # Safety catch flag clearing
			days = 100
		}
	}

	option = {
		name = EVTOPTB_TOG_701

		trigger = { religion_openly_finnish_or_reformed_trigger = no }

		FROM = {
			show_scope_change = no

			character_event = {
				id = TOG.702
				days = 5
				tooltip = DIPLOWINDOW_REJECT
			}

			opinion = {
				name = opinion_refused_ukon_juhla
				who = ROOT
			}
		}
	}
}

# Invitation Refused (Liege)
character_event = {
	id = TOG.702
	desc = EVTDESC_TOG_702
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_702

		tooltip = {
			opinion = {
				name = opinion_refused_ukon_juhla
				who = FROM
			}
		}
	}
}

# Celebration Begins (Liege)
character_event = {
	id = TOG.703
	desc = EVTDESC_TOG_703
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_703

		custom_tooltip = {
			text = ukon_juhla_begins

			any_vassal = {
				limit = { has_character_flag = attending_ukon_juhla }
				character_event = { id = TOG.704 }
			}

			character_event = {
				id = TOG.705
				days = 10
			}
		}
	}
}

# Celebration Begins (Vassals)
character_event = {
	id = TOG.704
	desc = EVTDESC_TOG_704
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_703

		custom_tooltip = { text = ukon_juhla_begins }
	}
}

# Feast Begins (Liege)
character_event = {
	id = TOG.705
	desc = EVTDESC_TOG_705
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_705

		custom_tooltip = {
			text = feast_begins

			set_character_flag = attending_ukon_juhla

			set_variable = {
				which = local_ukon_juhla_events
				value = 0
			}

			character_event = {
				id = TOG.709 # Blot events tombola
				days = 3
			}

			any_vassal = {
				limit = { has_character_flag = attending_ukon_juhla }

				set_character_flag = ukon_juhla_feast_vassal
				character_event = { id = TOG.706 }

				opinion = {
					name = opinion_held_blot
					who = ROOT
				}
			}
		}
	}
}

character_event = {
	id = TOG.709

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		check_variable = {
			which = local_blot_feast_events
			value < 4
		}
	}

	immediate = {
		change_variable = {
			which = local_blot_feast_events
			value = 1
		}

		random_list = {
			10 = {
				trigger = {
					any_vassal = {
						trait = drunkard
						has_character_flag = ukon_juhla_feast_vassal
					}

					NOT = { has_character_flag = feast_drunkard }
				}

				random_vassal = {
					limit = {
						trait = drunkard
						has_character_flag = ukon_juhla_feast_vassal
					}

					character_event = { id = TOG.720 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = gluttonous
						has_character_flag = ukon_juhla_feast_vassal
					}

					num_of_vassals >= 2
					NOT = { has_character_flag = feast_gluttonous }
				}

				random_vassal = {
					limit = {
						trait = gluttonous
						has_character_flag = ukon_juhla_feast_vassal
					}

					character_event = { id = TOG.723 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = lunatic
						has_character_flag = ukon_juhla_feast_vassal
					}

					NOT = { has_character_flag = feast_lunatic }
				}

				random_vassal = {
					limit = {
						trait = lunatic
						has_character_flag = ukon_juhla_feast_vassal
					}

					character_event = { id = TOG.726 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = lustful
						is_female = no
						has_character_flag = ukon_juhla_feast_vassal
					}

					NOT = { has_character_flag = feast_lustful }
				}

				random_vassal = {
					limit = {
						trait = lustful
						is_female = no
						has_character_flag = ukon_juhla_feast_vassal
					}

					character_event = { id = TOG.728 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						has_character_flag = ukon_juhla_feast_vassal

						liege = {
							any_vassal = {
								has_character_flag = ukon_juhla_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 20
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					NOT = { has_character_flag = feast_friendship }
				}

				random_vassal = {
					limit = {
						has_character_flag = ukon_juhla_feast_vassal
						liege = {
							any_vassal = {
								has_character_flag = ukon_juhla_feast_vassal
								opinion = {
									who = PREVPREV
									value >= 20
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					character_event = { id = TOG.731 }
				}
			}

			10 = {
				trigger = {
					NOT = { has_character_flag = feast_homosexual }

					any_vassal = {
						trait = homosexual
						has_lover = no
						has_character_flag = ukon_juhla_feast_vassal

						liege = {
							any_vassal = {
								trait = homosexual
								same_sex = PREVPREV
								has_lover = no
								has_character_flag = ukon_juhla_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 0
								}

								NOT = { character = PREVPREV }
							}
						}
					}
				}

				random_vassal = {
					limit = {
						trait = homosexual
						has_lover = no
						has_character_flag = ukon_juhla_feast_vassal

						liege = {
							any_vassal = {
								trait = homosexual
								same_sex = PREVPREV
								has_lover = no
								has_character_flag = ukon_juhla_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 0
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					character_event = { id = TOG.734 }
				}
			}
		}

		repeat_event = {
			id = TOG.709
			days = 5
		}
	}

	fail_trigger_effect = {
		character_event = {
			id = TOG.707 # Feast ends
			days = 7
		}
	}
}

# Feast Begins (Vassal)
character_event = {
	id = TOG.706
	desc = EVTDESC_TOG_706
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_705

		custom_tooltip = { text = feast_begins }
	}
}

# Feast Ends (Liege)
character_event = {
	id = TOG.707
	desc = EVTDESC_TOG_707
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_707

		any_vassal = {
			show_scope_change = no

			limit = { has_character_flag = attending_ukon_juhla }

			opinion = {
				name = opinion_ukon_juhla
				who = ROOT
			}

			character_event = { id = TOG.708 }
		}

		add_character_modifier = {
			name = held_ukon_juhla_timer
			years = 5
			hidden = yes
		}

		prestige = 100
		piety = 100

		clr_character_flag = holding_ukon_juhla
		clr_character_flag = attending_ukon_juhla
		clr_character_flag = feast_drunkard
		clr_character_flag = feast_gluttonous
		clr_character_flag = feast_lunatic
		clr_character_flag = feast_lustful
		clr_character_flag = feast_homosexual
		clr_character_flag = do_not_disturb
	}
}

# Feast Ends (Vassal)
character_event = {
	id = TOG.708
	desc = EVTDESC_TOG_708
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_707

		clr_character_flag = attending_ukon_juhla
		clr_character_flag = ukon_juhla_feast_vassal
		clr_character_flag = feast_drunkard
		clr_character_flag = feast_gluttonous
		clr_character_flag = feast_lunatic
		clr_character_flag = feast_lustful
		clr_character_flag = feast_friendship
		clr_character_flag = feast_homosexual
		clr_character_flag = do_not_disturb
	}
}

### Ukon juhla Feast Events

# Drunkard (Guest)
character_event = {
	id = TOG.720
	desc = EVTDESC_TOG_650
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_650
		tooltip_info = drunkard

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = drunkard }

				opinion = {
					name = opinion_drinking_buddy
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			set_character_flag = feast_drunkard
			character_event = { id = TOG.721 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = ukon_juhla_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = drunkard }

					opinion = {
						name = opinion_drinking_buddy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.721 }
			}
		}
	}
}

# Drunkard (Host and Other Guests)
character_event = {
	id = TOG.721
	desc = EVTDESC_TOG_651
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_651

		trigger = {
			NOT = { trait = drunkard }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_651
		tooltip_info = drunkard

		trigger = { trait = drunkard }

		tooltip = {
			opinion = {
				name = opinion_drinking_buddy
				who = FROM
			}
		}
	}
}

# Gluttonous (Guest)
character_event = {
	id = TOG.723
	desc = EVTDESC_TOG_653
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		liege = {
			set_character_flag = feast_gluttonous

			random_vassal = {
				limit = {
					NOT = { character = ROOT }
				}

				save_event_target_as = glutton_victim
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_653
		tooltip_info = gluttonous

		event_target:glutton_victim = {
			show_scope_change = no

				opinion = {
					name = opinion_vomit
					who = ROOT
				}

			character_event = {
				id = TOG.724
				tooltip = EVTTOOLTIP_TOG_654
			}
		}

		liege = {
			show_scope_change = no

			opinion = {
				name = opinion_feast_scandal
				who = ROOT
			}

			character_event = { id = TOG.725 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = ukon_juhla_feast_vassal

					NOR = {
						character = ROOT
						character = event_target:glutton_victim
					}
				}

				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}

				character_event = { id = TOG.725 }
			}
		}
	}
}

# Gluttonous (Victim)
character_event = {
	id = TOG.724
	desc = EVTDESC_TOG_654
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_654

		tooltip = {
			opinion = {
				name = opinion_vomit
				who = FROM
			}
		}
	}
}

# Gluttonous (Host and Other Guests)
character_event = {
	id = TOG.725
	desc = EVTDESC_TOG_655
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_655

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}
}

# Lunatic (Guest)
character_event = {
	id = TOG.726
	desc = EVTDESC_TOG_656
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion

	hide_from = yes
	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_656
		tooltip_info = lunatic

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = lunatic }

				opinion = {
					name = opinion_feast_friend
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			set_character_flag = feast_lunatic
			character_event = { id = TOG.727 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = ukon_juhla_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = lunatic }

					opinion = {
						name = opinion_feast_friend
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.727 }
			}
		}
	}
}

# Lunatic (Host and Other Guests)
character_event = {
	id = TOG.727
	desc = EVTDESC_TOG_657
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_657

		trigger = {
			NOT = { trait = lunatic }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = ROOT
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_657
		tooltip_info = lunatic

		trigger = { trait = lunatic }

		tooltip = {
			opinion = {
				name = opinion_feast_friend
				who = ROOT
			}
		}
	}
}

# Lustful (Guest)
character_event = {
	id = TOG.728
	desc = EVTDESC_TOG_658
	picture = GFX_evt_brothel
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	immediate = {
		liege = {
			set_character_flag = feast_lustful
		}
	}

	option = {
		name = {
			text = EVTOPTA_TOG_658
			trigger = { is_married = no }
		}
		name = {
			text = EVTOPTB_TOG_658
			trigger = { is_married = yes }
		}

		tooltip_info = lustful

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = lustful }

				opinion = {
					name = opinion_lustful_buddy
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			character_event = { id = TOG.729 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = ukon_juhla_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = lustful }

					opinion = {
						name = opinion_lustful_buddy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.729 }
			}
		}

		any_spouse = {
			show_scope_change = no

			opinion = {
				name = opinion_mad_as_hell
				who = ROOT
				years = 1
			}

			character_event = { id = TOG.729 }
		}
	}
}

# Lustful (Host and Other Guests)
character_event = {
	id = TOG.729
	desc = EVTDESC_TOG_659
	picture = GFX_evt_brothel
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_659

		trigger = {
			NOR = {
				trait = lustful
				is_married = FROM
			}
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_659
		tooltip_info = lustful

		trigger = {
			trait = lustful
			NOT = { is_married = FROM }
		}

		tooltip = {
			opinion = {
				name = opinion_lustful_buddy
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTC_TOG_659

		trigger = { is_married = FROM }

		tooltip = {
			opinion = {
				name = opinion_mad_as_hell
				who = FROM
				years = 1
			}
		}
	}
}

# Friendship Formed (Guest 1)
character_event = {
	id = TOG.731
	desc = EVTDESC_TOG_661
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		liege = {
			set_character_flag = feast_friendship

			random_vassal = {
				limit = {
					has_character_flag = ukon_juhla_feast_vassal

					opinion = {
						who = ROOT
						value >= 20
					}

					NOT = { character = ROOT }
				}

				save_event_target_as = other_vassal_guest
				character_event = { id = TOG.732 }
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_661

		reverse_opinion = {
			name = opinion_feast_friend
			who = event_target:other_vassal_guest
		}

		opinion = {
			name = opinion_feast_friend
			who = event_target:other_vassal_guest
		}
	}
}

# Friendship Formed (Guest 2)
character_event = {
	id = TOG.732
	desc = EVTDESC_TOG_661
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	immediate = {
		# For localisation in event description
		FROM = {
			save_event_target_as = other_vassal_guest
		}
	}

	option = {
		name = EVTOPTA_TOG_661

		tooltip = {
			reverse_opinion = {
				name = opinion_feast_friend
				who = FROM
			}

			opinion = {
				name = opinion_feast_friend
				who = FROM
			}
		}
	}
}

# Homosexual lovers (Guest 1)
character_event = {
	id = TOG.734
	desc = EVTDESC_TOG_664
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	portrait = event_target:second_homosexual_guest

	is_triggered_only = yes

	immediate = {
		save_event_target_as = first_homosexual_guest

		liege = {
			set_character_flag = feast_homosexual

			random_vassal = {
				limit = {
					trait = homosexual
					same_sex = ROOT
					has_character_flag = ukon_juhla_feast_vassal

					opinion = {
						who = ROOT
						value >= 0
					}

					NOT = { character = ROOT }
				}

				save_event_target_as = second_homosexual_guest
				save_event_target_as = other_homosexual_guest # For loc
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_664
		tooltip_info = homosexual

		event_target:second_homosexual_guest = {
			character_event = { id = TOG.735 }
		}

		add_lover = event_target:second_homosexual_guest

		random = {
			chance = 50

			custom_tooltip = { text = EVTTOOLTIP_TOG_669 }
		}
	}
}

# Homosexual lovers (Guest 2)
character_event = {
	id = TOG.735
	desc = EVTDESC_TOG_664
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	portrait = event_target:first_homosexual_guest

	is_triggered_only = yes

	immediate = {
		FROM = {
			save_event_target_as = other_homosexual_guest # For loc
		}
	}

	option = {
		name = EVTOPTA_TOG_664
		tooltip_info = homosexual

		random = {
			chance = 50

			custom_tooltip = {
				text = EVTTOOLTIP_TOG_669

				character_event = { id = TOG.739 }
				FROM = { character_event = { id = TOG.739 } }

				liege = {
					character_event = { id = TOG.740 }

					any_vassal = {
						limit = {
							has_character_flag = ukon_juhla_feast_vassal

							NOR = {
								character = event_target:first_homosexual_guest
								character = event_target:second_homosexual_guest
							}
						}

						character_event = { id = TOG.740 }
					}
				}
			}
		}

		tooltip = {
			add_lover = FROM
		}
	}
}

# Homosexual Caught
character_event = {
	id = TOG.739
	desc = EVTDESC_TOG_669
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_669

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = homosexual }

				opinion = {
					name = opinion_homosexual_sympathy
					who = ROOT
				}
			}

			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = ukon_juhla_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = homosexual }

					opinion = {
						name = opinion_homosexual_sympathy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}
			}
		}
	}
}

# Homosexuals Caught (Host and Other Guests)
character_event = {
	id = TOG.740
	desc = EVTDESC_TOG_670
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_670

		trigger = {
			NOT = { trait = homosexual }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = event_target:first_homosexual_guest
			}

			opinion = {
				name = opinion_feast_scandal
				who = event_target:second_homosexual_guest
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_670
		tooltip_info = homosexual

		trigger = { trait = homosexual }

		tooltip = {
			opinion = {
				name = opinion_homosexual_sympathy
				who = event_target:first_homosexual_guest
			}

			opinion = {
				name = opinion_homosexual_sympathy
				who = event_target:second_homosexual_guest
			}
		}
	}
}

### Romuva Užgavenes Festival

# Invitations Sent (Liege)
character_event = {
	id = TOG.750
	desc = EVTDESC_TOG_750
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # hold_uzgavenes, minor_decisions.txt
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_700

		any_vassal = {
			limit = {
				block_general_event_trigger = no
				war = no
			}

			character_event = {
				id = TOG.751
				tooltip = EVTTOOLTIP_TOG_751
			}
		}

		character_event = {
			id = TOG.753
			days = 10
		}
	}
}

# Invitations Received (Vassals)
character_event = {
	id = TOG.751
	desc = EVTDESC_TOG_751
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_701

		trigger = { religion_openly_baltic_or_reformed_trigger = yes }

		set_character_flag = attending_uzgavenes
		set_character_flag = do_not_disturb

		character_event = {
			id = TOG.899 # Safety catch flag clearing
			days = 100
		}
	}

	option = {
		name = EVTOPTB_TOG_701

		trigger = { religion_openly_baltic_or_reformed_trigger = no }

		FROM = {
			show_scope_change = no

			character_event = {
				id = TOG.752
				days = 5
				tooltip = DIPLOWINDOW_REJECT
			}

			opinion = {
				name = opinion_refused_uzgavenes
				who = ROOT
			}
		}
	}
}

# Invitation Refused (Liege)
character_event = {
	id = TOG.752
	desc = EVTDESC_TOG_752
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_702

		tooltip = {
			opinion = {
				name = opinion_refused_uzgavenes
				who = FROM
			}
		}
	}
}

# Celebration Begins (Liege)
character_event = {
	id = TOG.753
	desc = EVTDESC_TOG_753
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_753

		custom_tooltip = {
			text = uzgavenes_begins

			any_vassal = {
				limit = { has_character_flag = attending_uzgavenes }
				character_event = { id = TOG.754 }
			}

			character_event = {
				id = TOG.755
				days = 10
			}
		}
	}
}

# Celebration Begins (Vassals)
character_event = {
	id = TOG.754
	desc = EVTDESC_TOG_754
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_753

		custom_tooltip = { text = uzgavenes_begins }
	}
}

# Feast Begins (Liege)
character_event = {
	id = TOG.755
	desc = EVTDESC_TOG_755
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_705

		custom_tooltip = {
			text = feast_begins

			set_character_flag = attending_uzgavenes

			set_variable = {
				which = local_uzgavenes_events
				value = 0
			}

			character_event = {
				id = TOG.759 # Blot events tombola
				days = 3
			}

			any_vassal = {
				limit = { has_character_flag = attending_uzgavenes }

				set_character_flag = uzgavenes_feast_vassal
				character_event = { id = TOG.756 }

				opinion = {
					name = opinion_held_blot
					who = ROOT
				}
			}
		}
	}
}

character_event = {
	id = TOG.759

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		check_variable = {
			which = local_blot_feast_events
			value < 4
		}
	}

	immediate = {
		change_variable = {
			which = local_blot_feast_events
			value = 1
		}

		random_list = {
			10 = {
				trigger = {
					any_vassal = {
						trait = drunkard
						has_character_flag = uzgavenes_feast_vassal
					}

					NOT = { has_character_flag = feast_drunkard }
				}

				random_vassal = {
					limit = {
						trait = drunkard
						has_character_flag = uzgavenes_feast_vassal
					}

					character_event = { id = TOG.770 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = gluttonous
						has_character_flag = uzgavenes_feast_vassal
					}

					num_of_vassals >= 2
					NOT = { has_character_flag = feast_gluttonous }
				}

				random_vassal = {
					limit = {
						trait = gluttonous
						has_character_flag = uzgavenes_feast_vassal
					}

					character_event = { id = TOG.773 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = lunatic
						has_character_flag = uzgavenes_feast_vassal
					}

					NOT = { has_character_flag = feast_lunatic }
				}

				random_vassal = {
					limit = {
						trait = lunatic
						has_character_flag = uzgavenes_feast_vassal
					}

					character_event = { id = TOG.776 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = lustful
						is_female = no
						has_character_flag = uzgavenes_feast_vassal
					}

					NOT = { has_character_flag = feast_lustful }
				}

				random_vassal = {
					limit = {
						trait = lustful
						is_female = no
						has_character_flag = uzgavenes_feast_vassal
					}

					character_event = { id = TOG.778 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						has_character_flag = uzgavenes_feast_vassal

						liege = {
							any_vassal = {
								has_character_flag = uzgavenes_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 20
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					NOT = { has_character_flag = feast_friendship }
				}

				random_vassal = {
					limit = {
						has_character_flag = uzgavenes_feast_vassal
						liege = {
							any_vassal = {
								has_character_flag = uzgavenes_feast_vassal
								opinion = {
									who = PREVPREV
									value >= 20
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					character_event = { id = TOG.781 }
				}
			}

			10 = {
				trigger = {
					NOT = { has_character_flag = feast_homosexual }

					any_vassal = {
						trait = homosexual
						has_lover = no
						has_character_flag = uzgavenes_feast_vassal

						liege = {
							any_vassal = {
								trait = homosexual
								same_sex = PREVPREV
								has_lover = no
								has_character_flag = uzgavenes_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 0
								}

								NOT = { character = PREVPREV }
							}
						}
					}
				}

				random_vassal = {
					limit = {
						trait = homosexual
						has_lover = no
						has_character_flag = uzgavenes_feast_vassal

						liege = {
							any_vassal = {
								trait = homosexual
								same_sex = PREVPREV
								has_lover = no
								has_character_flag = uzgavenes_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 0
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					character_event = { id = TOG.784 }
				}
			}
		}

		repeat_event = {
			id = TOG.759
			days = 5
		}
	}

	fail_trigger_effect = {
		character_event = {
			id = TOG.757 # Feast ends
			days = 7
		}
	}
}

# Feast Begins (Vassal)
character_event = {
	id = TOG.756
	desc = EVTDESC_TOG_756
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_705

		custom_tooltip = { text = feast_begins }
	}
}

# Feast Ends (Liege)
character_event = {
	id = TOG.757
	desc = EVTDESC_TOG_757
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_707

		any_vassal = {
			show_scope_change = no

			limit = { has_character_flag = attending_uzgavenes }

			opinion = {
				name = opinion_uzgavenes
				who = ROOT
			}

			character_event = { id = TOG.758 }
		}

		add_character_modifier = {
			name = held_uzgavenes_timer
			years = 5
			hidden = yes
		}

		prestige = 100
		piety = 100

		clr_character_flag = holding_uzgavenes
		clr_character_flag = attending_uzgavenes
		clr_character_flag = feast_drunkard
		clr_character_flag = feast_gluttonous
		clr_character_flag = feast_lunatic
		clr_character_flag = feast_lustful
		clr_character_flag = feast_homosexual
		clr_character_flag = do_not_disturb
	}
}

# Feast Ends (Vassal)
character_event = {
	id = TOG.758
	desc = EVTDESC_TOG_758
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_707

		clr_character_flag = attending_uzgavenes
		clr_character_flag = uzgavenes_feast_vassal
		clr_character_flag = feast_drunkard
		clr_character_flag = feast_gluttonous
		clr_character_flag = feast_lunatic
		clr_character_flag = feast_lustful
		clr_character_flag = feast_friendship
		clr_character_flag = feast_homosexual
		clr_character_flag = do_not_disturb
	}
}

### Ukon juhla Feast Events

# Drunkard (Guest)
character_event = {
	id = TOG.770
	desc = EVTDESC_TOG_650
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_650
		tooltip_info = drunkard

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = drunkard }

				opinion = {
					name = opinion_drinking_buddy
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			set_character_flag = feast_drunkard
			character_event = { id = TOG.771 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = uzgavenes_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = drunkard }

					opinion = {
						name = opinion_drinking_buddy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.771 }
			}
		}
	}
}

# Drunkard (Host and Other Guests)
character_event = {
	id = TOG.771
	desc = EVTDESC_TOG_651
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_651

		trigger = {
			NOT = { trait = drunkard }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_651
		tooltip_info = drunkard

		trigger = { trait = drunkard }

		tooltip = {
			opinion = {
				name = opinion_drinking_buddy
				who = FROM
			}
		}
	}
}

# Gluttonous (Guest)
character_event = {
	id = TOG.773
	desc = EVTDESC_TOG_653
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		liege = {
			set_character_flag = feast_gluttonous

			random_vassal = {
				limit = {
					NOT = { character = ROOT }
				}

				save_event_target_as = glutton_victim
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_653
		tooltip_info = gluttonous

		event_target:glutton_victim = {
			show_scope_change = no

			character_event = {
				id = TOG.774
				tooltip = EVTTOOLTIP_TOG_654
			}

			opinion = {
				name = opinion_vomit
				who = ROOT
			}
		}

		liege = {
			show_scope_change = no

			opinion = {
				name = opinion_feast_scandal
				who = ROOT
			}

			character_event = { id = TOG.775 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = uzgavenes_feast_vassal

					NOR = {
						character = ROOT
						character = event_target:glutton_victim
					}
				}

				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}

				character_event = { id = TOG.775 }
			}
		}
	}
}

# Gluttonous (Victim)
character_event = {
	id = TOG.774
	desc = EVTDESC_TOG_654
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_654

		tooltip = {
			opinion = {
				name = opinion_vomit
				who = FROM
			}
		}
	}
}

# Gluttonous (Host and Other Guests)
character_event = {
	id = TOG.775
	desc = EVTDESC_TOG_655
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_655

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}
}

# Lunatic (Guest)
character_event = {
	id = TOG.776
	desc = EVTDESC_TOG_656
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion

	hide_from = yes
	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_656
		tooltip_info = lunatic

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = lunatic }

				opinion = {
					name = opinion_feast_friend
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			set_character_flag = feast_lunatic
			character_event = { id = TOG.777 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = uzgavenes_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = lunatic }

					opinion = {
						name = opinion_feast_friend
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.777 }
			}
		}
	}
}

# Lunatic (Host and Other Guests)
character_event = {
	id = TOG.777
	desc = EVTDESC_TOG_657
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_657

		trigger = {
			NOT = { trait = lunatic }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = ROOT
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_657
		tooltip_info = lunatic

		trigger = { trait = lunatic }

		tooltip = {
			opinion = {
				name = opinion_feast_friend
				who = ROOT
			}
		}
	}
}

# Lustful (Guest)
character_event = {
	id = TOG.778
	desc = EVTDESC_TOG_658
	picture = GFX_evt_brothel
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	immediate = {
		liege = {
			set_character_flag = feast_lustful
		}
	}

	option = {
		name = {
			text = EVTOPTA_TOG_658
			trigger = { is_married = no }
		}
		name = {
			text = EVTOPTB_TOG_658
			trigger = { is_married = yes }
		}

		tooltip_info = lustful

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = lustful }

				opinion = {
					name = opinion_lustful_buddy
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			character_event = { id = TOG.779 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = uzgavenes_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = lustful }

					opinion = {
						name = opinion_lustful_buddy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.779 }
			}
		}

		any_spouse = {
			show_scope_change = no

			opinion = {
				name = opinion_mad_as_hell
				who = ROOT
				years = 1
			}

			character_event = { id = TOG.779 }
		}
	}
}

# Lustful (Host and Other Guests)
character_event = {
	id = TOG.779
	desc = EVTDESC_TOG_659
	picture = GFX_evt_brothel
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_659

		trigger = {
			NOR = {
				trait = lustful
				is_married = FROM
			}
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_659
		tooltip_info = lustful

		trigger = {
			trait = lustful
			NOT = { is_married = FROM }
		}

		tooltip = {
			opinion = {
				name = opinion_lustful_buddy
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTC_TOG_659

		trigger = { is_married = FROM }

		tooltip = {
			opinion = {
				name = opinion_mad_as_hell
				who = FROM
				years = 1
			}
		}
	}
}

# Friendship Formed (Guest 1)
character_event = {
	id = TOG.781
	desc = EVTDESC_TOG_661
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		liege = {
			set_character_flag = feast_friendship

			random_vassal = {
				limit = {
					has_character_flag = uzgavenes_feast_vassal

					opinion = {
						who = ROOT
						value >= 20
					}

					NOT = { character = ROOT }
				}

				save_event_target_as = other_vassal_guest
				character_event = { id = TOG.782 }
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_661

		reverse_opinion = {
			name = opinion_feast_friend
			who = event_target:other_vassal_guest
		}

		opinion = {
			name = opinion_feast_friend
			who = event_target:other_vassal_guest
		}
	}
}

# Friendship Formed (Guest 2)
character_event = {
	id = TOG.782
	desc = EVTDESC_TOG_661
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		# For localisation in event description
		FROM = {
			save_event_target_as = other_vassal_guest
		}
	}

	option = {
		name = EVTOPTA_TOG_661

		tooltip = {
			reverse_opinion = {
				name = opinion_feast_friend
				who = FROM
			}

			opinion = {
				name = opinion_feast_friend
				who = FROM
			}
		}
	}
}

# Homosexual lovers (Guest 1)
character_event = {
	id = TOG.784
	desc = EVTDESC_TOG_664
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	portrait = event_target:second_homosexual_guest

	is_triggered_only = yes

	immediate = {
		save_event_target_as = first_homosexual_guest

		liege = {
			set_character_flag = feast_homosexual

			random_vassal = {
				limit = {
					trait = homosexual
					same_sex = ROOT
					has_character_flag = uzgavenes_feast_vassal

					opinion = {
						who = ROOT
						value >= 0
					}

					NOT = { character = ROOT }
				}

				save_event_target_as = second_homosexual_guest
				save_event_target_as = other_homosexual_guest # For loc
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_664
		tooltip_info = homosexual

		event_target:second_homosexual_guest = {
			character_event = { id = TOG.785 }
		}

		add_lover = event_target:second_homosexual_guest

		random = {
			chance = 50

			custom_tooltip = { text = EVTTOOLTIP_TOG_669 }
		}
	}
}

# Homosexual lovers (Guest 2)
character_event = {
	id = TOG.785
	desc = EVTDESC_TOG_664
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	portrait = event_target:first_homosexual_guest

	is_triggered_only = yes

	immediate = {
		FROM = {
			save_event_target_as = other_homosexual_guest # For loc
		}
	}

	option = {
		name = EVTOPTA_TOG_664
		tooltip_info = homosexual

		random = {
			chance = 50

			custom_tooltip = {
				text = EVTTOOLTIP_TOG_669

				character_event = { id = TOG.789 }
				FROM = { character_event = { id = TOG.789 } }

				liege = {
					character_event = { id = TOG.790 }

					any_vassal = {
						limit = {
							has_character_flag = uzgavenes_feast_vassal

							NOR = {
								character = event_target:first_homosexual_guest
								character = event_target:second_homosexual_guest
							}
						}

						character_event = { id = TOG.790 }
					}
				}
			}
		}

		tooltip = {
			add_lover = FROM
		}
	}
}

# Homosexual Caught
character_event = {
	id = TOG.789
	desc = EVTDESC_TOG_669
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_669

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = homosexual }

				opinion = {
					name = opinion_homosexual_sympathy
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = uzgavenes_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = homosexual }

					opinion = {
						name = opinion_homosexual_sympathy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}
			}
		}
	}
}

# Homosexuals Caught (Host and Other Guests)
character_event = {
	id = TOG.790
	desc = EVTDESC_TOG_670
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_670

		trigger = {
			NOT = { trait = homosexual }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = event_target:first_homosexual_guest
			}

			opinion = {
				name = opinion_feast_scandal
				who = event_target:second_homosexual_guest
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_670
		tooltip_info = homosexual

		trigger = { trait = homosexual }

		tooltip = {
			opinion = {
				name = opinion_homosexual_sympathy
				who = event_target:first_homosexual_guest
			}

			opinion = {
				name = opinion_homosexual_sympathy
				who = event_target:second_homosexual_guest
			}
		}
	}
}

### Slavic Jarilo Festival

# Invitations Sent (Liege)
character_event = {
	id = TOG.800
	desc = EVTDESC_TOG_800
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes # hold_jarilo, minor_decsions.txt
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_700

		any_vassal = {
			limit = {
				block_general_event_trigger = no
				war = no
			}

			character_event = {
				id = TOG.801
				tooltip = EVTTOOLTIP_TOG_801
			}
		}

		character_event = {
			id = TOG.803
			days = 10
		}
	}
}

# Invitations Received (Vassals)
character_event = {
	id = TOG.801
	desc = EVTDESC_TOG_801
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_701

		trigger = { religion_openly_slavic_or_reformed_trigger = yes }

		set_character_flag = attending_jarilo
		set_character_flag = do_not_disturb

		character_event = {
			id = TOG.899 # Safety catch flag clearing
			days = 100
		}
	}

	option = {
		name = EVTOPTB_TOG_701

		trigger = { religion_openly_slavic_or_reformed_trigger = no }

		FROM = {
			show_scope_change = no

			character_event = {
				id = TOG.802
				days = 5
				tooltip = DIPLOWINDOW_REJECT
			}

			opinion = {
				name = opinion_refused_jarilo
				who = ROOT
			}
		}
	}
}

# Invitation Refused (Liege)
character_event = {
	id = TOG.802
	desc = EVTDESC_TOG_802
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_702

		tooltip = {
			opinion = {
				name = opinion_refused_jarilo
				who = FROM
			}
		}
	}
}

# Celebration Begins (Liege)
character_event = {
	id = TOG.803
	desc = EVTDESC_TOG_803
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_803

		custom_tooltip = {
			text = jarilo_deliberations

			if = {
				limit = {
					any_vassal = {
						has_character_flag = attending_jarilo
						is_female = no
						religion_openly_slavic_or_reformed_trigger = yes
					}
				}

				random_vassal = {
					limit = {
						has_character_flag = attending_jarilo
						is_female = no
						religion_openly_slavic_or_reformed_trigger = yes
					}

					character_event = {
						id = TOG.845 # Chosen to be Jarilo
						days = 2
					}
				}
			}
			else = {
				character_event = {
					id = TOG.848 # Liege is Jarilo
					days = 2
				}
			}

			character_event = {
				id = TOG.805
				days = 10
			}

			any_vassal = {
				limit = { has_character_flag = attending_jarilo }
				character_event = { id = TOG.804 }
			}
		}
	}
}

# Vassal chosen to be Jarilo
character_event = {
	id = TOG.845
	desc = EVTDESC_TOG_845
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_845

		trigger = {
			NOT = { trait = cynical }
		}

		FROM = {
			show_scope_change = no

			if = {
				limit = {
					NOT = { trait = cynical }
				}

				opinion = {
					name = opinion_represented_jarilo
					who = ROOT
				}
			}

			character_event = { id = TOG.846 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = attending_jarilo
					NOT = { character = ROOT }
				}

				if = {
					limit = {
						NOT = { trait = cynical }
					}

					opinion = {
						name = opinion_represented_jarilo
						who = ROOT
					}
				}

				character_event = { id = TOG.847 }
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_845
		tooltip_info = cynical

		trigger = { trait = cynical }

		FROM = {
			show_scope_change = no

			if = {
				limit = {
					NOT = { trait = cynical }
				}

				opinion = {
					name = opinion_represented_jarilo
					who = ROOT
				}
			}

			character_event = { id = TOG.846 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = attending_jarilo
					NOT = { character = ROOT }
				}

				if = {
					limit = {
						NOT = { trait = cynical }
					}

					opinion = {
						name = opinion_represented_jarilo
						who = ROOT
					}
				}

				character_event = { id = TOG.847 }
			}
		}
	}
}

# Informed who will be Jarilo (Liege)
character_event = {
	id = TOG.846
	desc = EVTDESC_TOG_846
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_846

		trigger = {
			NOT = { trait = cynical }
		}

		tooltip = {
			opinion = {
				name = opinion_represented_jarilo
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_846
		tooltip_info = cynical

		trigger = { trait = cynical }
	}
}

# Informed who will be Jarilo (Vassal)
character_event = {
	id = TOG.847
	desc = EVTDESC_TOG_846
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_846

		trigger = {
			NOT = { trait = cynical }
		}

		tooltip = {
			opinion = {
				name = opinion_represented_jarilo
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_846
		tooltip_info = cynical

		trigger = { trait = cynical }
	}
}

# No vassals participating - Liege is Jarilo (Liege)
character_event = {
	id = TOG.848
	desc = EVTDESC_TOG_848
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_845

		trigger = {
			NOT = { trait = cynical }
		}
	}

	option = {
		name = EVTOPTB_TOG_845
		tooltip_info = cynical

		trigger = { trait = cynical }
	}
}

# Celebration Begins (Vassals)
character_event = {
	id = TOG.804
	desc = EVTDESC_TOG_804
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_803

		custom_tooltip = { text = jarilo_deliberations }
	}
}

# Feast Begins (Liege)
character_event = {
	id = TOG.805
	desc = EVTDESC_TOG_805
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_705

		custom_tooltip = {
			text = feast_begins

			set_character_flag = attending_jarilo

			set_variable = {
				which = local_jarilo_feast_events
				value = 0
			}

			character_event = {
				id = TOG.809 # Blot events tombola
				days = 3
			}

			any_vassal = {
				limit = { has_character_flag = attending_jarilo }

				set_character_flag = jarilo_feast_vassal
				character_event = { id = TOG.806 }

				opinion = {
					name = opinion_held_blot
					who = ROOT
				}
			}
		}
	}
}

character_event = {
	id = TOG.809

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		check_variable = {
			which = local_jarilo_feast_events
			value < 4
		}
	}

	immediate = {
		change_variable = {
			which = local_jarilo_feast_events
			value = 1
		}

		random_list = {
			10 = {
				trigger = {
					any_vassal = {
						trait = drunkard
						has_character_flag = jarilo_feast_vassal
					}

					NOT = { has_character_flag = feast_drunkard }
				}

				random_vassal = {
					limit = {
						trait = drunkard
						has_character_flag = jarilo_feast_vassal
					}

					character_event = { id = TOG.820 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = gluttonous
						has_character_flag = jarilo_feast_vassal
					}

					num_of_vassals >= 2
					NOT = { has_character_flag = feast_gluttonous }
				}

				random_vassal = {
					limit = {
						trait = gluttonous
						has_character_flag = jarilo_feast_vassal
					}

					character_event = { id = TOG.823 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = lunatic
						has_character_flag = jarilo_feast_vassal
					}

					NOT = { has_character_flag = feast_lunatic }
				}

				random_vassal = {
					limit = {
						trait = lunatic
						has_character_flag = jarilo_feast_vassal
					}

					character_event = { id = TOG.826 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						trait = lustful
						is_female = no
						has_character_flag = jarilo_feast_vassal
					}

					NOT = { has_character_flag = feast_lustful }
				}

				random_vassal = {
					limit = {
						trait = lustful
						is_female = no
						has_character_flag = jarilo_feast_vassal
					}

					character_event = { id = TOG.828 }
				}
			}

			10 = {
				trigger = {
					any_vassal = {
						has_character_flag = jarilo_feast_vassal

						liege = {
							any_vassal = {
								has_character_flag = jarilo_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 20
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					NOT = { has_character_flag = feast_friendship }
				}

				random_vassal = {
					limit = {
						has_character_flag = jarilo_feast_vassal
						liege = {
							any_vassal = {
								has_character_flag = jarilo_feast_vassal
								opinion = {
									who = PREVPREV
									value >= 20
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					character_event = { id = TOG.831 }
				}
			}

			10 = {
				trigger = {
					NOT = { has_character_flag = feast_homosexual }

					any_vassal = {
						trait = homosexual
						has_lover = no
						has_character_flag = jarilo_feast_vassal

						liege = {
							any_vassal = {
								trait = homosexual
								same_sex = PREVPREV
								has_lover = no
								has_character_flag = jarilo_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 0
								}

								NOT = { character = PREVPREV }
							}
						}
					}
				}

				random_vassal = {
					limit = {
						trait = homosexual
						has_lover = no
						has_character_flag = jarilo_feast_vassal

						liege = {
							any_vassal = {
								trait = homosexual
								same_sex = PREVPREV
								has_lover = no
								has_character_flag = jarilo_feast_vassal

								opinion = {
									who = PREVPREV
									value >= 0
								}

								NOT = { character = PREVPREV }
							}
						}
					}

					character_event = { id = TOG.834 }
				}
			}
		}

		repeat_event = {
			id = TOG.809
			days = 5
		}
	}

	fail_trigger_effect = {
		character_event = {
			id = TOG.807 # Feast ends
			days = 7
		}
	}
}

# Feast Begins (Vassal)
character_event = {
	id = TOG.806
	desc = EVTDESC_TOG_806
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_705

		custom_tooltip = { text = feast_begins }
	}
}

# Feast Ends (Liege)
character_event = {
	id = TOG.807
	desc = EVTDESC_TOG_807
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_707

		any_vassal = {
			show_scope_change = no

			limit = { has_character_flag = attending_jarilo }

			opinion = {
				name = opinion_jarilo
				who = ROOT
			}

			character_event = { id = TOG.808 }
		}

		add_character_modifier = {
			name = held_jarilo_timer
			years = 5
			hidden = yes
		}

		prestige = 100
		piety = 100

		clr_character_flag = holding_jarilo
		clr_character_flag = attending_jarilo
		clr_character_flag = feast_drunkard
		clr_character_flag = feast_gluttonous
		clr_character_flag = feast_lunatic
		clr_character_flag = feast_lustful
		clr_character_flag = feast_homosexual
		clr_character_flag = do_not_disturb
	}
}

# Feast Ends (Vassal)
character_event = {
	id = TOG.808
	desc = EVTDESC_TOG_808
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_707

		clr_character_flag = attending_jarilo
		clr_character_flag = jarilo_feast_vassal
		clr_character_flag = feast_drunkard
		clr_character_flag = feast_gluttonous
		clr_character_flag = feast_lunatic
		clr_character_flag = feast_lustful
		clr_character_flag = feast_friendship
		clr_character_flag = feast_homosexual
		clr_character_flag = do_not_disturb
	}
}

### Ukon juhla Feast Events

# Drunkard (Guest)
character_event = {
	id = TOG.820
	desc = EVTDESC_TOG_650
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_TOG_650
		tooltip_info = drunkard

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = drunkard }

				opinion = {
					name = opinion_drinking_buddy
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			set_character_flag = feast_drunkard
			character_event = { id = TOG.821 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = jarilo_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = drunkard }

					opinion = {
						name = opinion_drinking_buddy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.821 }
			}
		}
	}
}

# Drunkard (Host and Other Guests)
character_event = {
	id = TOG.821
	desc = EVTDESC_TOG_651
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_651

		trigger = {
			NOT = { trait = drunkard }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_651
		tooltip_info = drunkard

		trigger = { trait = drunkard }

		tooltip = {
			opinion = {
				name = opinion_drinking_buddy
				who = FROM
			}
		}
	}
}

# Gluttonous (Guest)
character_event = {
	id = TOG.823
	desc = EVTDESC_TOG_653
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		liege = {
			set_character_flag = feast_gluttonous

			random_vassal = {
				limit = {
					NOT = { character = ROOT }
				}

				save_event_target_as = glutton_victim
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_653
		tooltip_info = gluttonous

		event_target:glutton_victim = {
			show_scope_change = no

			character_event = {
				id = TOG.824
				tooltip = EVTTOOLTIP_TOG_654
			}

			opinion = {
				name = opinion_vomit
				who = ROOT
			}
		}

		liege = {
			show_scope_change = no

			opinion = {
				name = opinion_feast_scandal
				who = ROOT
			}

			character_event = { id = TOG.825 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = jarilo_feast_vassal

					NOR = {
						character = ROOT
						character = event_target:glutton_victim
					}
				}

				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}

				character_event = { id = TOG.825 }
			}
		}
	}
}

# Gluttonous (Victim)
character_event = {
	id = TOG.824
	desc = EVTDESC_TOG_654
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_654

		tooltip = {
			opinion = {
				name = opinion_vomit
				who = FROM
			}
		}
	}
}

# Gluttonous (Host and Other Guests)
character_event = {
	id = TOG.825
	desc = EVTDESC_TOG_655
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_655

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}
}

# Lunatic (Guest)
character_event = {
	id = TOG.826
	desc = EVTDESC_TOG_656
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion

	hide_from = yes
	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_656
		tooltip_info = lunatic

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = lunatic }

				opinion = {
					name = opinion_feast_friend
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			set_character_flag = feast_lunatic
			character_event = { id = TOG.827 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = jarilo_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = lunatic }

					opinion = {
						name = opinion_feast_friend
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.827 }
			}
		}
	}
}

# Lunatic (Host and Other Guests)
character_event = {
	id = TOG.827
	desc = EVTDESC_TOG_657
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_657

		trigger = {
			NOT = { trait = lunatic }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = ROOT
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_657
		tooltip_info = lunatic

		trigger = { trait = lunatic }

		tooltip = {
			opinion = {
				name = opinion_feast_friend
				who = ROOT
			}
		}
	}
}

# Lustful (Guest)
character_event = {
	id = TOG.828
	desc = EVTDESC_TOG_658
	picture = GFX_evt_brothel
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	hide_from = yes

	immediate = {
		liege = {
			set_character_flag = feast_lustful
		}
	}

	option = {
		name = {
			text = EVTOPTA_TOG_658
			trigger = { is_married = no }
		}
		name = {
			text = EVTOPTB_TOG_658
			trigger = { is_married = yes }
		}

		tooltip_info = lustful

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = lustful }

				opinion = {
					name = opinion_lustful_buddy
					who = ROOT
				}
			}
			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			character_event = { id = TOG.829 }

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = jarilo_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = lustful }

					opinion = {
						name = opinion_lustful_buddy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}

				character_event = { id = TOG.829 }
			}
		}

		any_spouse = {
			show_scope_change = no

			opinion = {
				name = opinion_mad_as_hell
				who = ROOT
				years = 1
			}

			character_event = { id = TOG.829 }
		}
	}
}

# Lustful (Host and Other Guests)
character_event = {
	id = TOG.829
	desc = EVTDESC_TOG_659
	picture = GFX_evt_brothel
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_659

		trigger = {
			NOR = {
				trait = lustful
				is_married = FROM
			}
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_659
		tooltip_info = lustful

		trigger = {
			trait = lustful
			NOT = { is_married = FROM }
		}

		tooltip = {
			opinion = {
				name = opinion_lustful_buddy
				who = FROM
			}
		}
	}

	option = {
		name = EVTOPTC_TOG_659

		trigger = { is_married = FROM }

		tooltip = {
			opinion = {
				name = opinion_mad_as_hell
				who = FROM
				years = 1
			}
		}
	}
}

# Friendship Formed (Guest 1)
character_event = {
	id = TOG.831
	desc = EVTDESC_TOG_661
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		liege = {
			set_character_flag = feast_friendship

			random_vassal = {
				limit = {
					has_character_flag = jarilo_feast_vassal

					opinion = {
						who = ROOT
						value >= 20
					}

					NOT = { character = ROOT }
				}

				save_event_target_as = other_vassal_guest
				character_event = { id = TOG.832 }
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_661

		reverse_opinion = {
			name = opinion_feast_friend
			who = event_target:other_vassal_guest
		}

		opinion = {
			name = opinion_feast_friend
			who = event_target:other_vassal_guest
		}
	}
}

# Friendship Formed (Guest 2)
character_event = {
	id = TOG.832
	desc = EVTDESC_TOG_661
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {
		# For localisation in event description
		FROM = {
			save_event_target_as = other_vassal_guest
		}
	}

	option = {
		name = EVTOPTA_TOG_661

		tooltip = {
			reverse_opinion = {
				name = opinion_feast_friend
				who = FROM
			}

			opinion = {
				name = opinion_feast_friend
				who = FROM
			}
		}
	}
}

# Homosexual lovers (Guest 1)
character_event = {
	id = TOG.834
	desc = EVTDESC_TOG_664
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	portrait = event_target:second_homosexual_guest

	is_triggered_only = yes

	immediate = {
		save_event_target_as = first_homosexual_guest

		liege = {
			set_character_flag = feast_homosexual

			random_vassal = {
				limit = {
					trait = homosexual
					same_sex = ROOT
					has_character_flag = jarilo_feast_vassal

					opinion = {
						who = ROOT
						value >= 0
					}

					NOT = { character = ROOT }
				}

				save_event_target_as = second_homosexual_guest
				save_event_target_as = other_homosexual_guest # For loc
			}
		}
	}

	option = {
		name = EVTOPTA_TOG_664
		tooltip_info = homosexual

		event_target:second_homosexual_guest = {
			character_event = { id = TOG.835 }
		}

		add_lover = event_target:second_homosexual_guest

		random = {
			chance = 50

			custom_tooltip = { text = EVTTOOLTIP_TOG_669 }
		}
	}
}

# Homosexual lovers (Guest 2)
character_event = {
	id = TOG.835
	desc = EVTDESC_TOG_664
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion
	portrait = event_target:first_homosexual_guest

	is_triggered_only = yes

	immediate = {
		FROM = {
			save_event_target_as = other_homosexual_guest # For loc
		}
	}

	option = {
		name = EVTOPTA_TOG_664
		tooltip_info = homosexual

		random = {
			chance = 50

			custom_tooltip = {
				text = EVTTOOLTIP_TOG_669

				character_event = { id = TOG.839 }
				FROM = { character_event = { id = TOG.839 } }

				liege = {
					character_event = { id = TOG.840 }

					any_vassal = {
						limit = {
							has_character_flag = jarilo_feast_vassal

							NOR = {
								character = event_target:first_homosexual_guest
								character = event_target:second_homosexual_guest
							}
						}

						character_event = { id = TOG.840 }
					}
				}
			}
		}

		tooltip = {
			add_lover = FROM
		}
	}
}

# Homosexual Caught
character_event = {
	id = TOG.839
	desc = EVTDESC_TOG_669
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	option = {
		name = EVTOPTA_TOG_669

		liege = {
			show_scope_change = no

			if = {
				limit = { trait = homosexual }

				opinion = {
					name = opinion_homosexual_sympathy
					who = ROOT
				}
			}

			else = {
				opinion = {
					name = opinion_feast_scandal
					who = ROOT
				}
			}

			any_vassal = {
				show_scope_change = no

				limit = {
					has_character_flag = jarilo_feast_vassal
					NOT = { character = ROOT }
				}

				if = {
					limit = { trait = homosexual }

					opinion = {
						name = opinion_homosexual_sympathy
						who = ROOT
					}
				}
				else = {
					opinion = {
						name = opinion_feast_scandal
						who = ROOT
					}
				}
			}
		}
	}
}

# Homosexuals Caught (Host and Other Guests)
character_event = {
	id = TOG.840
	desc = EVTDESC_TOG_670
	picture = GFX_evt_viking_throneroom_oldgods
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTA_TOG_670

		trigger = {
			NOT = { trait = homosexual }
		}

		tooltip = {
			opinion = {
				name = opinion_feast_scandal
				who = event_target:first_homosexual_guest
			}

			opinion = {
				name = opinion_feast_scandal
				who = event_target:second_homosexual_guest
			}
		}
	}

	option = {
		name = EVTOPTB_TOG_670
		tooltip_info = homosexual

		trigger = { trait = homosexual }

		tooltip = {
			opinion = {
				name = opinion_homosexual_sympathy
				who = event_target:first_homosexual_guest
			}

			opinion = {
				name = opinion_homosexual_sympathy
				who = event_target:second_homosexual_guest
			}
		}
	}
}

###########################################
# Flag management                         #
###########################################

# Safety catch - clears character flags and modifiers
character_event = {
	id = TOG.899

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		clr_character_flag = do_not_disturb
		clr_character_flag = holding_ukon_juhla
		clr_character_flag = holding_jarilo
		clr_character_flag = holding_uzgavenes
		clr_character_flag = attending_ukon_juhla
		clr_character_flag = attending_jarilo
		clr_character_flag = attending_uzgavenes
		clr_character_flag = jarilo_feast_vassal
		clr_character_flag = ukon_juhla_feast_vassal
		clr_character_flag = uzgavenes_feast_vassal
		clr_character_flag = feast_drunkard
		clr_character_flag = feast_gluttonous
		clr_character_flag = feast_lunatic
		clr_character_flag = feast_lustful
		clr_character_flag = feast_homosexual
		clr_character_flag = feast_friendship
	}
}