# Written by Flavio

# IDs HF.25200 - HF.25301

namespace = HF


#############################################

## Alone ##
# Dice throwing (hellenics and bon)

## 1v1 ##
# Armwrestling
# Flyting (insult contest, only northern pagans)
# Drinking (no bon)

#############################################

# All chains are fired by on_society_bi_yearly_pulse, random_events

#############################################

			# Arm-wrestling. #

#############################################

# Warrior Lodge Member picks a challenger.
character_event = {
	id = HF.25200
	title = EVTTITLEHF25200
	desc = EVTDESCHF25200
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes # on_society_bi_yearly_pulse, random_events

	has_dlc = "Holy Fury"
	min_age = 16
	only_capable = yes
	prisoner = no
	in_command = no

	trigger = {
		is_member_of_any_warrior_lodge_trigger = yes
		is_inaccessible_trigger = no
		NOT = { has_character_modifier = arm_wrestling_challenge_cooldown }

		society = {
			any_society_member = { # Make sure there are enough contenders to pick.
				is_adult = yes
				in_command = no
				prisoner = no
				is_incapable = no
				is_inaccessible_trigger = no

				NOR = {
					has_character_modifier = arm_wrestling_challenge_cooldown
					character = ROOT
				}

				OR = {
					is_strong_trigger = yes
					trait = duelist
					trait = skilled_tactician
					trait = brilliant_strategist
					combat_rating >= 60
				}

				society = {
					any_society_member = {
						count >= 2

						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						is_strong_trigger = no
						has_lifestyle_martial_trigger = no
						combat_rating < 60

						NOR = {
							has_character_modifier = arm_wrestling_challenge_cooldown
							character = ROOT
							character = PREVPREV # Do not check for the same character.
						}
					}
				}
			}
		}
	}

	immediate = {
		random_list = {
			33 = { sound_effect = pagan_cheering_01 }
			33 = { sound_effect = pagan_cheering_02 }
			33 = { sound_effect = pagan_cheering_03 }
			33 = { sound_effect = warrior_lodge_ambient_02 }
		}

		hidden_effect = { # Pick potential contenders
			clr_character_flag = arm_wrestling_strong # Safety cleanup
			clr_character_flag = arm_wrestling_medium
			clr_character_flag = arm_wrestling_weak
			save_event_target_as = arm_wrestling_fighter_1

			society = {
				random_society_member = { # First pick a very strong guy.
					limit = {
						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						NOR = {
							has_character_modifier = arm_wrestling_challenge_cooldown
							character = ROOT
						}

						OR = {
							is_strong_trigger = yes
							trait = duelist
							trait = skilled_tactician
							trait = brilliant_strategist
							combat_rating >= 60
						}
					}
					preferred_limit = {
						ai = no
						is_strong_trigger = yes
						is_ill = no
						has_education_martial_trigger = yes
						has_lifestyle_martial_trigger = yes
						combat_rating >= 60
					}
					preferred_limit = {
						ai = no
						is_strong_trigger = yes
						has_education_martial_trigger = yes
						has_lifestyle_martial_trigger = yes
						combat_rating >= 60
					}
					preferred_limit = {
						ai = no
						is_strong_trigger = yes
						OR = {
							has_education_martial_trigger = yes
							has_lifestyle_martial_trigger = yes
						}
						combat_rating >= 60
					}
					preferred_limit = {
						ai = no
						OR = {
							is_strong_trigger = yes
							has_education_martial_trigger = yes
							has_lifestyle_martial_trigger = yes
						}
						combat_rating >= 60
					}
					preferred_limit = {
						ai = no
						combat_rating >= 60
					}
					preferred_limit = {
						is_strong_trigger = yes
						is_ill = no
						has_education_martial_trigger = yes
						has_lifestyle_martial_trigger = yes
						combat_rating >= 20
					}
					preferred_limit = {
						is_strong_trigger = yes
						has_education_martial_trigger = yes
						has_lifestyle_martial_trigger = yes
						combat_rating >= 20
					}
					preferred_limit = {
						is_strong_trigger = yes
						OR = {
							has_education_martial_trigger = yes
							has_lifestyle_martial_trigger = yes
						}
						combat_rating >= 20
					}
					preferred_limit = {
						OR = {
							is_strong_trigger = yes
							has_education_martial_trigger = yes
							has_lifestyle_martial_trigger = yes
						}
						combat_rating >= 20
					}
					preferred_limit = {
						ai = no
						is_strong_trigger = yes
						is_ill = no
						has_education_martial_trigger = yes
						has_lifestyle_martial_trigger = yes
						combat_rating >= 20
					}
					preferred_limit = {
						ai = no
						is_strong_trigger = yes
						has_education_martial_trigger = yes
						has_lifestyle_martial_trigger = yes
						combat_rating >= 20
					}
					preferred_limit = {
						ai = no
						is_strong_trigger = yes
						OR = {
							has_education_martial_trigger = yes
							has_lifestyle_martial_trigger = yes
						}
						combat_rating >= 20
					}
					preferred_limit = {
						ai = no
						OR = {
							is_strong_trigger = yes
							has_education_martial_trigger = yes
							has_lifestyle_martial_trigger = yes
						}
						combat_rating >= 20
					}
					preferred_limit = {
						ai = no
						combat_rating >= 20
					}
					preferred_limit = {
						combat_rating >= 90
					}
					preferred_limit = {
						combat_rating >= 60
					}
					preferred_limit = {
						combat_rating >= 20
					}
					preferred_limit = {
						combat_rating >= 10
					}
					preferred_limit = {
						combat_rating >= 0
					}
					preferred_limit = {
						is_weak_trigger = no
					}
					preferred_limit = {
						trait = brave
					}
					clr_character_flag = arm_wrestling_strong # Safety cleanup
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					save_event_target_as = arm_wrestling_opponent_1
				}
				random_society_member = { # Second pick a weakling.
					limit = {
						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						is_strong_trigger = no
						has_lifestyle_martial_trigger = no
						has_education_martial_trigger = no
						combat_rating < 25

						NOR = {
							has_character_modifier = arm_wrestling_challenge_cooldown
							character = ROOT
							character = event_target:arm_wrestling_opponent_1
						}
					}
					preferred_limit = {
						ai = no
						is_ill = yes
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 0
					}
					preferred_limit = {
						ai = no
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 0
					}
					preferred_limit = {
						ai = no
						is_weak_trigger = yes
						combat_rating < 0
					}
					preferred_limit = {
						ai = no
						trait = craven
						combat_rating < 0
					}
					preferred_limit = {
						is_ill = yes
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 0
					}
					preferred_limit = {
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 0
					}
					preferred_limit = {
						is_weak_trigger = yes
						combat_rating < 0
					}
					preferred_limit = {
						trait = craven
						combat_rating < 0
					}
					preferred_limit = {
						ai = no
						is_ill = yes
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 20
					}
					preferred_limit = {
						ai = no
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 20
					}
					preferred_limit = {
						ai = no
						is_weak_trigger = yes
						combat_rating < 20
					}
					preferred_limit = {
						ai = no
						trait = craven
						combat_rating < 20
					}
					preferred_limit = {
						is_ill = yes
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 20
					}
					preferred_limit = {
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 20
					}
					preferred_limit = {
						is_weak_trigger = yes
						combat_rating < 20
					}
					preferred_limit = {
						trait = craven
						combat_rating < 20
					}
					preferred_limit = {
						ai = no
						is_ill = yes
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 40
					}
					preferred_limit = {
						ai = no
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 40
					}
					preferred_limit = {
						ai = no
						is_weak_trigger = yes
						combat_rating < 40
					}
					preferred_limit = {
						ai = no
						trait = craven
						combat_rating < 40
					}
					preferred_limit = {
						is_ill = yes
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 40
					}
					preferred_limit = {
						practical_age >= 40
						is_weak_trigger = yes
						combat_rating < 40
					}
					preferred_limit = {
						is_weak_trigger = yes
						combat_rating < 40
					}
					preferred_limit = {
						trait = craven
						combat_rating < 40
					}
					clr_character_flag = arm_wrestling_strong # Safety cleanup
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					save_event_target_as = arm_wrestling_opponent_3
				}
				random_society_member = { # Third pick an average guy.
					limit = {
						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						is_strong_trigger = no
						has_lifestyle_martial_trigger = no
						combat_rating < 80

						NOR = {
							has_character_modifier = arm_wrestling_challenge_cooldown
							character = ROOT
							character = event_target:arm_wrestling_opponent_1
							character = event_target:arm_wrestling_opponent_3
						}
					}
					preferred_limit = {
						ai = no
						is_ill = no
						has_education_martial_trigger = yes
						combat_rating >= 60
					}
					preferred_limit = {
						ai = no
						has_education_martial_trigger = yes
						combat_rating >= 60
					}
					preferred_limit = {
						ai = no
						combat_rating >= 60
					}
					preferred_limit = {
						ai = no
						is_ill = no
						has_education_martial_trigger = yes
						combat_rating >= 25
					}
					preferred_limit = {
						ai = no
						has_education_martial_trigger = yes
						combat_rating >= 25
					}
					preferred_limit = {
						ai = no
						combat_rating >= 25
					}
					preferred_limit = {
						is_ill = no
						has_education_martial_trigger = yes
						combat_rating >= 60
					}
					preferred_limit = {
						has_education_martial_trigger = yes
						combat_rating >= 60
					}
					preferred_limit = {
						combat_rating >= 60
					}
					preferred_limit = {
						is_ill = no
						has_education_martial_trigger = yes
						combat_rating >= 25
					}
					preferred_limit = {
						has_education_martial_trigger = yes
						combat_rating >= 25
					}
					preferred_limit = {
						combat_rating >= 25
					}
					preferred_limit = {
						is_ill = no
						has_education_martial_trigger = yes
						combat_rating >= 0
					}
					preferred_limit = {
						has_education_martial_trigger = yes
						combat_rating >= 0
					}
					preferred_limit = {
						combat_rating >= 0
					}
					preferred_limit = {
						is_weak_trigger = no
					}
					clr_character_flag = arm_wrestling_strong # Safety cleanup
					clr_character_flag = arm_wrestling_medium
					clr_character_flag = arm_wrestling_weak
					save_event_target_as = arm_wrestling_opponent_2
				}
			}

			# Then assign flag to determine what kind of opponent you are.
			if = {
				limit = {
					OR = {
						is_strong_trigger = yes
						combat_rating >= 60
					}
				}
				set_character_flag = arm_wrestling_strong
			}
			else_if = {
				limit = {
					OR = {
						is_weak_trigger = yes
						combat_rating < 25
					}
				}
				set_character_flag = arm_wrestling_weak
			}
			else = {
				set_character_flag = arm_wrestling_medium
			}

			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
		}
	}

	option = {
		name = EVTOPTAHF25200
		trigger = { event_target:arm_wrestling_opponent_1 = { always = yes } }
		custom_tooltip = { text = TT_EVTOPTAHF25200 }

		event_target:arm_wrestling_opponent_1 = {
			save_event_target_as = arm_wrestling_fighter_2
			set_character_flag = arm_wrestling_strong
			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
			character_event = { id = HF.25201 }
		}

		ai_chance = { factor = 10 }
	}

	option = {
		name = EVTOPTBHF25200
		trigger = { event_target:arm_wrestling_opponent_2 = { always = yes } }
		custom_tooltip = { text = TT_EVTOPTBHF25200 }

		event_target:arm_wrestling_opponent_2 = {
			save_event_target_as = arm_wrestling_fighter_2
			set_character_flag = arm_wrestling_medium
			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
			character_event = { id = HF.25201 }
		}

		ai_chance = { factor = 20 }
	}

	option = {
		name = EVTOPTCHF25200
		custom_tooltip = { text = TT_EVTOPTCHF25200 }
		trigger = { event_target:arm_wrestling_opponent_3 = { always = yes } }

		if = {
			limit = { has_character_flag = arm_wrestling_strong }
			tiered_prestige_negative_effect = yes
		}

		event_target:arm_wrestling_opponent_3 = {
			save_event_target_as = arm_wrestling_fighter_2
			set_character_flag = arm_wrestling_weak
			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
			character_event = { id = HF.25201 }
		}

		ai_chance = {
			factor = 30

			mult_modifier = {
				factor = 2
				trait = craven
			}
			mult_modifier = {
				factor = 0.5
				trait = brave
			}
		}
	}

	option = { # Not interested. -End of line.
		name = EVTOPTDHF25200

		tiered_prestige_negative_effect = yes

		trigger_switch = {
			on_trigger = has_character_flag
			arm_wrestling_strong = { detract_society_currency_medium_effect = yes }
			arm_wrestling_medium = { detract_society_currency_minor_effect = yes }
			arm_wrestling_weak =   { detract_society_currency_tiny_effect = yes }
		}

		warrior_lodge_arm_wrestling_cleanup_effect = yes

		ai_chance = { factor = 0 }
	}
}

# Second warrior receives challenge.
character_event = {
	id = HF.25201
	title = EVTTITLEHF25200
	desc = EVTDESCHF25201
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Accept Challenge.
		name = EVTOPTAHF25201
		show_portrait = FROM
		custom_tooltip = { text = TT_EVTOPTAHF25201 }

		FROM = { character_event = { id = HF.25203 } }

		hidden_effect = {
			add_character_modifier = {
				name = arm_wrestling_challenge_cooldown
				hidden = yes
				years = 2
			}
			FROM = {
				add_character_modifier = {
					name = arm_wrestling_challenge_cooldown
					hidden = yes
					years = 2
				}
			}
		}

		ai_chance = { factor = 95 }
	}

	option = { # Not interested. -End of line.
		name = EVTOPTBHF25201

		tiered_prestige_negative_effect = yes

		trigger_switch = {
			on_trigger = has_character_flag
			arm_wrestling_strong = { detract_society_currency_medium_effect = yes }
			arm_wrestling_medium = { detract_society_currency_minor_effect = yes }
			arm_wrestling_weak =   { detract_society_currency_tiny_effect = yes }
		}

		if = {
			limit = { trait = craven }

			custom_tooltip = { text = TT_EVTOPTBHF25201 }
			hidden_effect = {
				society = {
					any_society_member = {
						limit = { NOT = { character = ROOT } }

						opinion = {
							name = opinion_coward
							who = ROOT
							years = 5
						}
					}
				}
			}
		}

		random = {
			chance = 5
			add_trait_partially_craven_effect = yes
		}

		FROM = { character_event = { id = HF.25202 } } # Notify.

		ai_chance = {
			factor = 5

			mult_modifier = {
				factor = 5
				trait = craven
			}
		}
	}
}

# First character notified that the challenge is off.
character_event = {
	id = HF.25202
	title = EVTTITLEHF25200
	desc = EVTDESCHF25202
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = {
		name = EVTOPTAHF25202

		tiered_prestige_reward_effect = yes
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}
}

# First character: challenge begins.
character_event = {
	id = HF.25203
	title = EVTTITLEHF25200
	desc = EVTDESCHF25203
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	immediate = {
		FROM = { character_event = { id = HF.25204 } } # Notify opponent.
	}

	option = { # Begin.
		name = EVTOPTAHF25203
	}
}

# Copy of above, opponent notified.
character_event = {
	id = HF.25204
	title = EVTTITLEHF25200
	desc = EVTDESCHF25203
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Begin.
		name = EVTOPTAHF25203

		warrior_lodge_arm_wrestling_first_round_effect = yes
	}
}

# Post-first round: Either character is losing.
character_event = {
	id = HF.25205
	title = EVTTITLEHF25200
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCAHF25205
		trigger = { character = event_target:arm_wrestling_fighter_1 }
	}
	desc = {
		text = EVTDESCBHF25205
		trigger = { character = event_target:arm_wrestling_fighter_2 }
	}

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Slide elbow.
		name = EVTOPTAHF25205
		tooltip_info = intrigue
		trigger = { intrigue >= 8 }
		custom_tooltip = { text = TOOLTIP_EVTOPTDHF25205 }

		FROM = { character_event = { id = HF.25206 } }

		ai_chance = { factor = 100 }
	}

	option = { # Charm distraction.
		name = {
			text = EVTOPTBHF25205_A
			trigger = {
				is_female = no
				character = event_target:arm_wrestling_fighter_1
			}
		}
		name = {
			text = EVTOPTBHF25205_B
			trigger = {
				is_female = no
				character = event_target:arm_wrestling_fighter_2
			}
		}
		name = {
			text = EVTOPTCHF25205
			trigger = { is_female = yes }
		}

		tooltip_info_custom = available_because_pretty
		trigger = { is_attractive_trigger = yes }
		custom_tooltip = { text = TOOLTIP_EVTOPTDHF25205 }

		FROM = { character_event = { id = HF.25209 } }

		ai_chance = {
			factor = 50

			trigger = {
				NOT = { trait = celibate }
				FROM = { root_attraction_trigger = yes }
			}
		}
	}

	option = { # Cheap distraction.
		name = EVTOPTDHF25205
		custom_tooltip = { text = TOOLTIP_EVTOPTDHF25205 }

		detract_society_currency_trivial_effect = yes

		FROM = { character_event = { id = HF.25212 } }

		ai_chance = {
			factor = 10

			trigger = {
				NOR = {
					trait = just
					trait = honest
				}
			}

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 1.5
				trait = deceitful
			}

		}
	}

	option = { # Just Resist.
		name = EVTOPTEHF25205

		add_society_currency_trivial_effect = yes
		warrior_lodge_arm_wrestling_second_round_effect = yes # Decide who wins.

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 2
				trait = just
			}
			mult_modifier = {
				factor = 2
				trait = honest
			}
		}
	}
}

# Opponent is cheating sneakily.
character_event = {
	id = HF.25206
	title = EVTTITLEHF25200
	desc = EVTDESCHF25206
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Saw it!
		name = EVTOPTAHF25206
		tooltip_info = intrigue
		trigger = { intrigue >= 13 }
	}

	option = { # Saw it!
		name = EVTOPTAHF25206
		tooltip_info = genius

		trigger = {
			trait = genius
			intrigue < 13
		}
	}

	option = { # Saw it!
		name = EVTOPTAHF25206
		tooltip_info = quick

		trigger = {
			trait = quick
			intrigue < 13
			NOT = { trait = genius }
		}
	}

	option = { # Saw it!
		name = EVTOPTAHF25206
		tooltip_info = shrewd

		trigger = {
			trait = shrewd
			intrigue < 13

			NOR = {
				trait = quick
				trait = genius
			}
		}
	}

	option = { # How could this be?!
		name = EVTOPTBHF25206
		trigger = { is_dumb_trigger = no }

		set_character_flag = wl_arm_wrestling_being_tricked_1
	}

	option = { # What is happening?
		name = EVTOPTCHF25206
		tooltip_info_custom = available_because_dumb
		trigger = { is_dumb_trigger = yes }

		set_character_flag = wl_arm_wrestling_being_tricked_2
	}

	after = {
		warrior_lodge_arm_wrestling_second_round_effect = yes # Decide who wins.
	}
}

# Opponent tried to charm-trick.
character_event = {
	id = HF.25209
	title = EVTTITLEHF25200
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCAHF25209
		trigger = {
			FROM = { is_female = yes }
		}
	}
	desc = {
		text = EVTDESCBHF25209
		trigger = {
			FROM = { is_female = no }
		}
	}

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Not interested.
		name = EVTOPTAHF25209
		tooltip_info = celibate
		trigger = { trait = celibate }

		ai_chance = { factor = 100 }
	}

	option = { # Not interested.
		name = EVTOPTBHF25209
		tooltip_info = chaste

		trigger = {
			NOT = { trait = celibate }
			trait = chaste

			OR = {
				is_married = yes
				has_lover = yes
			}

			NOR = {
				is_married = FROM
				is_lover = FROM
			}
		}

		ai_chance = { factor = 100 }
	}

	option = { # Wrong sex.
		name = EVTOPTCHF25209

		trigger = {
			FROM = { root_attraction_trigger = no }
		}

		ai_chance = { factor = 100 }
	}

	option = { # Failed check.
		name = EVTOPTDHF25209
		trigger = {
			NOT = { trait = lustful }

			FROM = { root_attraction_trigger = yes }
		}

		set_character_flag = wl_arm_wrestling_being_tricked_1

		ai_chance = { factor = 10 }
	}

	option = { # Critical Fail check.
		name = {
			text = EVTOPTEHF25209_A
			trigger = {
				FROM = { is_female = yes }
			}
		}
		name = {
			text = EVTOPTEHF25209_B
			trigger = {
				FROM = { is_female = no }
			}
		}

		tooltip_info = lustful

		trigger = {
			trait = lustful
			FROM = { root_attraction_trigger = yes }
		}

		set_character_flag = wl_arm_wrestling_being_tricked_2

		ai_chance = { factor = 10 }
	}

	after = {
		warrior_lodge_arm_wrestling_second_round_effect = yes # Decide who wins.
	}
}

# Opponent used cheap trick.
character_event = {
	id = HF.25212
	title = EVTTITLEHF25200
	desc = EVTDESCHF25212
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Do you think I am that stupid?
		name = EVTOPTAHF25212
		trigger = { is_dumb_trigger = no }
	}

	option = { # Actually, I am.
		name = EVTOPTBHF25212
		tooltip_info_custom = available_because_dumb
		trigger = { is_dumb_trigger = yes }

		set_character_flag = wl_arm_wrestling_being_tricked_1
	}

	after = {
		warrior_lodge_arm_wrestling_second_round_effect = yes # Decide who wins.
	}
}

# Second round over: the winner is notified of victory.
character_event = {
	id = HF.25215
	title = EVTTITLEHF25200
	desc = EVTDESCHF25215
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		event_target:wl_arm_wrestling_loser = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Mock loser.
		name = EVTOPTAHF25215
		custom_tooltip = { text = TT_EVTOPTAHF25215 }

		# Influence reward based on opponent's strength.
		if = {
			limit = {
				event_target:wl_arm_wrestling_loser = {
					has_character_flag = arm_wrestling_strong
				}
			}

			add_society_currency_minor_effect = yes

			hidden_effect = { # If defeated a strong guy, gain nickname.
				if = {
					limit = {
						this_has_average_nickname_trigger = no
						this_has_cool_nickname_trigger = no
						this_has_super_cool_nickname_trigger = no
					}
					random_list = {
						25 = { give_nickname = nick_the_strongarm }
						25 = { give_nickname = nick_the_iron_grip }
						25 = { give_nickname = nick_the_knuckle_slammer }
						25 = { give_nickname = nick_the_gods_arm }
						25 = { give_nickname = nick_the_bone_squeezer }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_bull
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_butch
						}
						15 = { }
					}
				}
			}
		}
		else_if = {
			limit = {
				event_target:wl_arm_wrestling_loser = {
					has_character_flag = arm_wrestling_medium
				}
			}
			add_society_currency_tiny_effect = yes
		}
		else = {
			add_society_currency_trivial_effect = yes
		}

		tooltip = {
			reverse_opinion = {
				name = opinion_lousy_winner
				who = event_target:wl_arm_wrestling_loser
				years = 5
			}
		}

		# Notify loser.
		event_target:wl_arm_wrestling_loser = { character_event = { id = HF.25216 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				is_evil_trigger = yes
			}
		}
	}

	option = { # Kind to loser.
		name = EVTOPTBHF25215

		# Influence reward based on opponent's strength.
		if = {
			limit = {
				event_target:wl_arm_wrestling_loser = {
					has_character_flag = arm_wrestling_strong
				}
			}

			add_society_currency_tiny_effect = yes

			hidden_effect = { # If defeated a strong guy, gain nickname.
				if = {
					limit = {
						this_has_average_nickname_trigger = no
						this_has_cool_nickname_trigger = no
						this_has_super_cool_nickname_trigger = no
					}
					random_list = {
						25 = { give_nickname = nick_the_strongarm }
						25 = { give_nickname = nick_the_iron_grip }
						25 = { give_nickname = nick_the_knuckle_slammer }
						25 = { give_nickname = nick_the_gods_arm }
						25 = { give_nickname = nick_the_bone_squeezer }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_bull
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_butch
						}
						15 = { }
					}
				}
			}
		}
		else_if = {
			limit = {
				event_target:wl_arm_wrestling_loser = {
					has_character_flag = arm_wrestling_medium
				}
			}
			add_society_currency_trivial_effect = yes
		}
		else = {
			prestige = 10
		}

		tooltip = {
			reverse_opinion = {
				name = opinion_kind_winner
				who = event_target:wl_arm_wrestling_loser
				years = 5
			}
		}

		# Notify loser.
		event_target:wl_arm_wrestling_loser = { character_event = { id = HF.25217 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				is_benevolent_trigger = yes
			}
		}
	}

	after = {
		add_legend_progress_trivial_effect = yes
		post_arm_wrestling_flavor_effect = yes
	}
}

# You lost. Mocked by winner.
character_event = {
	id = HF.25216
	title = EVTTITLEHF25200
	desc = EVTDESCHF25216
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = { # Special option. - character starts duel!
		name = EVTOPTYHF25216
		trigger = { this_can_duel_with_from_trigger = yes }
		custom_tooltip = { text = tooltip_22022_Y }

		opinion = {
			name = opinion_antagonized_3
			who = FROM
			years = 15
		}

		# REQUIRED event targets for setting up duel evaluation!
		hidden_effect = {
			save_event_target_as = combatant_1 # the person issuing the duel...
			FROM = { save_event_target_as = combatant_2 } # the target of the duel...
		}

		FROM = {
			show_scope_change = no
			apply_degree_of_dishonorable_duel_effect = yes  # checks a bunch of age and health statuses...
		}

		pacifists_lose_piety_effect = yes

		add_character_modifier = {
			name = recent_duel_timer
			years = 1
			hidden = yes
		}

		FROM = { character_event = { id = HFP.10095 days = 1 } } # Duel evaluation (hidden) + result event as follow-up.

		ai_chance = {
			factor = 40

			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			mult_modifier = {
				factor = 1.5
				trait = brave
			}
			mult_modifier = {
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = FROM value >= 5 }
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = FROM value >= 10 }
			}
			mult_modifier = {
				factor = 1.5
				combat_rating_diff = { character = FROM value >= 15 }
			}
			mult_modifier = {
				factor = 1.75
				combat_rating_diff = { character = FROM value >= 20 }
			}
		}
	}

	option = {
		name = EVTOPTAHF25216

		# Influence penalty based on opponent's strength.
		if = {
			limit = {
				FROM = { has_character_flag = arm_wrestling_strong }
			}
			detract_society_currency_minor_effect = yes
		}
		else_if = {
			limit = {
				FROM = { has_character_flag = arm_wrestling_medium }
			}
			detract_society_currency_tiny_effect = yes
		}
		else = {
			detract_society_currency_trivial_effect = yes

			hidden_effect = { # If defeated by a weak guy, gain nickname.
				if = {
					limit = { has_nickname = no }
					random_list = {
						25 = { give_nickname = nick_the_feeble }
						25 = { give_nickname = nick_the_milkdrinker }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_girls_arm
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_flower
						}
						25 = { }
					}
				}
			}
		}

		opinion = {
			name = opinion_lousy_winner
			who = FROM
			years = 5
		}

		custom_tooltip = { text = TT_EVTOPTAHF25216 }

		hidden_effect = {
			society = {
				any_society_member = {
					limit = {
						is_adult = yes

						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_loser
						who = ROOT
						years = 2
					}
				}
			}
		}

		warrior_lodge_arm_wrestling_cleanup_effect = yes

		ai_chance = { factor = 100 }
	}
}

# You lost, but the winner is polite.
character_event = {
	id = HF.25217
	title = EVTTITLEHF25200
	desc = EVTDESCHF25217
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}

	option = {
		name = EVTOPTAHF25217

		# Influence penalty based on opponent's strength.
		if = {
			limit = {
				FROM = { has_character_flag = arm_wrestling_strong }
			}
			detract_society_currency_minor_effect = yes
		}
		else_if = {
			limit = {
				FROM = { has_character_flag = arm_wrestling_medium }
			}
			detract_society_currency_tiny_effect = yes
		}
		else = {
			detract_society_currency_trivial_effect = yes

			hidden_effect = { # If defeated by a weak guy, gain nickname.
				if = {
					limit = {
						has_nickname = no
					}
					random_list = {
						25 = { give_nickname = nick_the_feeble }
						25 = { give_nickname = nick_the_milkdrinker }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_girls_arm
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_flower
						}
						25 = { }
					}
				}
			}
		}

		opinion = {
			name = opinion_kind_winner
			who = FROM
			years = 5
		}

		warrior_lodge_arm_wrestling_cleanup_effect = yes
	}
}

#######################################################################
# Post-competition events.

### Lover events

# Random society member sees winner and falls in love.
character_event = {
	id = HF.25218
	desc = EVTDESCAHF25218
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	option = { # Approach them.
		name = EVTOPTAHF25218
		custom_tooltip = { text = TT_EVTOPTAHF25218 }

		FROM = { character_event = { id = HF.25219 } }
	}

	option = { # Do nothing.
		name = EVTOPTBHF25218

		ai_chance = { factor = 0 }
	}
}

# Winner is approached. Reciprocate?
character_event = {
	id = HF.25219
	desc = EVTDESCAHF25219
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	option = { # Yes.
		name = EVTOPTAHF25219

		add_lover = FROM

		FROM = { character_event = { id = HF.25220 } }

		ai_chance = {
			factor = 70

			trigger = {
				FROM = { root_attraction_trigger = yes } # Incompatible

				NOR = { # Uninterested
					trait = celibate

					AND = {
						trait = chaste
						is_married = yes
						NOT = { is_married = FROM }
					}
				}
			}

			mult_modifier = {
				factor = 0.85
				practical_age < 30
				FROM = { practical_age >= 30 }
			}
			mult_modifier = {
				factor = 0.75
				practical_age < 40
				FROM = { practical_age >= 40 }
			}
			mult_modifier = {
				factor = 0.75
				practical_age < 50
				FROM = { practical_age >= 50 }
			}
			mult_modifier = {
				factor = 1.5
				FROM = { is_attractive_trigger = yes }
			}
			mult_modifier = {
				factor = 0.35
				FROM = { is_unattractive_trigger = yes }
			}
			mult_modifier = {
				factor = 1.5
				FROM = { has_fair_trait_trigger = yes }
			}
			mult_modifier = {
				factor = 1.5
				FROM = { trait = strong }
			}
			mult_modifier = {
				factor = 1.5
				FROM = { is_strong_trigger = yes }
			}
			mult_modifier = {
				factor = 0.5
				FROM = { is_weak_trigger = yes }
			}
		}
	}

	option = { # No.
		name = EVTOPTBHF25219

		FROM = { character_event = { id = HF.25221 } }

		ai_chance = {
			factor = 30

			trigger = {
				NOT = { trait = lustful }
			}
		}
	}
}

# Reciprocated.
character_event = {
	id = HF.25220
	desc = EVTDESCAHF25220
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	ai = no

	trigger = {
		FROM = { is_alive = yes }
	}

	option = {
		name = EVTOPTAHF25220

		tooltip = { add_lover = FROM }
	}
}

# Rejected.
character_event = {
	id = HF.25221
	desc = EVTDESCAHF25221
	picture = GFX_evt_quarrel
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	option = { # Special option. - character starts duel!
		name = EVTOPTYHF25221
		trigger = { this_can_duel_with_from_trigger = yes }
		custom_tooltip = { text = tooltip_22022_Y }

		opinion = {
			name = opinion_antagonized_3
			who = FROM
			years = 15
		}

		# REQUIRED event targets for setting up duel evaluation!
		hidden_effect = {
			save_event_target_as = combatant_1 # the person issuing the duel...
			FROM = { save_event_target_as = combatant_2 } # the target of the duel...
		}
		FROM = {
			show_scope_change = no
			apply_degree_of_dishonorable_duel_effect = yes  # checks a bunch of age and health statuses...
		}

		pacifists_lose_piety_effect = yes

		add_character_modifier = {
			name = recent_duel_timer
			years = 1
			hidden = yes
		}

		FROM = { character_event = { id = HFP.10095 days = 1 } } # Duel evaluation (hidden) + result event as follow-up.

		ai_chance = {
			factor = 40

			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			mult_modifier = {
				factor = 1.5
				trait = brave
			}
			mult_modifier = {
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = FROM value >= 5 }
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = FROM value >= 10 }
			}
			mult_modifier = {
				factor = 1.5
				combat_rating_diff = { character = FROM value >= 15 }
			}
			mult_modifier = {
				factor = 1.75
				combat_rating_diff = { character = FROM value >= 20 }
			}
		}
	}

	option = {
		name = EVTOPTAHF25221

		if = {
			limit = { is_evil_trigger = no }

			random = {
				chance = 15
				add_trait_depressed_effect = yes
			}
		}

		ai_chance = { factor = 50 }
	}
}

### Friendship events

# Random society member sees winner and declares friendship.
character_event = {
	id = HF.25222
	desc = EVTDESCAHF25222
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	option = { # Approach him.
		name = EVTOPTAHF25222
		custom_tooltip = { text = TT_EVTOPTAHF25222 }

		FROM = { character_event = { id = HF.25223 } }
	}

	option = { # Do nothing.
		name = EVTOPTBHF25222
		ai_chance = { factor = 0 }
	}
}

# Winner is approached. Reciprocate?
character_event = {
	id = HF.25223
	desc = EVTDESCAHF25223
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	option = { # Yes.
		name = EVTOPTAHF25223

		add_friend = FROM
		FROM = { character_event = { id = HF.25224 } }

		ai_chance = {
			factor = 70

			mult_modifier = { # CleanSlate: might age_diff make more sense here?
				factor = 0.85
				practical_age < 30
				FROM = { practical_age >= 30 }
			}
			mult_modifier = {
				factor = 0.75
				practical_age < 40
				FROM = { practical_age >= 40 }
			}
			mult_modifier = {
				factor = 0.75
				practical_age < 50
				FROM = { practical_age >= 50 }
			}
			mult_modifier = {
				factor = 1.5
				is_smart_trigger = yes
				FROM = { is_smart_trigger = yes }
			}
			mult_modifier = {
				factor = 1.5
				FROM = { is_strong_trigger = yes }
			}
			mult_modifier = {
				factor = 0.5
				FROM = { is_weak_trigger = yes }
			}
			mult_modifier = {
				factor = 0.5
				FROM = { has_at_least_3_traits_opposite_prev_trigger = yes }
			}
		}
	}

	option = { # No.
		name = EVTOPTBHF25223

		FROM = { character_event = { id = HF.25225 } }

		ai_chance = {
			factor = 30

			trigger = {
				NOT = { trait = lustful } # TODO: This seems like a copy/paste error. Gregarious maybe?
			}
		}
	}
}

# Reciprocated.
character_event = {
	id = HF.25224
	desc = EVTDESCAHF25224
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	ai = no

	trigger = {
		FROM = { is_alive = yes }
	}

	option = {
		name = EVTOPTAHF25224

		tooltip = { add_friend = FROM }
	}
}

# Rejected.
character_event = {
	id = HF.25225
	desc = EVTDESCAHF25225
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	option = {
		name = EVTOPTAHF25225

		if = {
			limit = { is_evil_trigger = no }

			random = {
				chance = 15
				add_trait_stressed_effect = yes
			}
		}
	}
}

#############################################

			# Dice-throwing #

#############################################

# Warrior Lodge Member is offered chance to start.
character_event = {
	id = HF.25226
	title = EVTTITLEHF25226
	desc = EVTDESCHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes # on_society_bi_yearly_pulse, random_events

	ai = no
	min_age = 16
	only_capable = yes
	in_command = no
	prisoner = no

	trigger = {
		is_inaccessible_trigger = no
		wealth >= 75

		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	immediate = {
		random_list = {
			25 = { sound_effect = pagan_cheering_01 }
			25 = { sound_effect = pagan_cheering_02 }
			25 = { sound_effect = pagan_cheering_03 }
			25 = { sound_effect = warrior_lodge_ambient_02 }
		}

		warrior_lodge_dice_game_cleanup_effect = yes
	}

	option = { # Start playing.
		name = EVTOPTAHF25226

		character_event = { id = HF.25228 }
	}

	option = { # Refuse to join.
		name = EVTOPTBHF25226

		detract_society_currency_minor_effect = yes
	}
}

# Decide how much to bet. - Integrated in event below.
# character_event = {
#	id = HF.25227
#	title = EVTTITLEHF25226
#	desc = EVTDESCHF25227
#	picture = GFX_evt_camaraderie
#	border = GFX_event_normal_frame_diplomacy
#
#	is_triggered_only = yes
#
#	trigger = {
#		OR = {
#			society_member_of = warrior_lodge_bon
##			society_member_of = warrior_lodge_hellenic
#		}
#	}
#
#	option = { #
#		name = EVTOPTAHF25227
#		trigger = { wealth = 500 }
#		custom_tooltip = { text = TT_EVTOPTAHF25227 }
#		set_character_flag = flag_betting_money_500
#	}
#	option = { #
#		name = EVTOPTBHF25227
#		trigger = { wealth = 250 }
#		custom_tooltip = { text = TT_EVTOPTBHF25227 }
#		set_character_flag = flag_betting_money_250
#	}
#	option = { #
#		name = EVTOPTCHF25227
#		custom_tooltip = { text = TT_EVTOPTCHF25227 }
#		set_character_flag = flag_betting_money_100
#	}
#	option = { #
#		name = EVTOPTDHF25227
#		custom_tooltip = { text = TT_EVTOPTDHF25227 }
#		set_character_flag = flag_betting_money_50
#	}
#	after = {
#		character_event = { id = HF.25228 }
#	}
# }

# Decide what side to bet on. (from highest to lowest stake).
character_event = {
	id = HF.25228
	title = EVTTITLEHF25226
	desc = EVTDESCHF25228
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	option = {
		name = {
			text = EVTOPTDHF25228
			trigger = { society_member_of = warrior_lodge_bon }
		}
		name = {
			text = EVTOPTDHF25228_HELLENIC # Dionysus
			trigger = { society_member_of = warrior_lodge_hellenic }
		}

		trigger = {
			trigger_if = {
				limit = {
					is_tribal = no
					is_nomadic = no
				}
				wealth >= 500
			}
			trigger_else = {
				wealth >= 100
			}
		}

		custom_tooltip = { text = tooltip_betting_hardest_side }
		set_character_flag = flag_betting_on_kali

		if = {
			limit = {
				is_tribal = no
				is_nomadic = no
			}

			custom_tooltip = {
				text = tooltip_betting_500_gold
				set_variable = { which = local_betting_money value = 500 }
			}
		}
		else = {
			custom_tooltip = {
				text = tooltip_betting_100_gold
				set_variable = { which = local_betting_money value = 100 }
			}
		}
	}

	option = {
		name = {
			text = EVTOPTCHF25228
			trigger = { society_member_of = warrior_lodge_bon }
		}
		name = {
			text = EVTOPTCHF25228_HELLENIC # Hermes
			trigger = { society_member_of = warrior_lodge_hellenic }
		}

		trigger = {
			trigger_if = {
				limit = {
					is_tribal = no
					is_nomadic = no
				}
				wealth >= 250
			}
			trigger_else = {
				wealth >= 50
			}
		}

		custom_tooltip = { text = tooltip_betting_hard_side }
		set_character_flag = flag_betting_on_dwapara

		if = {
			limit = {
				is_tribal = no
				is_nomadic = no
			}

			custom_tooltip = {
				text = tooltip_betting_250_gold
				set_variable = { which = local_betting_money value = 250 }
			}
		}
		else = {
			custom_tooltip = {
				text = tooltip_betting_50_gold
				set_variable = { which = local_betting_money value = 50 }
			}
		}
	}

	option = {
		name = {
			text = EVTOPTBHF25228
			trigger = { society_member_of = warrior_lodge_bon }
		}
		name = {
			text = EVTOPTBHF25228_HELLENIC # Athena
			trigger = { society_member_of = warrior_lodge_hellenic }
		}

		trigger = {
			trigger_if = {
				limit = {
					is_tribal = no
					is_nomadic = no
				}
				wealth >= 100
			}
			trigger_else = {
				wealth >= 25
			}
		}

		custom_tooltip = { text = tooltip_betting_easy_side }
		set_character_flag = flag_betting_on_treta

		if = {
			limit = {
				is_tribal = no
				is_nomadic = no
			}

			custom_tooltip = {
				text = tooltip_betting_100_gold
				set_variable = { which = local_betting_money value = 100 }
			}
		}
		else = {
			custom_tooltip = {
				text = tooltip_betting_25_gold
				set_variable = { which = local_betting_money value = 25 }
			}
		}
	}

	option = {
		name = {
			text = EVTOPTAHF25228
			trigger = { society_member_of = warrior_lodge_bon }
		}
		name = {
			text = EVTOPTAHF25228_HELLENIC # Apollo
			trigger = { society_member_of = warrior_lodge_hellenic }
		}

		custom_tooltip = { text = tooltip_betting_easiest_side }
		set_character_flag = flag_betting_on_krita

		if = {
			limit = {
				is_tribal = no
				is_nomadic = no
			}
			custom_tooltip = {
				text = tooltip_betting_50_gold
				set_variable = { which = local_betting_money value = 50 }
			}
		}
		else = {
			custom_tooltip = {
				text = tooltip_betting_10_gold
				set_variable = { which = local_betting_money value = 10 }
			}
		}
	}

	after = {
		character_event = { id = HF.25229 }
	}
}

# Almost time to throw.
character_event = {
	id = HF.25229
	title = EVTTITLEHF25226
	desc = EVTDESCHF25229
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	option = { # Use weighted die.
		name = EVTOPTAHF25229
		tooltip_info = intrigue
		trigger = { intrigue >= 15 }

		set_character_flag = cheat_fake_die

		random_list = {
			30 = {
				# Discovered.
				custom_tooltip = { text = TT_FAKE_DIE_DISCOVERED }
				character_event = { id = HF.25230 }
			}
			70 = {
				# Unnoticed.
				custom_tooltip = { text = TT_FAKE_DIE_WINS }
				character_event = { id = HF.25231 }
			}
		}

	}

	option = { # Use weighted die.
		name = EVTOPTAHF25229
		tooltip_info = master_schemer

		trigger = {
			trait = master_schemer
			intrigue < 15
		}

		set_character_flag = cheat_fake_die

		random_list = {
			30 = {
				# Discovered.
				custom_tooltip = { text = TT_FAKE_DIE_DISCOVERED }
				character_event = { id = HF.25230 }
			}
			70 = {
				# Unnoticed.
				custom_tooltip = { text = TT_FAKE_DIE_WINS }
				character_event = { id = HF.25231 }
			}
		}
	}

	option = { # Bump under the table.
		name = EVTOPTBHF25229
		tooltip_info = intrigue
		trigger = {
			intrigue >= 8
			NOT = { trait = master_schemer }
		}

		set_character_flag = cheat_bump_table

		random_list = {
			30 = {
				# Discovered.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_DISCOVERED }
				character_event = { id = HF.25230 }
			}
			10 = {
				# Fails
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_FAILS }
				character_event = { id = HF.25233 }
			}
			60 = {
				# Unnoticed.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_WINS }
				character_event = { id = HF.25231 }
			}
		}
	}

	option = { # Bump under the table.
		name = EVTOPTBHF25229
		tooltip_info = deceitful

		trigger = {
			trait = deceitful
			intrigue < 8
		}

		set_character_flag = cheat_bump_table

		random_list = {
			30 = {
				# Discovered.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_DISCOVERED }
				character_event = { id = HF.25230 }
			}
			10 = {
				# Fails
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_FAILS }
				character_event = { id = HF.25233 }
			}
			60 = {
				# Unnoticed.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_WINS }
				character_event = { id = HF.25231 }
			}
		}
	}

	option = { # Play fair.
		name = EVTOPTCHF25229
		custom_tooltip = { text = TT_EVTOPTCHF25229 }

		hidden_effect = {
			random_list = {
				60 = { set_character_flag = flag_warrior_lodge_die_is_krita }
				25 = { set_character_flag = flag_warrior_lodge_die_is_treta }
				10 = { set_character_flag = flag_warrior_lodge_die_is_dwapara }
				 5 = { set_character_flag = flag_warrior_lodge_die_is_kali }
			}
		}

		character_event = { id = HF.25235 }
	}
}

# Caught cheating.
character_event = {
	id = HF.25230
	title = EVTTITLEHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCHF25230
		trigger = {
			has_character_flag = cheat_fake_die
			NOT = { event_target:random_society_winner = { always = yes } }
		}
	}
	desc = {
		text = EVTDESCHF25230_B
		trigger = {
			has_character_flag = cheat_fake_die
			event_target:random_society_winner = { always = yes }
		}
	}
	desc = {
		text = EVTDESCHF25232
		trigger = {
			has_character_flag = cheat_bump_table
			NOT = { event_target:random_society_winner = { always = yes } }
		}
	}
	desc = {
		text = EVTDESCHF25232_B
		trigger = {
			has_character_flag = cheat_bump_table
			event_target:random_society_winner = { always = yes }
		}
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	immediate = {
		society = {
			random_society_member = {
				limit = {
					is_adult = yes
					is_incapable = no
					NOT = { character = ROOT }
				}
				save_event_target_as = random_society_winner
			}
		}

		set_variable = { which = local_betting_money_lost which = local_betting_money }
		multiply_variable = { which = local_betting_money_lost value = -1 }
	}

	option = { # Pay.
		name = {
			text = EVTOPTAHF25230
			trigger = { has_character_flag = cheat_fake_die }
		}
		name = {
			text = EVTOPTAHF25232
			trigger = { has_character_flag = cheat_bump_table }
		}

		trigger = { NOT = { event_target:random_society_winner = { always = yes } } }
		custom_tooltip = { text = TT_EVTOPTAHF25230 }

		detract_society_currency_minor_effect = yes
		wealth = local_betting_money_lost
	}

	option = { # Special option. - Character starts duel!
		name = EVTOPTYHF25230

		trigger = {
			event_target:random_society_winner = {
				ai = yes
				this_can_duel_with_from_trigger = yes
			}
		}

		warrior_lodge_dice_game_duel_winner_effect = yes

		ai_chance = {
			factor = 20

			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			mult_modifier = {
				factor = 1.5
				trait = brave
			}
			mult_modifier = {
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value >= 5 }
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value >= 10 }
			}
			mult_modifier = {
				factor = 1.5
				combat_rating_diff = { character = event_target:random_society_winner value >= 15 }
			}
			mult_modifier = {
				factor = 1.75
				combat_rating_diff = { character = event_target:random_society_winner value >= 20 }
			}
		}
	}

	option = { # Pay your debtor.
		name = EVTOPTBHF25230
		trigger = { event_target:random_society_winner = { always = yes } }
		custom_tooltip = { text = TT_EVTOPTAHF25230 }

		detract_society_currency_minor_effect = yes
		wealth = local_betting_money_lost

		event_target:random_society_winner = {
			show_scope_change = no

			wealth = local_betting_money
			character_event = { id = HF.25239 } # Notify other warrior.
		}
	}

	option = { # Call in favor.
		name = EVTOPTCHF25230
		trigger = { holds_favor_on = event_target:random_society_winner }
		custom_tooltip = { text = TT_EVTOPTAHF25230 }

		detract_society_currency_minor_effect = yes
		remove_favor = event_target:random_society_winner

		event_target:random_society_winner = { character_event = { id = HF.25240 } } # Notify other warrior.
	}

	option = { # Pay with favor.
		name = EVTOPTDHF25230

		trigger = {
			has_dlc = "Conclave"
			event_target:random_society_winner = { always = yes }

			NOR = {
				holds_favor_on = event_target:random_society_winner
				owes_favor_to = event_target:random_society_winner
			}
		}

		custom_tooltip = { text = TT_EVTOPTAHF25230 }
		detract_society_currency_minor_effect = yes
		reverse_add_favor = event_target:random_society_winner

		event_target:random_society_winner = { character_event = { id = HF.25241 } } # Notify other warrior.
	}

	after = {
		if = {
			limit = {
				NOT = { event_target:combatant_1 = { always = yes } } # i.e. you dueled the winner
			}

			hidden_effect = {
				society = {
					any_society_member = {
						limit = {
							is_adult = yes
							NOT = { character = ROOT }
						}

						opinion = {
							name = opinion_cheater
							who = ROOT
							years = 5
						}
					}
				}
			}
		}

		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

# Won by cheating.
character_event = {
	id = HF.25231
	title = EVTTITLEHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCHF25231
		trigger = { has_character_flag = cheat_fake_die }
	}
	desc = {
		text = EVTDESCHF25234
		trigger = { has_character_flag = cheat_bump_table }
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	immediate = {
		set_variable = { which = local_twice_betting_money which = local_betting_money }
		multiply_variable = { which = local_twice_betting_money value = 2 }
	}

	option = { # Double or nothing - fake die
		name = EVTOPTAHF25231
		trigger = { has_character_flag = cheat_fake_die }

		custom_tooltip = {
			text = tooltip_betting_double
			multiply_variable = { which = local_betting_money value = 2 }
		}

		random_list = {
			50 = {
				# Discovered.
				custom_tooltip = { text = TT_FAKE_DIE_DISCOVERED }
				character_event = { id = HF.25230 }
			}
			50 = {
				# Unnoticed.
				custom_tooltip = { text = TT_FAKE_DIE_WINS }
				character_event = { id = HF.25237 }
			}
		}
	}

	option = { # Double or nothing - bump table
		name = EVTOPTAHF25234
		trigger = { has_character_flag = cheat_bump_table }

		custom_tooltip = {
			text = tooltip_betting_double
			multiply_variable = { which = local_betting_money value = 2 }
		}

		random_list = {
			40 = {
				# Discovered.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_DISCOVERED }
				character_event = { id = HF.25230 }
			}
			30 = {
				# Fails
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_FAILS }
				character_event = { id = HF.25233 }
			}
			30 = {
				# Unnoticed.
				custom_tooltip = { text = TT_DIE_TABLE_BUMP_WINS }
				character_event = { id = HF.25237 }
			}
		}
	}

	option = { # Quit while ahead.
		name = {
			text = EVTOPTBHF25231
			trigger = { has_character_flag = cheat_fake_die }
		}
		name = {
			text = EVTOPTBHF25234
			trigger = { has_character_flag = cheat_bump_table }
		}

		wealth = local_betting_money
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

# Failed to cheat.
character_event = {
	id = HF.25233
	title = EVTTITLEHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCHF25233
		trigger = {
			NOT = { event_target:random_society_winner = { always = yes } }
		}
	}
	desc = {
		text = EVTDESCHF25233_B
		trigger = {
			event_target:random_society_winner = { always = yes }
		}
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	immediate = {
		society = {
			random_society_member = {
				limit = {
					is_adult = yes
					is_incapable = no
					NOR = { character = ROOT }
				}
				save_event_target_as = random_society_winner
			}
		}

		set_variable = { which = local_betting_money_lost which = local_betting_money }
		multiply_variable = { which = local_betting_money_lost value = -1 }
	}

	option = { # Special option. - Character starts duel!
		name = EVTOPTYHF25230

		trigger = {
			event_target:random_society_winner = {
				ai = yes
				this_can_duel_with_from_trigger = yes
			}
		}

		warrior_lodge_dice_game_duel_winner_effect = yes

		ai_chance = {
			factor = 20

			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			mult_modifier = {
				factor = 1.5
				trait = brave
			}
			mult_modifier = {
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value >= 5 }
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value >= 10 }
			}
			mult_modifier = {
				factor = 1.5
				combat_rating_diff = { character = event_target:random_society_winner value >= 15 }
			}
			mult_modifier = {
				factor = 1.75
				combat_rating_diff = { character = event_target:random_society_winner value >= 20 }
			}
		}
	}

	option = { # Pay your debtor.
		name = EVTOPTBHF25230
		trigger = { event_target:random_society_winner = { always = yes } }

		wealth = local_betting_money_lost

		event_target:random_society_winner = {
			show_scope_change = no

			wealth = local_betting_money
			character_event = { id = HF.25239 } # Notify other warrior.
		}
	}

	option = { # Call in favor.
		name = EVTOPTCHF25230
		trigger = { holds_favor_on = event_target:random_society_winner }

		remove_favor = event_target:random_society_winner

		event_target:random_society_winner = { character_event = { id = HF.25240 } } # Notify other warrior.
	}

	option = { # Pay with favor.
		name = EVTOPTDHF25230
		trigger = {
			has_dlc = "Conclave"
			event_target:random_society_winner = { always = yes }

			NOR = {
				holds_favor_on = event_target:random_society_winner
				owes_favor_to = event_target:random_society_winner
			}
		}

		reverse_add_favor = event_target:random_society_winner

		event_target:random_society_winner = { character_event = { id = HF.25241 } } # Notify other warrior.
	}

	option = {
		name = EVTOPTAHF25233
		trigger = { NOT = { event_target:random_society_winner = { always = yes } } }

		wealth = local_betting_money_lost
	}

	after = {
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

# Die has been cast honestly.
character_event = {
	id = HF.25235
	title = EVTTITLEHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCHF25235 # You won.
		trigger = { has_character_flag = won_die_roll }
	}
	desc = {
		text = EVTDESCHF25235_B # You lost.
		trigger = {
			event_target:random_society_winner = { is_alive = yes }
			NOT = { has_character_flag = won_die_roll }
		}
	}
	desc = {
		text = EVTDESCHF25235 # You lost. - No winner.
		trigger = {
			event_target:random_society_winner = { is_alive = no }
			NOT = { has_character_flag = won_die_roll }
		}
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	immediate = {
		if = {
			limit = {
				trigger_if = {
					limit = { has_character_flag = flag_betting_on_krita }
					has_character_flag = flag_warrior_lodge_die_is_krita
				}
				trigger_else_if = {
					limit = { has_character_flag = flag_betting_on_treta }
					has_character_flag = flag_warrior_lodge_die_is_treta
				}
				trigger_else_if = {
					limit = { has_character_flag = flag_betting_on_dwapara }
					has_character_flag = flag_warrior_lodge_die_is_dwapara
				}
				trigger_else = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
			set_character_flag = won_die_roll
			set_variable = { which = local_twice_betting_money which = local_betting_money }
			multiply_variable = { which = local_twice_betting_money value = 2 }
		}
		else = {
			society = {
				random_society_member = {
					limit = {
						is_adult = yes
						is_incapable = no
						NOR = { character = ROOT }
					}
					save_event_target_as = random_society_winner
				}
			}
			set_variable = { which = local_betting_money_lost which = local_betting_money }
			multiply_variable = { which = local_betting_money_lost value = -1 }
		}
	}

	option = { # You won. Double or nothing.
		name = EVTOPTAHF25235
		trigger = { has_character_flag = won_die_roll }

		custom_tooltip = {
			text = tooltip_betting_double
			multiply_variable = { which = local_betting_money value = 2 }
		}

		add_legend_progress_trivial_effect = yes

		clr_character_flag = won_die_roll
		clr_character_flag = flag_warrior_lodge_die_is_krita
		clr_character_flag = flag_warrior_lodge_die_is_treta
		clr_character_flag = flag_warrior_lodge_die_is_dwapara
		clr_character_flag = flag_warrior_lodge_die_is_kali

		hidden_effect = {
			random_list = {
				60 = { set_character_flag = flag_warrior_lodge_die_is_krita }
				40 = { set_character_flag = flag_warrior_lodge_die_is_treta }
				20 = { set_character_flag = flag_warrior_lodge_die_is_dwapara }
				10 = { set_character_flag = flag_warrior_lodge_die_is_kali }
			}
		}

		character_event = { id = HF.25236 }
	}

	option = { # You won. Leave while ahead.
		name = EVTOPTBHF25235
		trigger = { has_character_flag = won_die_roll }

		wealth = local_betting_money
		warrior_lodge_dice_game_cleanup_effect = yes
	}

	option = { # You lost.
		name = EVTOPTCHF25235
		trigger = {
			NOR = {
				has_character_flag = won_die_roll
				event_target:random_society_winner = { always = yes }
			}
		}

		wealth = local_betting_money_lost
		warrior_lodge_dice_game_cleanup_effect = yes
	}

	option = { # Special option. - Sore loser starts duel!
		name = EVTOPTYHF25235
		tooltip_info = arbitrary

		trigger = {
			trait = arbitrary
			NOT = { has_character_flag = won_die_roll }

			event_target:random_society_winner = {
				ai = yes
				this_can_duel_with_from_trigger = yes
			}
		}

		warrior_lodge_dice_game_duel_winner_effect = yes

		ai_chance = {
			factor = 20
			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			mult_modifier = {
				factor = 1.5
				trait = brave
			}
			mult_modifier = {
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value = 5 }
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value = 10 }
			}
			mult_modifier = {
				factor = 1.5
				combat_rating_diff = { character = event_target:random_society_winner value = 15 }
			}
			mult_modifier = {
				factor = 1.75
				combat_rating_diff = { character = event_target:random_society_winner value = 20 }
			}
		}
	}

	option = { # You lost. Pay your debtor.
		name = EVTOPTBHF25230

		trigger = {
			event_target:random_society_winner = { is_alive = yes }
			NOT = { has_character_flag = won_die_roll }
		}

		wealth = local_betting_money_lost
		warrior_lodge_dice_game_cleanup_effect = yes

		event_target:random_society_winner = {
			show_scope_change = no

			wealth = local_betting_money
			character_event = { id = HF.25239 } # Notify other warrior.
		}
	}

	option = { # You lost. Call in favor.
		name = EVTOPTCHF25230

		trigger = {
			holds_favor_on = event_target:random_society_winner
			NOT = { has_character_flag = won_die_roll }
		}

		remove_favor = event_target:random_society_winner
		warrior_lodge_dice_game_cleanup_effect = yes

		event_target:random_society_winner = { character_event = { id = HF.25240 } } # Notify other warrior.
	}

	option = { # You lost. Pay with favor.
		name = EVTOPTDHF25230

		trigger = {
			has_dlc = "Conclave"
			event_target:random_society_winner = { always = yes }

			NOR = {
				holds_favor_on = event_target:random_society_winner
				owes_favor_to = event_target:random_society_winner
				has_character_flag = won_die_roll
			}
		}

		reverse_add_favor = event_target:random_society_winner
		warrior_lodge_dice_game_cleanup_effect = yes

		event_target:random_society_winner = { character_event = { id = HF.25241 } } # Notify other warrior.
	}
}

# Die has been cast honestly. - Second row.
character_event = {
	id = HF.25236
	title = EVTTITLEHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCHF25236 # You won.
		trigger = { has_character_flag = won_die_roll }
	}
	desc = {
		text = EVTDESCHF25236_B # You lost.
		trigger = {
			event_target:random_society_winner = { always = yes }
			NOT = { has_character_flag = won_die_roll }
		}
	}
	desc = {
		text = EVTDESCHF25236_C # You lost. - No winner.
		trigger = {
			NOR = {
				event_target:random_society_winner = { always = yes }
				has_character_flag = won_die_roll
			}
		}
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	immediate = {
		if = {
			limit = {
				trigger_if = {
					limit = { has_character_flag = flag_betting_on_krita }
					has_character_flag = flag_warrior_lodge_die_is_krita
				}
				trigger_else_if = {
					limit = { has_character_flag = flag_betting_on_treta }
					has_character_flag = flag_warrior_lodge_die_is_treta
				}
				trigger_else_if = {
					limit = { has_character_flag = flag_betting_on_dwapara }
					has_character_flag = flag_warrior_lodge_die_is_dwapara
				}
				trigger_else = {
					has_character_flag = flag_warrior_lodge_die_is_kali
					has_character_flag = flag_betting_on_kali
				}
			}
			set_character_flag = won_die_roll
		}
		else = {
			society = {
				random_society_member = {
					limit = {
						is_adult = yes
						is_incapable = no
						NOR = { character = ROOT }
					}
					save_event_target_as = random_society_winner
				}
			}
			set_variable = { which = local_betting_money_lost which = local_betting_money }
			multiply_variable = { which = local_betting_money_lost value = -1 }
		}
	}

	option = { # You won.
		name = EVTOPTAHF25236
		trigger = { has_character_flag = won_die_roll }

		wealth = local_betting_money
	}

	option = { # Special option. - Sore loser starts duel!
		name = EVTOPTYHF25235
		tooltip_info = arbitrary

		trigger = {
			trait = arbitrary
			NOT = { has_character_flag = won_die_roll }

			event_target:random_society_winner = {
				ai = yes
				this_can_duel_with_from_trigger = yes
			}
		}

		warrior_lodge_dice_game_duel_winner_effect = yes

		ai_chance = {
			factor = 20

			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			mult_modifier = {
				factor = 1.5
				trait = brave
			}
			mult_modifier = {
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value >= 5 }
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = event_target:random_society_winner value >= 10 }
			}
			mult_modifier = {
				factor = 1.5
				combat_rating_diff = { character = event_target:random_society_winner value >= 15 }
			}
			mult_modifier = {
				factor = 1.75
				combat_rating_diff = { character = event_target:random_society_winner value >= 20 }
			}
		}
	}

	option = { # You lost.
		name = EVTOPTBHF25236

		trigger = {
			NOR = {
				event_target:random_society_winner = { is_alive = yes }
				has_character_flag = won_die_roll
			}
		}

		wealth = local_betting_money_lost
	}

	option = { # You lost. Pay your debtor.
		name = EVTOPTBHF25230

		trigger = {
			event_target:random_society_winner = { is_alive = yes }
			NOT = { has_character_flag = won_die_roll }
		}

		wealth = local_betting_money_lost

		event_target:random_society_winner = {
			show_scope_change = no

			wealth = local_betting_money
			character_event = { id = HF.25239 } # Notify other warrior.
		}
	}

	option = { # You lost. Call in favor.
		name = EVTOPTCHF25230

		trigger = {
			holds_favor_on = event_target:random_society_winner
			NOT = { has_character_flag = won_die_roll }
		}

		remove_favor = event_target:random_society_winner

		event_target:random_society_winner = { character_event = { id = HF.25240 } } # Notify other warrior.
	}

	option = { # You lost. Pay with favor.
		name = EVTOPTDHF25230

		trigger = {
			has_dlc = "Conclave"
			event_target:random_society_winner = { always = yes }

			NOR = {
				holds_favor_on = event_target:random_society_winner
				owes_favor_to = event_target:random_society_winner
				has_character_flag = won_die_roll
			}
		}

		reverse_add_favor = event_target:random_society_winner

		event_target:random_society_winner = { character_event = { id = HF.25241 } } # Notify other warrior.
	}

	after = {
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

# Won by cheating again. - Second row.
character_event = {
	id = HF.25237
	title = EVTTITLEHF25226
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCHF25237
		trigger = { has_character_flag = cheat_fake_die }
	}
	desc = {
		text = EVTDESCHF25238
		trigger = { has_character_flag = cheat_bump_table }
	}

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	option = { # You won.
		name = {
			text = EVTOPTAHF25237
			trigger = { has_character_flag = cheat_fake_die }
		}
		name = {
			text = EVTOPTAHF25238
			trigger = { has_character_flag = cheat_bump_table }
		}

		wealth = local_betting_money
		warrior_lodge_dice_game_cleanup_effect = yes
	}
}

# Random Warrior informed that he has earned money from loser.
character_event = {
	id = HF.25239
	title = EVTTITLEHF25226
	desc = EVTDESCHF25239
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	option = { # You won.
		name = EVTOPTAHF25239

		add_society_currency_trivial_effect = yes
	}
}

# Random Warrior informed that loser called in favor to not pay debt.
character_event = {
	id = HF.25240
	title = EVTTITLEHF25226
	desc = EVTDESCHF25240
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	option = { # You won.
		name = EVTOPTAHF25240

		tooltip = { reverse_remove_favor = FROM }
		add_society_currency_trivial_effect = yes
	}
}

# Random Warrior informed that loser gave favor to not pay debt.
character_event = {
	id = HF.25241
	title = EVTTITLEHF25226
	desc = EVTDESCHF25241
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		OR = {
			society_member_of = warrior_lodge_bon
			society_member_of = warrior_lodge_hellenic
		}
	}

	option = { # You won.
		name = EVTOPTAHF25241

		tooltip = { add_favor = FROM }
		add_society_currency_trivial_effect = yes
	}
}

#############################################

				# Flyting #

#############################################

# Warrior Lodge Member picks a challenger.
character_event = {
	id = HF.25250
	title = EVTTITLEHF25250
	desc = EVTDESCHF25250
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes # on_society_bi_yearly_pulse, random_events

	has_dlc = "Holy Fury"
	min_age = 16
	only_capable = yes
	prisoner = no
	in_command = no

	trigger = {
		is_inaccessible_trigger = no
		NOT = { has_character_modifier = flyting_challenge_cooldown }

		OR = { # Only for northeners
			society_member_of = warrior_lodge_norse
			society_member_of = warrior_lodge_slavic
			society_member_of = warrior_lodge_baltic
			society_member_of = warrior_lodge_finnish
		}

		society = {
			any_society_member = { # Make sure there are enough contenders to pick.
				is_adult = yes
				in_command = no
				prisoner = no
				is_incapable = no
				is_inaccessible_trigger = no

				NOR = {
					character = ROOT
					has_character_modifier = flyting_challenge_cooldown
				}

				OR = {
					is_smart_trigger = yes
					trait = scholarly_theologian
					trait = grey_eminence
					trait = poet
					diplomacy >= 15
				}

				society = {
					any_society_member = {
						count >= 2

						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						is_smart_trigger = no
						has_education_diplomacy_trigger = no
						has_lifestyle_diplomacy_trigger = no
						diplomacy < 15

						NOR = {
							character = ROOT
							character = PREVPREV # Make sure it doesn't check the same good candidate as above.v
							has_character_modifier = flyting_challenge_cooldown
						}
					}
				}
			}
		}
	}

	immediate = {
		random_list = {
			25 = { sound_effect = pagan_cheering_01 }
			25 = { sound_effect = pagan_cheering_02 }
			25 = { sound_effect = pagan_cheering_03 }
			25 = { sound_effect = warrior_lodge_ambient_02 }
		}

		hidden_effect = { # Pick potential contenders
			clr_character_flag = flyting_strong # Safety cleanup
			clr_character_flag = flyting_medium
			clr_character_flag = flyting_weak
			save_event_target_as = flyting_contender_1

			society = {
				random_society_member = { # First pick a very smart/talkative guy.
					limit = {
						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						NOR = {
							character = ROOT
							has_character_modifier = flyting_challenge_cooldown
						}
						OR = {
							is_smart_trigger = yes
							trait = scholarly_theologian
							trait = grey_eminence
							trait = poet
							diplomacy >= 15
						}
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						is_ill = no
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy >= 20
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						is_smart_trigger = yes
						OR = {
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
						}
						diplomacy >= 20
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 20
					}
					preferred_limit = {
						ai = no
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 20
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 20
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 15
					}
					preferred_limit = {
						ai = no
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 15
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 15
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 10
					}
					preferred_limit = {
						ai = no
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 10
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 10
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 5
					}
					preferred_limit = {
						ai = no
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 5
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 5
					}
					preferred_limit = {
						ai = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						is_ill = no
						is_smart_trigger = yes
						has_education_diplomacy_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy >= 20
					}

					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						is_smart_trigger = yes
						OR = {
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
						}
						diplomacy >= 20
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 20
					}
					preferred_limit = {
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 20
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 20
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 15
					}
					preferred_limit = {
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 15
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 15
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 10
					}
					preferred_limit = {
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 10
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 10
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 5
					}
					preferred_limit = {
						OR = {
							is_smart_trigger = yes
							has_education_diplomacy_trigger = yes
							has_lifestyle_diplomacy_trigger = yes
							trait = gregarious
						}
						diplomacy >= 5
					}
					preferred_limit = {
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
						diplomacy >= 5
						is_dumb_trigger = no
					}
					preferred_limit = {
						is_dumb_trigger = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						is_dumb_trigger = no
					}
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					save_event_target_as = flyting_potential_opponent_1
				}
				random_society_member = { # Second pick a weakling.
					limit = {
						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						is_smart_trigger = no
						has_lifestyle_diplomacy_trigger = no
						diplomacy < 12

						NOR = {
							character = ROOT
							character = event_target:flyting_potential_opponent_1
							has_character_modifier = flyting_challenge_cooldown
						}
					}
					preferred_limit = {
						ai = no
						is_dumb_trigger = yes
						diplomacy < 5
						OR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						ai = no
						diplomacy < 5
						OR = {
							is_dumb_trigger = yes
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						ai = no
						is_dumb_trigger = yes
						diplomacy < 10
						OR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						ai = no
						diplomacy < 10
						OR = {
							is_dumb_trigger = yes
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						is_dumb_trigger = yes
						diplomacy < 5
						OR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						diplomacy < 5
						OR = {
							is_dumb_trigger = yes
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						diplomacy < 3
					}
					preferred_limit = {
						diplomacy < 5
					}
					preferred_limit = {
						is_dumb_trigger = yes
						diplomacy < 10
						OR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						diplomacy < 10
						OR = {
							is_dumb_trigger = yes
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					save_event_target_as = flyting_potential_opponent_3
				}
				random_society_member = { # Third pick an average guy.
					limit = {
						is_adult = yes
						in_command = no
						prisoner = no
						is_incapable = no
						is_inaccessible_trigger = no

						is_smart_trigger = no
						has_lifestyle_diplomacy_trigger = no
						diplomacy < 20

						NOR = {
							character = ROOT
							character = event_target:flyting_potential_opponent_1
							character = event_target:flyting_potential_opponent_3
							has_character_modifier = flyting_challenge_cooldown
						}
					}
					preferred_limit = {
						is_ill = no
						has_education_diplomacy_trigger = yes
						diplomacy >= 5
						diplomacy < 12
					}
					preferred_limit = {
						has_education_diplomacy_trigger = yes
						diplomacy >= 5
						diplomacy < 12
					}
					preferred_limit = {
						diplomacy >= 5
						diplomacy < 12
					}
					preferred_limit = {
						is_dumb_trigger = no
						NOR = {
							trait = shy
							trait = stutter
							trait = lisp
							trait = harelip
						}
					}
					preferred_limit = {
						is_dumb_trigger = no
					}

					clr_character_flag = flyting_strong
					clr_character_flag = flyting_medium
					clr_character_flag = flyting_weak
					save_event_target_as = flyting_potential_opponent_2
				}
			}
			# Then assign flag to determine what kind of opponent you are.
			if = {
				limit = {
					OR = {
						is_smart_trigger = yes
						has_lifestyle_diplomacy_trigger = yes
						diplomacy >= 15
					}
				}
				set_character_flag = flyting_strong
			}
			else_if = {
				limit = {
					is_smart_trigger = no
					has_lifestyle_diplomacy_trigger = no
					has_education_diplomacy_trigger = no
					diplomacy < 8
				}
				set_character_flag = flyting_weak
			}
			else = {
				set_character_flag = flyting_medium
			}

			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
		}
	}

	option = { # Pick tough fight.
		name = EVTOPTAHF25250
		trigger = { event_target:flyting_potential_opponent_1 = { always = yes } }
		custom_tooltip = { text = TT_EVTOPTAHF25250 }

		event_target:flyting_potential_opponent_1 = {
			save_event_target_as = flyting_contender_2
			set_character_flag = flyting_strong
			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
			set_flyting_patience_effect = yes
			character_event = { id = HF.25253 }
		}


		ai_chance = { factor = 10 }
	}

	option = { # Pick average opponent.
		name = EVTOPTBHF25250
		trigger = { event_target:flyting_potential_opponent_2 = { always = yes } }
		custom_tooltip = { text = TT_EVTOPTBHF25250 }

		event_target:flyting_potential_opponent_2 = {
			save_event_target_as = flyting_contender_2
			set_character_flag = flyting_medium
			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
			set_flyting_patience_effect = yes
			character_event = { id = HF.25253 }
		}


		ai_chance = { factor = 20 }
	}

	option = { # Pick lousy opponent.
		name = EVTOPTCHF25250
		trigger = { event_target:flyting_potential_opponent_3 = { always = yes } }
		custom_tooltip = { text = TT_EVTOPTCHF25250 }

		event_target:flyting_potential_opponent_3 = {
			save_event_target_as = flyting_contender_2
			set_character_flag = flyting_weak
			set_character_flag = do_not_disturb
			character_event = { id = HF.25301 days = 15 } # Clear flag.
			set_flyting_patience_effect = yes
			character_event = { id = HF.25253 }
		}


		ai_chance = {
			factor = 30

			mult_modifier = {
				factor = 2
				trait = craven
			}
			mult_modifier = {
				factor = 0.5
				trait = brave
			}
		}
	}

	option = { # Not interested. -End of line.
		name = EVTOPTDHF25250

		tiered_prestige_negative_effect = yes

		trigger_switch = {
			on_trigger = has_character_flag
			flyting_strong = { detract_society_currency_medium_effect = yes }
			flyting_medium = { detract_society_currency_minor_effect = yes }
			flyting_weak =   { detract_society_currency_tiny_effect = yes }
		}

		warrior_lodge_flyting_cleanup_effect = yes

		ai_chance = { factor = 0 }
	}
}

# Second character: hidden ping.
# CleanSlate: Needed to set up scopes for the insult generating custom_loc
character_event = {
	id = HF.25253
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	immediate = {
		add_character_modifier = {
			name = flyting_challenge_cooldown
			days = 1250 # 3 years, 155 days
			hidden = yes
		}

		FROM = {
			add_character_modifier = {
				name = flyting_challenge_cooldown
				days = 1250 # 3 years, 155 days
				hidden = yes
			}

			character_event = { id = HF.25254 }
		}
	}
}

# First character: First round of Flything.
character_event = {
	id = HF.25254
	title = EVTTITLEHF25250
	desc = EVTDESCHF25254
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { # Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254

		trigger = {
			NOR = {
				is_lover = FROM
				is_close_relative = FROM
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		tooltip_info_custom = available_because_relative

		trigger = {
			OR = {
				is_close_relative = FROM
				is_lover = FROM
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254
		trigger = { NOT = { trait = poet } }
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }

		set_character_flag = insulting_character

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		tooltip_info = poet
		trigger = { trait = poet }
		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }

		set_character_flag = insulting_character_poet

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 100 }
	}

	option = { # Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254
		trigger = { NOT = { is_liege_or_above_of = FROM } }
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }

		prestige = -20
		set_character_flag = insulting_accomplishments

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		tooltip_info_custom = available_because_better
		trigger = { is_liege_or_above_of = FROM }
		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }

		prestige = -20
		set_character_flag = insulting_accomplishments_liege

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254
		trigger = {
			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		tooltip_info = cruel
		trigger = {
			trait = cruel

			NOR = {
				is_close_relative = FROM
				dynasty = FROM
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family_cruel

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}
}

# Opponent: receive insults on prowess - Normal.
character_event = {
	id = HF.25255
	title = EVTTITLEHF25250
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCBHF25255
		trigger = {
			NOT = { has_character_flag = flyting_second_round }
		}
	}
	desc = {
		text = EVTDESCAHF25255
		trigger = { has_character_flag = flyting_second_round }
	}

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = insulting_prowess
					has_character_flag = insulting_prowess_relative
					has_character_flag = insulting_character
					has_character_flag = insulting_character_poet
					has_character_flag = insulting_accomplishments
					has_character_flag = insulting_accomplishments_liege
					has_character_flag = insulting_family
					has_character_flag = insulting_family_cruel
				}
			}

			set_character_flag = flyting_second_round
		}
	}

	option = { # Character does not care much because celibate.
		name = EVTOPTBHF25255
		tooltip_info = celibate

		trigger = {
			trait = celibate
			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character does not care much because master seducer.
		name = EVTOPTCHF25255
		tooltip_info = master_seducer

		trigger = {
			trait = master_seducer
			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character does not care much because master seductress.
		name = EVTOPTDHF25255
		tooltip_info = master_seductress

		trigger = {
			trait = master_seductress
			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked.
		name = EVTOPTEHF25255

		trigger = {
			NOR = {
				trait = celibate
				trait = master_seducer
				trait = master_seductress
				trait = lustful
			}

			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked a lot.
		name = EVTOPTFHF25255
		tooltip_info = lustful

		trigger = {
			trait = lustful

			NOR = {
				trait = celibate
				trait = master_seducer
				trait = master_seductress
			}

			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254

		trigger = {
			NOR = {
				is_lover = FROM
				is_close_relative = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		tooltip_info_custom = available_because_relative

		trigger = {
			OR = {
				is_close_relative = FROM
				is_lover = FROM
			}

			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254

		trigger = {
			NOR = {
				trait = poet
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		tooltip_info = poet

		trigger = {
			trait = poet
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 100 }
	}

	option = { # Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254

		trigger = {
			NOR = {
				is_liege_or_above_of = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		tooltip_info_custom = available_because_better

		trigger = {
			is_liege_or_above_of = FROM
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments_liege

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254

		trigger = {
			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		tooltip_info = cruel

		trigger = {
			trait = cruel

			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family_cruel

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}
}

# Opponent: receive insults on character.
character_event = {
	id = HF.25257
	title = EVTTITLEHF25250
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCBHF25257
		trigger = {
			NOT = { has_character_flag = flyting_second_round }
		}
	}
	desc = {
		text = EVTDESCAHF25257
		trigger = { has_character_flag = flyting_second_round }
	}

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = insulting_prowess
					has_character_flag = insulting_prowess_relative
					has_character_flag = insulting_character
					has_character_flag = insulting_character_poet
					has_character_flag = insulting_accomplishments
					has_character_flag = insulting_accomplishments_liege
					has_character_flag = insulting_family
					has_character_flag = insulting_family_cruel
				}
			}

			set_character_flag = flyting_second_round
		}
	}

	option = { # Character does not care much because humble.
		name = EVTOPTBHF25257
		tooltip_info = humble

		trigger = {
			trait = humble
			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked.
		name = EVTOPTCHF25257

		trigger = {
			NOR = {
				trait = humble
				trait = arbitrary
			}

			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked a lot.
		name = EVTOPTDHF25257
		tooltip_info = arbitrary

		trigger = {
			trait = arbitrary
			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254

		trigger = {
			NOR = {
				is_lover = FROM
				is_close_relative = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		tooltip_info_custom = available_because_relative

		trigger = {
			OR = {
				is_close_relative = FROM
				is_lover = FROM
			}

			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254

		trigger = {
			NOR = {
				trait = poet
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		tooltip_info = poet

		trigger = {
			trait = poet
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 100 }
	}

	option = { # Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254

		trigger = {
			NOR = {
				is_liege_or_above_of = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		tooltip_info_custom = available_because_better

		trigger = {
			is_liege_or_above_of = FROM
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments_liege

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254

		trigger = {
			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		tooltip_info = cruel

		trigger = {
			trait = cruel

			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family_cruel

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}
}

# Opponent: receive insults on accomplishments.
character_event = {
	id = HF.25259
	title = EVTTITLEHF25250
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCBHF25259
		trigger = {
			NOT = { has_character_flag = flyting_second_round }
		}
	}
	desc = {
		text = EVTDESCAHF25259
		trigger = { has_character_flag = flyting_second_round }
	}

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = insulting_prowess
					has_character_flag = insulting_prowess_relative
					has_character_flag = insulting_character
					has_character_flag = insulting_character_poet
					has_character_flag = insulting_accomplishments
					has_character_flag = insulting_accomplishments_liege
					has_character_flag = insulting_family
					has_character_flag = insulting_family_cruel
				}
			}

			set_character_flag = flyting_second_round
		}
	}

	option = { # Character does not care much.
		name = EVTOPTBHF25259
		tooltip_info = content

		trigger = {
			trait = content
			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked.
		name = EVTOPTCHF25259
		trigger = {
			NOR = {
				trait = content
				trait = ambitious
			}

			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked a lot.
		name = EVTOPTDHF25259
		tooltip_info = ambitious

		trigger = {
			trait = ambitious
			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254

		trigger = {
			NOR = {
				is_lover = FROM
				is_close_relative = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		tooltip_info_custom = available_because_relative

		trigger = {
			OR = {
				is_close_relative = FROM
				is_lover = FROM
			}

			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254
		trigger = {

			NOR = {
				trait = poet
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		tooltip_info = poet

		trigger = {
			trait = poet
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 100 }
	}

	option = { # Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254

		trigger = {
			NOR = {
				is_liege_or_above_of = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		tooltip_info_custom = available_because_better

		trigger = {
			is_liege_or_above_of = FROM
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments_liege

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254

		trigger = {
			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		tooltip_info = cruel

		trigger = {
			trait = cruel

			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family_cruel

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}
}

# Opponent: receive insults on family.
character_event = {
	id = HF.25261
	title = EVTTITLEHF25250
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	desc = {
		text = EVTDESCBHF25261
		trigger = {
			NOT = { has_character_flag = flyting_second_round }
		}
	}
	desc = {
		text = EVTDESCAHF25261
		trigger = { has_character_flag = flyting_second_round }
	}

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = insulting_prowess
					has_character_flag = insulting_prowess_relative
					has_character_flag = insulting_character
					has_character_flag = insulting_character_poet
					has_character_flag = insulting_accomplishments
					has_character_flag = insulting_accomplishments_liege
					has_character_flag = insulting_family
					has_character_flag = insulting_family_cruel
				}
			}

			set_character_flag = flyting_second_round
		}
	}

	option = { # Character does not care much.
		name = EVTOPTBHF25261
		tooltip_info = cruel

		trigger = {
			trait = cruel

			NOR = {
				has_focus = focus_family
				any_lover = { is_married = ROOT }
				any_lover = { is_close_relative = ROOT }
				any_friend = { is_married = ROOT }
				any_friend = { is_close_relative = ROOT }
			}

			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_MILD_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked.
		name = EVTOPTCHF25261

		trigger = {
			NOR = {
				trait = cruel
				has_focus = focus_family
				any_lover = { is_married = ROOT }
				any_lover = { is_close_relative = ROOT }
				any_friend = { is_married = ROOT }
				any_friend = { is_close_relative = ROOT }
			}

			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_AVERAGE_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Character feels mocked a lot.
		name = EVTOPTDHF25261
		tooltip_info_custom = available_because_loves_family

		trigger = {
			NOT = { trait = cruel }

			OR = {
				has_focus = focus_family
				any_lover = { is_married = ROOT }
				any_lover = { is_close_relative = ROOT }
				any_friend = { is_married = ROOT }
				any_friend = { is_close_relative = ROOT }
			}

			has_character_flag = flyting_second_round
		}

		custom_tooltip = { text = TT_FLYTING_INSULT_POOR_REACTION }
		warrior_lodge_flyting_winner_selection_effect = yes

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - Normal
		name = EVTOPTAHF25254

		trigger = {
			NOR = {
				is_lover = FROM
				is_close_relative = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 50 }
	}

	option = { # Insulting Opponent's prowess. - As a relative.
		name = EVTOPTAHF25254
		tooltip_info_custom = available_because_relative

		trigger = {
			OR = {
				is_close_relative = FROM
				is_lover = FROM
			}

			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_PROWESS }
		set_character_flag = insulting_prowess_relative

		FROM = { character_event = { id = HF.25255 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Normal
		name = EVTOPTBHF25254

		trigger = {
			NOR = {
				trait = poet
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 80 }
	}

	option = { # Insulting Opponent's character. - Poet
		name = EVTOPTBHF25254
		tooltip_info = poet

		trigger = {
			trait = poet
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_CHARACTER }
		set_character_flag = insulting_character_poet

		FROM = { character_event = { id = HF.25257 } }

		ai_chance = { factor = 100 }
	}

	option = { # Insulting Opponent's accomplishments. - Normal
		name = EVTOPTCHF25254

		trigger = {
			NOR = {
				is_liege_or_above_of = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's accomplishments. - As Superior
		name = EVTOPTCHF25254
		tooltip_info_custom = available_because_better

		trigger = {
			is_liege_or_above_of = FROM
			NOT = { has_character_flag = flyting_second_round }
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_ACCOMPLISHMENTS }
		prestige = -20
		set_character_flag = insulting_accomplishments_liege

		FROM = { character_event = { id = HF.25259 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 1.5
				trait = arbitrary
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				prestige < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Normal
		name = EVTOPTDHF25254

		trigger = {
			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				trait = cruel
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}

	option = { # Insulting Opponent's family. - Cruel
		name = EVTOPTDHF25254
		tooltip_info = cruel

		trigger = {
			trait = cruel

			NOR = {
				is_close_relative = FROM
				dynasty = FROM
				has_character_flag = flyting_second_round
			}
		}

		custom_tooltip = { text = TT_FLYTING_INSULTING_FAMILY }
		piety = -5
		set_character_flag = insulting_family_cruel

		FROM = { character_event = { id = HF.25261 } }

		ai_chance = {
			factor = 80

			mult_modifier = {
				factor = 0.5
				has_focus = focus_family
			}
			mult_modifier = {
				factor = 0.5
				trait = kind
			}
			mult_modifier = {
				factor = 0.5
				piety < 100
			}
		}
	}
}

# Loser ping.
character_event = {
	id = HF.25262

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		event_target:flyting_winner = { character_event = { id = HF.25263 } }
	}
}

# Opponent: notified previous character lost his temper and has thus lost the game.
character_event = {
	id = HF.25263
	title = EVTTITLEHF25250
	desc = EVTDESCAHF25263
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { # Mock loser.
		name = EVTOPTAHF25263
		custom_tooltip = { text = TT_EVTOPTAHF25263 }

		# Influence reward based on opponent's strength.
		if = {
			limit = {
				FROM = { has_character_flag = flyting_strong }
			}

			add_society_currency_minor_effect = yes

			hidden_effect = { # If defeated a strong guy, gain nickname.
				if = {
					limit = {
						this_has_average_nickname_trigger = no
						this_has_cool_nickname_trigger = no
						this_has_super_cool_nickname_trigger = no
					}

					random_list = {
						25 = { give_nickname = nick_the_sharp_tongue }
						25 = { give_nickname = nick_the_trickster }
						25 = { give_nickname = nick_the_merciless }
						25 = { give_nickname = nick_the_word_slayer }
						25 = { give_nickname = nick_the_grinner }
						25 = { give_nickname = nick_the_poison_tooth }
						25 = { give_nickname = nick_the_bellower }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_fox
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_vixen
						}
						25 = {
							trigger = { society_member_of = warrior_lodge_west_african }
							give_nickname = nick_the_hyena
						}
						15 = { }
					}
				}
			}
		}
		else_if = {
			limit = {
				FROM = { has_character_flag = flyting_medium }
			}

			add_society_currency_tiny_effect = yes
		}
		else = {
			add_society_currency_trivial_effect = yes
		}

		tooltip = {
			reverse_opinion = {
				name = opinion_lousy_winner
				who = FROM
				years = 5
			}
		}

		# Notify loser.
		FROM = { character_event = { id = HF.25268 } }

		ai_chance = {
			factor = 30

			mult_modifier = {
				factor = 1.5
				is_evil_trigger = yes
			}
		}
	}

	option = { # Kind to loser.
		name = EVTOPTBHF25263
		# Influence reward based on opponent's strength.
		if = {
			limit = {
				FROM = { has_character_flag = flyting_strong }
			}

			add_society_currency_tiny_effect = yes

			hidden_effect = { # If defeated a strong guy, gain nickname.
				if = {
					limit = {
						this_has_average_nickname_trigger = no
						this_has_cool_nickname_trigger = no
						this_has_super_cool_nickname_trigger = no
					}
					random_list = {
						25 = { give_nickname = nick_the_sharp_tongue }
						25 = { give_nickname = nick_the_trickster }
						25 = { give_nickname = nick_the_merciless }
						25 = { give_nickname = nick_the_word_slayer }
						25 = { give_nickname = nick_the_grinner }
						25 = { give_nickname = nick_the_poison_tooth }
						25 = { give_nickname = nick_the_bellower }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_fox
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_vixen
						}
						25 = {
							trigger = { society_member_of = warrior_lodge_west_african }
							give_nickname = nick_the_hyena
						}
						15 = { }
					}
				}
			}
		}
		else_if = {
			limit = {
				FROM = { has_character_flag = flyting_medium }
			}

			add_society_currency_trivial_effect = yes
		}
		else = {
			prestige = 10
		}

		tooltip = {
			reverse_opinion = {
				name = opinion_kind_winner
				who = FROM
				years = 5
			}
		}

		# Notify loser.
		FROM = { character_event = { id = HF.25269 } }

		ai_chance = {
			factor = 70

			mult_modifier = {
				factor = 1.5
				is_benevolent_trigger = yes
			}
		}
	}

	after = {
		add_legend_progress_trivial_effect = yes
	}
}

# You lost. Mocked by winner.
character_event = {
	id = HF.25268
	title = EVTTITLEHF25250
	desc = EVTDESCHF25268
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { # Special option. - Character starts duel!
		name = EVTOPTYHF25268
		trigger = { this_can_duel_with_from_trigger = yes }
		custom_tooltip = { text = tooltip_22022_Y }

		tiered_prestige_negative_effect = yes

		opinion = {
			name = opinion_antagonized_3
			who = FROM
			years = 15
		}

		# Influence penalty based on opponent's strength.
		if = {
			limit = { FROM = { has_character_flag = flyting_strong } }
			detract_society_currency_minor_effect = yes
		}
		else_if = {
			limit = { FROM = { has_character_flag = flyting_medium } }
			detract_society_currency_tiny_effect = yes
		}
		else = {
			detract_society_currency_trivial_effect = yes

			hidden_effect = { # If defeated by a weak guy, gain nickname.
				if = {
					limit = { has_nickname = no }

					random_list = {
						25 = { give_nickname = nick_the_short_tempered }
						25 = { give_nickname = nick_the_red_cheeks }
						25 = { give_nickname = nick_the_whiner }
						25 = { give_nickname = nick_the_moaner }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_blushing
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet
						}
						25 = { }
					}
				}
			}
		}

		# REQUIRED event targets for setting up duel evaluation!
		hidden_effect = {
			save_event_target_as = combatant_1 # the person issuing the duel...
			FROM = { save_event_target_as = combatant_2 } # the target of the duel...
		}

		FROM = {
			show_scope_change = no
			apply_degree_of_dishonorable_duel_effect = yes  # checks a bunch of age and health statuses...
		}

		pacifists_lose_piety_effect = yes

		add_character_modifier = {
			name = recent_duel_timer
			years = 1
			hidden = yes
		}


		FROM = { character_event = { id = HFP.10095 days = 1 } } # Duel evaluation (hidden) + result event as follow-up.

		ai_chance = {
			factor = 40

			mult_modifier = {
				factor = 0.1
				trait = craven
			}
			mult_modifier = {
				factor = 1.5
				trait = brave
			}
			mult_modifier = {
				factor = 0.75
				is_tribal = no
				is_nomadic = no
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = FROM value >= 5 }
			}
			mult_modifier = {
				factor = 1.25
				combat_rating_diff = { character = FROM value >= 10 }
			}
			mult_modifier = {
				factor = 1.5
				combat_rating_diff = { character = FROM value >= 15 }
			}
			mult_modifier = {
				factor = 1.75
				combat_rating_diff = { character = FROM value >= 20 }
			}
		}
	}

	option = { # Become a rival.
		name = EVTOPTAHF25268

		trigger = {
			num_of_rivals < 3
			FROM = { num_of_rivals < 3 }

			NOR = {
				is_rival = FROM
				is_friend = FROM
				is_lover = FROM
			}
		}

		add_rival = FROM
		FROM = { character_event = { id = HF.25270 } } # Notify.

		tiered_prestige_negative_effect = yes

		# Influence penalty based on opponent's strength.
		if = {
			limit = { FROM = { has_character_flag = flyting_strong } }
			detract_society_currency_minor_effect = yes
		}
		else_if = {
			limit = { FROM = { has_character_flag = flyting_medium } }
			detract_society_currency_tiny_effect = yes
		}
		else = {
			hidden_effect = { # If defeated by a weak guy, gain nickname.
				if = {
					limit = { has_nickname = no }

					random_list = {
						25 = { give_nickname = nick_the_short_tempered }
						25 = { give_nickname = nick_the_red_cheeks }
						25 = { give_nickname = nick_the_whiner }
						25 = { give_nickname = nick_the_moaner }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_blushing
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet
						}
						25 = { }
					}
				}
			}
		}

		opinion = {
			name = opinion_lousy_winner
			who = FROM
			years = 5
		}

		hidden_effect = {
			society = {
				any_society_member = {
					limit = {
						is_adult = yes

						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_loser
						who = ROOT
						years = 2
					}
				}
			}
		}

		custom_tooltip = { text = TT_EVTOPTAHF25268 }
		warrior_lodge_flyting_cleanup_effect = yes

		ai_chance = { factor = 20 }
	}

	option = {
		name = EVTOPTBHF25268

		# Influence penalty based on opponent's strength.
		tiered_prestige_negative_effect = yes

		if = {
			limit = { FROM = { has_character_flag = flyting_strong } }
			detract_society_currency_minor_effect = yes
		}
		else_if = {
			limit = {
				FROM = {
					has_character_flag = flyting_medium
				}
			}
			detract_society_currency_tiny_effect = yes
		}
		else = {
			detract_society_currency_trivial_effect = yes

			hidden_effect = { # If defeated by a weak guy, gain nickname.
				if = {
					limit = { has_nickname = no }

					random_list = {
						25 = { give_nickname = nick_the_short_tempered }
						25 = { give_nickname = nick_the_red_cheeks }
						25 = { give_nickname = nick_the_whiner }
						25 = { give_nickname = nick_the_moaner }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_blushing
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet
						}
						25 = { }
					}
				}
			}
		}

		opinion = {
			name = opinion_lousy_winner
			who = FROM
			years = 5
		}


		hidden_effect = {
			society = {
				any_society_member = {
					limit = {
						is_adult = yes

						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_loser
						who = ROOT
						years = 2
					}
				}
			}
		}

		custom_tooltip = { text = TT_EVTOPTAHF25268 }
		warrior_lodge_flyting_cleanup_effect = yes

		ai_chance = { factor = 100 }
	}
}

# You lost, but the winner is polite.
character_event = {
	id = HF.25269
	title = EVTTITLEHF25250
	desc = EVTDESCHF25269
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	fail_trigger_effect = {
		warrior_lodge_flyting_cleanup_effect = yes
	}

	option = { # Become a rival. - Only envious when the winner is kind.
		name = EVTOPTAHF25269
		tooltip_info = envious

		trigger = {
			trait = envious
			num_of_rivals < 3
			FROM = { num_of_rivals < 3 }

			NOR = {
				is_rival = FROM
				is_friend = FROM
				is_lover = FROM
			}
		}

		add_rival = FROM
		tiered_prestige_negative_effect = yes
		FROM = { character_event = { id = HF.25271 } } # Notify.

		# Influence penalty based on opponent's strength.
		if = {
			limit = { FROM = { has_character_flag = flyting_strong } }
			detract_society_currency_minor_effect = yes
		}
		else_if = {
			limit = { FROM = { has_character_flag = flyting_medium } }
			detract_society_currency_tiny_effect = yes
		}
		else = {
			detract_society_currency_trivial_effect = yes

			hidden_effect = { # If defeated by a weak guy, gain nickname.
				if = {
					limit = { has_nickname = no }

					random_list = {
						25 = { give_nickname = nick_the_short_tempered }
						25 = { give_nickname = nick_the_red_cheeks }
						25 = { give_nickname = nick_the_whiner }
						25 = { give_nickname = nick_the_moaner }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_blushing
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet
						}
						25 = { }
					}
				}
			}
		}

		opinion = {
			who = FROM
			name = opinion_lousy_winner
			years = 5
		}

		hidden_effect = {
			society = {
				any_society_member = {
					limit = {
						is_adult = yes

						NOR = {
							character = FROM
							character = ROOT
						}
					}

					opinion = {
						name = opinion_loser
						who = ROOT
						years = 2
					}
				}
			}
		}

		custom_tooltip = { text = TT_EVTOPTAHF25269 }
		warrior_lodge_flyting_cleanup_effect = yes

		ai_chance = { factor = 20 }
	}

	option = {
		name = EVTOPTBHF25269

		tiered_prestige_negative_effect = yes

		# Influence penalty based on opponent's strength.
		if = {
			limit = { FROM = { has_character_flag = flyting_strong } }
			detract_society_currency_minor_effect = yes
		}
		else_if = {
			limit = { FROM = { has_character_flag = flyting_medium } }
			detract_society_currency_tiny_effect = yes
		}
		else = {
			detract_society_currency_trivial_effect = yes

			hidden_effect = { # If defeated by a weak guy, gain nickname.
				if = {
					limit = { has_nickname = no }

					random_list = {
						25 = { give_nickname = nick_the_short_tempered }
						25 = { give_nickname = nick_the_red_cheeks }
						25 = { give_nickname = nick_the_whiner }
						25 = { give_nickname = nick_the_moaner }
						25 = {
							trigger = { is_female = no }
							give_nickname = nick_the_blushing
						}
						25 = {
							trigger = { is_female = yes }
							give_nickname = nick_the_shrinking_violet
						}
						25 = { }
					}
				}
			}
		}

		opinion = {
			who = FROM
			name = opinion_kind_winner
			years = 5
		}

		warrior_lodge_flyting_cleanup_effect = yes

		ai_chance = { factor = 100 }
	}
}

# Loser declared rivalry because you mocked him.
character_event = {
	id = HF.25270
	title = EVTTITLEHF25250
	desc = EVTDESCHF25270
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHF25270

		tooltip = { add_rival = FROM }
	}
}

# Loser declared rivalry despite your kindness..
character_event = {
	id = HF.25271
	title = EVTTITLEHF25250
	desc = EVTDESCHF25271
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHF25270

		tooltip = { add_rival = FROM }
	}
}

#############################################

			# Drinking game #

#############################################

# Warrior Lodge Hero decides whether to start.
character_event = {
	id = HF.25280
	title = EVTTITLEHF25280
	desc = EVTDESCHF25280
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes # on_society_bi_yearly_pulse, random_events

	has_dlc = "Holy Fury"
	min_age = 16
	only_capable = yes
	prisoner = no
	in_command = no

	trigger = {
		society_rank == 4
		is_inaccessible_trigger = no
		is_member_of_any_warrior_lodge_trigger = yes
		NOT = { society_member_of = warrior_lodge_bon }

		society = {
			any_society_member = { # Make sure there are enough contenders to join in.
				count >= 4 # At least a few other members should be around.

				is_adult = yes
				in_command = no
				prisoner = no
				is_incapable = no
				is_inaccessible_trigger = no
				NOT = { character = ROOT }
			}
		}
	}

	immediate = {
		random_list = {
			25 = { sound_effect = pagan_cheering_01 }
			25 = { sound_effect = pagan_cheering_02 }
			25 = { sound_effect = pagan_cheering_03 }
			25 = { sound_effect = warrior_lodge_ambient_02 }
		}

		set_character_flag = do_not_disturb
		character_event = { id = HF.25301 days = 15 } # Clear flag.
	}

	option = { # Start tournament
		name = EVTOPTAHF25280
		custom_tooltip = { text = TOOLTIP_EVTOPTAHF25280 }

		society = {
			any_society_member = {
				limit = {
					is_adult = yes
					in_command = no
					prisoner = no
					is_incapable = no
					is_inaccessible_trigger = no
					NOT = { character = ROOT }
				}
				character_event = { id = HF.25281 } # Call in contenders.
			}
		}

		save_event_target_as = WL_host_drinking_game
		character_event = { id = HF.25283 days = 5 } # Actually start.
		character_event = { id = HF.25282 days = 60 } # Clear flags.
	}

	option = { # Do not. - End of line.
		name = EVTOPTBHF25280

		detract_society_currency_major_effect = yes
		clr_character_flag = do_not_disturb

		ai_chance = { factor = 0 }
	}
}

# Other Warrior Lodge Members join in.
character_event = {
	id = HF.25281
	title = EVTTITLEHF25280
	desc = EVTDESCHF25281
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	trigger = {
		FROM = { is_alive = yes }
	}

	immediate = {
		set_character_flag = do_not_disturb
		character_event = { id = HF.25301 days = 15 } # Clear flag.
	}

	option = {
		name = EVTOPTAHF25281
		custom_tooltip = { text = TT_EVTOPTAHF25281 }

		set_character_flag = flag_WL_drinking_game_contender
		character_event = { id = HF.25282 days = 60 } # Clear flags.
	}

	option = {
		name = EVTOPTBHF25281

		detract_society_currency_medium_effect = yes
		tiered_prestige_negative_effect = yes
		clr_character_flag = do_not_disturb

		ai_chance = { factor = 0 }
	}
}

# Delayed cleanup for guests, just in case something happens.
character_event = {
	id = HF.25282

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		warrior_lodge_drinking_game_cleanup_effect = yes
	}
}

# Host: The game begins.
character_event = {
	id = HF.25283
	title = EVTTITLEHF25280
	desc = EVTDESCHF25283
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25283
		custom_tooltip = { text = TT_EVTOPTAHF25283 }

		any_player = { # Notify all contenders.
			limit = {
				same_society_as = ROOT
				has_character_flag = flag_WL_drinking_game_contender
			}
			character_event = { id = HF.25284 }
		}

		character_event = { id = HF.25285 days = 5 } # Scope two finalists.
	}
}

# Contenders notified. Player only
character_event = {
	id = HF.25284
	title = EVTTITLEHF25280
	desc = EVTDESCHF25284
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25284
		custom_tooltip = { text = TT_EVTOPTAHF25284 }
	}
}

# hidden event for the host, picking two finalists and sending event to underdog.
character_event = {
	id = HF.25285

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		pick_potential_WL_drinking_finalists_effect = yes
	}
}

# Host Fallback: There was no winner for some reason.
character_event = {
	id = HF.25286
	title = EVTTITLEHF25280
	desc = EVTDESCHF25286
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25286

		tiered_prestige_reward_effect = yes
		warrior_lodge_drinking_game_cleanup_effect = yes

		society = {
			any_society_member = { # Notify all contenders.
				limit = { has_character_flag = flag_WL_drinking_game_contender }
				character_event = { id = HF.25287 }
			}
		}
	}
}

# Contenders informed no winner was found.
character_event = {
	id = HF.25287
	title = EVTTITLEHF25280
	desc = EVTDESCHF25287
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25287

		add_society_currency_trivial_effect = yes
		warrior_lodge_drinking_game_cleanup_effect = yes

		random = {
			chance = 2
			add_trait_drunkard_effect = yes
		}
	}
}

# A finalist is losing: chance to use special action.
character_event = {
	id = HF.25288
	title = EVTTITLEHF25280
	desc = {
		text = EVTDESCAHF25288
		trigger = { character = event_target:warrior_lodge_drinking_finalist_1 }
	}
	desc = {
		text = EVTDESCBHF25288
		trigger = { character = event_target:warrior_lodge_drinking_finalist_2 }
	}
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	# Intrigue.
	# Strong/Robust power through.
	# Normal.

	option = {
		name = EVTOPTAHF25288
		tooltip_info = intrigue
		trigger = { intrigue >= 10 }
		custom_tooltip = { text = TT_EVTOPTAHF25288 }

		set_character_flag = flag_intrigue_cheating_WL_drinking_game

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 1.5
				trait = deceitful
			}
			mult_modifier = {
				factor = 0.5
				trait = honest
			}
			mult_modifier = {
				factor = 0.5
				trait = stubborn
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
		}
	}

	option = {
		name = EVTOPTBHF25288
		tooltip_info = strong
		trigger = { trait = strong }
		custom_tooltip = { text = TT_EVTOPTBHF25288 }

		set_character_flag = flag_strong_boost_WL_drinking_game

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTBHF25288
		tooltip_info = brawny

		trigger = {
			trait = brawny
			NOT = { trait = strong }
		}

		custom_tooltip = { text = TT_EVTOPTBHF25288 }
		set_character_flag = flag_strong_boost_WL_drinking_game

		ai_chance = { factor = 100 }
	}

	option = {
		name = EVTOPTCHF25288

		ai_chance = { factor = 10 }
	}

	after = {
		pick_potential_WL_drinking_winner_effect = yes
	}
}

# Host discovers cheater.
character_event = {
	id = HF.25289
	title = EVTTITLEHF25280
	desc = EVTDESCHF25289
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = { # Let it slide.
		name = EVTOPTAHF25289
		custom_tooltip = { text = TT_EVTOPTAHF25289 }

		set_character_flag = flag_WL_drinking_host_approves_of_cheating
		pick_potential_WL_drinking_winner_effect = yes # Once again.

		ai_chance = {
			factor = 20

			trigger = {
				NOT = { is_rival = FROM }
			}

			mult_modifier = {
				factor = 1.5
				is_friend = FROM
			}
			mult_modifier = {
				factor = 1.5
				is_lover = FROM
			}
			mult_modifier = {
				factor = 1.25
				is_close_relative = FROM
			}
			mult_modifier = {
				factor = 1.5
				trait = deceitful
			}
			mult_modifier = {
				factor = 0.5
				trait = honest
			}
			mult_modifier = {
				factor = 0.5
				trait = stubborn
			}
			mult_modifier = {
				factor = 0.5
				trait = just
			}
		}
	}

	option = {
		name = EVTOPTBHF25289
		custom_tooltip = { text = TT_EVTOPTBHF25289 }

		tooltip = {
			FROM = {
				tiered_prestige_negative_effect = yes
				detract_society_currency_medium_effect = yes
			}
		}

		FROM = { character_event = { id = HF.25290 } } # Inform the guy.

		ai_chance = { factor = 100 }
	}
}

# Cheater was discovered.
character_event = {
	id = HF.25290
	title = EVTTITLEHF25280
	desc = EVTDESCHF25290
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25290
		custom_tooltip = { text = TT_EVTOPTAHF25290 }

		tiered_prestige_negative_effect = yes
		detract_society_currency_medium_effect = yes

		random = {
			chance = 10
			add_trait_wounded_effect = yes
		}

		hidden_effect = {
			society = {
				any_society_member = {
					limit = {
						is_adult = yes
						NOT = { character = ROOT }
					}
					opinion = {
						name = opinion_cheater
						who = ROOT
						years = 5
					}
				}
			}

			if = {
				limit = { has_nickname = no }

				random_list = {
					15 = { give_nickname = nick_the_cheater }
					15 = { give_nickname = nick_the_liar }
					15 = { give_nickname = nick_the_dry_throat }
					70 = { }
				}
			}

		}

		if = {
			limit = {
				event_target:warrior_lodge_drinking_finalist_1 = { # If other guy still exists, he has won.
					is_alive = yes
					NOT = { character = ROOT }
				}
			}
			event_target:warrior_lodge_drinking_finalist_1 = { character_event = { id = HF.25291 } }
		}
		else_if = {
			limit = {
				event_target:warrior_lodge_drinking_finalist_2 = { # If other guy still exists, he has won.
					is_alive = yes
					NOT = { character = ROOT }
				}
			}
			event_target:warrior_lodge_drinking_finalist_2 = { character_event = { id = HF.25291 } }
		}
		else = {
			event_target:WL_host_drinking_game = { character_event = { id = HF.25286 } } # Otherwise inform host that nobody won.
		}

		warrior_lodge_drinking_game_cleanup_effect = yes
	}
}

# Other guy was cheating, you are the last one standing.
character_event = {
	id = HF.25291
	title = EVTTITLEHF25280
	desc = EVTDESCHF25291
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25291

		add_society_currency_tiny_effect = yes
		warrior_lodge_drinking_game_cleanup_effect = yes

		hidden_effect = {
			if = {
				limit = {
					this_has_average_nickname_trigger = no
					this_has_cool_nickname_trigger = no
					this_has_super_cool_nickname_trigger = no
				}
				random_list = {
					10 = { give_nickname = nick_the_hundred_flagons }
					10 = { give_nickname = nick_the_bottomless }
					80 = { }
				}
			}
		}

		event_target:WL_host_drinking_game = { character_event = { id = HF.25293 } } # Notify host.
	}
}

# Winner receives event.
character_event = {
	id = HF.25292
	title = EVTTITLEHF25280
	desc = EVTDESCHF25292
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25292

		add_society_currency_tiny_effect = yes
		warrior_lodge_drinking_game_cleanup_effect = yes
		add_legend_progress_trivial_effect = yes

		random = {
			chance = 10
			add_trait_drunkard_effect = yes
		}

		hidden_effect = {
			if = {
				limit = {
					this_has_average_nickname_trigger = no
					this_has_cool_nickname_trigger = no
					this_has_super_cool_nickname_trigger = no
				}
				random_list = {
					10 = { give_nickname = nick_the_hundred_flagons }
					10 = { give_nickname = nick_the_bottomless }
					80 = { }
				}
			}
		}

		if = { # Notify the other finalist.
			limit = {
				event_target:warrior_lodge_drinking_finalist_1 = { # If other guy still exists, he has won.
					is_alive = yes
					NOT = { character = ROOT }
				}
			}
			event_target:warrior_lodge_drinking_finalist_1 = { character_event = { id = HF.25295 } }
		}
		else_if = {
			limit = {
				event_target:warrior_lodge_drinking_finalist_2 = { # If other guy still exists, he has won.
					is_alive = yes
					NOT = { character = ROOT
					}
				}
			}
			event_target:warrior_lodge_drinking_finalist_2 = { character_event = { id = HF.25295 } }
		}

		# Notify host.
		event_target:WL_host_drinking_game = { character_event = { id = HF.25293 } }
	}
}

# Host: From has won.
character_event = {
	id = HF.25293
	title = EVTTITLEHF25280
	desc = EVTDESCHF25293
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	# Make non-aggression pact. (Trusting only, rulers only)
	# Make friend.
	# Give gold for currency.
	# Nothing.

	option = {
		name = EVTOPTAHF25293
		tooltip_info = trusting

		trigger = {
			trait = trusting
			higher_real_tier_than = BARON

			FROM = {
				is_landed = yes
				higher_real_tier_than = BARON
			}

			NOR = {
				is_vassal_or_below_of = FROM
				has_non_aggression_pact_with = FROM
			}
		}

		add_society_currency_minor_effect = yes

		tooltip = {
			opinion = {
				name = in_non_aggression_pact
				who = FROM
				years = 50
			}
		}

		FROM = { character_event = { id = HF.25296 } } # Inform winner.

		ai_chance = { factor = 10 }
	}

	option = {
		name = EVTOPTBHF25293

		trigger = {
			num_of_friends < 3
			FROM = { num_of_friends < 3 }

			NOR = {
				trait = paranoid
				is_rival = FROM
				is_friend = FROM
				is_lover = FROM
			}
		}

		add_society_currency_tiny_effect = yes
		tooltip = { add_friend = FROM }
		FROM = { character_event = { id = HF.25298 } } # Inform winner.

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 2
				trait = gregarious
			}
			mult_modifier = {
				factor = 2
				trait = socializer
			}
			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}

	option = {
		name = EVTOPTCHF25293

		add_society_currency_tiny_effect = yes

		tooltip = {
			transfer_scaled_wealth = {
				value = 0.5
				min =  50
				max = 100
				to = FROM
			}
		}

		FROM = { character_event = { id = HF.25300 } } # Inform winner.

		ai_chance = {
			factor = 10

			mult_modifier = {
				factor = 2
				trait = charitable
			}
			mult_modifier = {
				factor = 2
				trait = just
			}
			mult_modifier = {
				factor = 2
				trait = kind
			}
		}
	}

	option = {
		name = EVTOPTDHF25293

		ai_chance = { factor = 10 }
	}

	after = {
		tooltip = { add_legend_progress_trivial_effect = yes } #*actually* added only *once*, for the winner...

		warrior_lodge_drinking_game_cleanup_effect = yes

		society = {
			any_society_member = { # Notify all other contenders.
				limit = {
					has_character_flag = flag_WL_drinking_game_contender

					NOR = {
						character = FROM
						character = event_target:warrior_lodge_drinking_finalist_1
						character = event_target:warrior_lodge_drinking_finalist_2
					}
				}
				character_event = { id = HF.25294 }
			}
		}
	}
}

# All other contenders notified that they have lost.
character_event = {
	id = HF.25294
	title = EVTTITLEHF25280
	desc = EVTDESCHF25294
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy
	portrait = FROMFROM

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25294

		prestige = 25

		random = {
			chance = 1
			add_trait_drunkard_effect = yes
		}

		warrior_lodge_drinking_game_cleanup_effect = yes
		tooltip = { add_legend_progress_trivial_effect = yes } #*actually* added only *once*, for the winner...
	}
}

# Second finalist notified of loss.
character_event = {
	id = HF.25295
	title = EVTTITLEHF25280
	desc = EVTDESCHF25295
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25295

		add_society_currency_tiny_effect = yes

		random = {
			chance = 3
			add_trait_drunkard_effect = yes
		}

		warrior_lodge_drinking_game_cleanup_effect = yes

		tooltip = { add_legend_progress_trivial_effect = yes } #*actually* added only *once*, for the winner...
	}
}

# Winner informed of non-aggression pact offer from Hero.
character_event = {
	id = HF.25296
	title = EVTTITLEHF25280
	desc = EVTDESCHF25296
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25296

		opinion = {
			name = in_non_aggression_pact
			who = FROM
			years = 50
		}

		hidden_effect = {
			reverse_opinion = {
				name = in_non_aggression_pact
				who = FROM
				years = 50
			}
		}

		warrior_lodge_drinking_game_cleanup_effect = yes
	}

	option = {
		name = EVTOPTBHF25296

		tiered_prestige_negative_effect = yes
		detract_society_currency_tiny_effect = yes

		reverse_opinion = {
			name = opinion_antagonized_2
			who = FROM
			years = 20
		}

		warrior_lodge_drinking_game_cleanup_effect = yes
		FROM = { character_event = { id = HF.25297 } }

		ai_chance = { factor = 0 }
	}
}

# Hero informed that the winner scorned your offer.
character_event = {
	id = HF.25297
	title = EVTTITLEHF25280
	desc = EVTDESCHF25297
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHF25297

		tooltip = {
			opinion = {
				name = opinion_antagonized_2
				years = 20
				who = FROM
			}
		}
	}
}

# Winner informed of friendship offer from Hero.
character_event = {
	id = HF.25298
	title = EVTTITLEHF25280
	desc = EVTDESCHF25298
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25298

		add_friend = FROM
		warrior_lodge_drinking_game_cleanup_effect = yes
	}

	option = { # Refuse
		name = EVTOPTBHF25298

		tiered_prestige_negative_effect = yes

		reverse_opinion = {
			name = opinion_antagonized_2
			who = FROM
			years = 20
		}

		FROM = { character_event = { id = HF.25299 } }

		ai_chance = { factor = 0 }
	}
}

# Hero informed that the winner scorned your offer.
character_event = {
	id = HF.25299
	title = EVTTITLEHF25280
	desc = EVTDESCHF25299
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	ai = no

	option = {
		name = EVTOPTAHF25299

		tooltip = {
			opinion = {
				name = opinion_antagonized_2
				who = FROM
				years = 20
			}
		}
	}
}

# Winner gets money.
character_event = {
	id = HF.25300
	title = EVTTITLEHF25280
	desc = EVTDESCHF25300
	picture = GFX_evt_camaraderie
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAHF25300

		FROM = {
			show_scope_change = no

			transfer_scaled_wealth = {
				value = 0.5
				min =  50
				max = 100
				to = ROOT
			}
		}
	}
}

# Safety flag clearance, just in case anybody dies in the middle of a chain.
character_event = {
	id = HF.25301

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		clr_character_flag = do_not_disturb
	}
}