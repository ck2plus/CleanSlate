#Create a wonder
obj_create_wonder = {
	type = character

	potential = {
		independent = yes
		is_landed = yes
		is_adult = yes

		has_game_rule = {
			name = wonder_rule
			value = on
		}

		NOT = { has_character_flag = created_wonder }
		has_wonder = no
		has_started_building_wonder = no
		is_incapable = no
		is_inaccessible_trigger = no
		wealth >= 1000
		prestige >= 500
	}

	success = {
		custom_tooltip = {
			text = create_wonder_condition_tooltip

			any_realm_wonder = {
				wonder_stage >= 2

				original_wonder_owner = {
					character = ROOT
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = create_wonder_effect_tooltip

			set_character_flag = created_wonder

			random_list = {
				100 = {
					trigger = {
						NOT = {
							any_demesne_wonder = {
								has_wonder_upgrade = upgrade_spikes
							}
						}
					}
					random_demesne_wonder = {
						add_wonder_upgrade = upgrade_spikes
					}
				}
				100 = {
					trigger = {
						NOT = {
							any_demesne_wonder = {
								has_wonder_upgrade = upgrade_watchtower_network
							}
						}
					}
					random_demesne_wonder = {
						add_wonder_upgrade = upgrade_watchtower_network
					}
				}
				100 = {
					trigger = {
						NOT = {
							any_demesne_wonder = {
								has_wonder_upgrade = upgrade_tower
							}
						}
					}
					random_demesne_wonder = {
						add_wonder_upgrade = upgrade_tower
					}
				}

			}
		}
	}

	abort = {
		is_incapable = yes
	}

	chance = {
		factor = 1
	}
}